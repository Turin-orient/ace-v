{
  "role": "generator",
  "call_id": "train_e_1_s_76_post_curate",
  "model": "gpt-5-mini",
  "prompt": "You are an analysis expert tasked with answering questions using your knowledge, a curated playbook of strategies and insights and a reflection that goes over the diagnosis of all previous mistakes made while answering the question.\n\n**Instructions:**\n- Read the playbook carefully and apply relevant strategies, formulas, and insights\n- Pay attention to common mistakes listed in the playbook and avoid them\n- Show your reasoning step-by-step\n- Be concise but thorough in your analysis\n- If the playbook contains relevant code snippets or formulas, use them appropriately\n- Double-check your calculations and logic before providing the final answer\n\nYour output should be a json object, which contains the following fields:\n- reasoning: your chain of thought / reasoning / thinking process, detailed analysis and calculations\n- bullet_ids: each line in the playbook has a bullet_id. all bulletpoints in the playbook that's relevant, helpful for you to answer this question, you should include their bullet_id in this list\n- final_answer: your concise final answer\n\n\n**Playbook:**\n## STRATEGIES & INSIGHTS\n\n## FORMULAS & CALCULATIONS\n\n## CODE SNIPPETS & TEMPLATES\n\n[code-00004] helpful=0 harmful=0 :: Regex detection template (pseudo-code): - patterns = { 'PaymentsToAcquireBusinessesGross': [/(?:aggregate\\s+|total\\s+)?purchase\\s+price/i, /cash(?:\\s+consideration)?\\s+paid/i], 'BusinessCombinationConsiderationTransferred1': [/(?:aggregate\\s+)?consideration(?:\\s+transferred)?/i], 'BusinessAcquisitionEquityInterestsIssuedOrIssuableNumberOfSharesIssued': [/issued\\s+\\d[\\d,]*/i, /shares\\s+issued/i] } - For each numeric token in sentence: find nearest matching pattern within N tokens (N=8). - Assign tag of nearest matched pattern. - If multiple tags at equal distance, apply specificity precedence: purchase_price > cash_paid > consideration. - If no match, fall back to semantic classifier but flag for review.\n## COMMON MISTAKES TO AVOID\n\n[err-00003] helpful=1 harmful=0 :: Do not conflate 'purchase price' with 'consideration'. Anti-pattern: tagging both an 'aggregate purchase price of $X' and an 'aggregate consideration of $Y' with the same 'consideration' tag. Concrete prevention: enforce lexical-match-first rule (if 'purchase price' appears, do not map that phrase to BusinessCombinationConsiderationTransferred1). Add a unit-test: example sentence 'aggregate purchase price of $162 million' must map to PaymentsToAcquireBusinessesGross; 'aggregate consideration of $1.2 billion' must map to BusinessCombinationConsiderationTransferred1.\n[err-00007] helpful=0 harmful=0 :: Anti-patterns and prevention rules (atomic): - Anti-pattern: mapping any 'per share' price to SaleOfStockPricePerShare without checking instrument class. Prevention: before assigning SaleOfStockPricePerShare check for convertible/preferred/mandatory cues in same sentence; if present, map to convertible-specific price tag. - Anti-pattern: treating 'we sold X shares' as a generic secondary sale when underwriter/overallotment/offer language is present. Prevention: if 'we sold' co-occurs with underwriter/overallotment/overallotment exercise/offer language within ±1 sentence, treat as primary issuance and map share counts to StockIssuedDuringPeriodSharesNewIssues. - Anti-pattern: applying nearest-lexical-match only. Prevention: implement precedence override: instrument-type and offering flags must be evaluated and can override nearest lexical match. - Add unit-tests for regressions: include at least 10 sentences mixing convertible language with 'per share' and 'sold' / 'offered' / 'underwriters' to ensure convertible/issuance tags win over generic sale tags.\n[err-00010] helpful=0 harmful=0 :: err-XXXX :: Anti-pattern: blanket-mapping 'availability' -> RemainingBorrowingCapacity. Prevention checklist (atomic):\n- Do not assign RemainingBorrowingCapacity solely because the word 'availability' appears. First check for a facility-capacity anchor in same or previous sentence (\"has a $X credit facility\", \"in an aggregate principal amount of up to $X\").\n- If 'availability' is used in a comparative clause referencing a previously stated cap (\"may be less than $X\" where X == stated cap), map to MaximumBorrowingCapacity (the sentence is comparing to the contractual cap or describing an effective cap constraint).\n- If the phrase contains explicit current-amount tokens (\"amount available under the facility totaled\", \"was available under the facility\"), map to RemainingBorrowingCapacity.\n- If no anchor and no explicit remaining-amount phrase exist, mark as ambiguous and require human review instead of auto-mapping.\n- Add automated unit-tests for both positive and negative examples and log ambiguous cases for retraining.\n[err-00014] helpful=0 harmful=0 :: Tie-breaker: prefer instrument-specific mapping over generic financial-category tags when instrument anchor present (atomic prevention rule): - Anti-pattern: mapping an 'interest' currency amount to generic InterestExpense or mapping a 'per annum' percentage to a spread tag without checking instrument context. - Prevention checklist (apply in order): 1) If numeric token is percentage AND 'per annum'/'per year' present AND any instrument-anchor (note/loan/term loan/seller note) in sentence ±1 -> map to DebtInstrumentInterestRateStatedPercentage. 2) If numeric token is currency AND interest lexical cue ('interest charges', 'interest expense', 'interest on') AND instrument-anchor in sentence ±1 -> map to InterestExpenseDebt (link numeric to instrument anchor). 3) If both 'spread'/'margin' and 'per annum' cues occur, prefer per-annum/stated-rate mapping; log conflict for QA. 4) If customer + revenue percent detected, map to ConcentrationRiskPercentage1; do not map to generic 'percentage' tags. 5) If instrument-anchor is absent for interest-charge currency amounts, map to generic InterestExpense and flag for human review; add the sentence to a retraining queue. - Unit-tests: include all examples referenced in the above heuristics and assert instrument-specific tags beat generic alternatives.\n[err-00002] helpful=0 harmful=0 :: Atomic negation-to-zero rule for availability quantities (prevention of treating negation as 'absent' rather than numeric zero). Purpose: ensure explicit negative availability phrases ('no', 'none', 'not available') are normalized to numeric zero for quantity tags and mapped to the most specific availability tag. Rules:\n1) Negation cues (case-insensitive regex examples): /\\bno\\b/, /\\bnone\\b/, /\\bnot\\s+available\\b/, /\\bthere\\s+are\\s+no\\b/, /\\bzero\\b/ within ±6 tokens of an availability noun ('available', 'remain', 'remain\\s+available', 'available\\s+for\\s+grant').\n2) Quantity mapping: when negation cue co-occurs with availability noun and a plan/instrument anchor as applicable (e.g., 'under the Plan', 'under the facility'), assign numeric value 0 and map to the specific quantity tag (e.g., ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant = 0; LineOfCreditFacilityRemainingBorrowingCapacity = $0 when explicit 'amount available under the facility was $0' or 'no availability under the credit facility').\n3) Scope constraints (do NOT apply universal zero conversion): do not convert negations that apply to non-quantity facts or idiomatic phrases ('no material impact', 'no change', 'no further details'); require proximity to a numeric/quantity noun and an anchor.\n4) Tag-type constraint: only auto-convert to zero for quantity/amount-of-shares/remaining-capacity numeric tags; do not auto-convert percentages unless explicit context indicates 'zero percent' (e.g., 'no revenue' vs 'zero percent of revenue' are different; flag ambiguous percent-negations for review).\n5) Token-window & antecedent resolution: allow antecedent anchors in previous sentence up to ±1 sentence when anaphoric phrase 'the Plan'/'the facility' is used; require confidence threshold for cross-sentence negation mapping; otherwise flag for human review.\n6) Unit-tests/examples to add:\n   - 'no shares remain available under the 2014 Long Term Incentive Plan' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant = 0.\n   - 'There are no amounts available under the credit facility' -> LineOfCreditFacilityRemainingBorrowingCapacity = 0.\n   - 'No material impact was expected' -> do NOT map to any numeric tag (must be filtered by scope constraint).\n7) Logging: any auto-zero assignment should be recorded with the negation cue span and the anchor span for traceability and QA.\n[err-00004] helpful=0 harmful=0 :: Anti-pattern prevention: Do not map currency amounts labeled as 'interest charges'/'interest expense' to generic InterestExpense when an instrument-anchor is present; instead map to InterestExpenseDebt and normalize explicit zeros. - Exact lexical cues (case-insensitive): /interest\\s+charge(s)?\\b/, /interest\\s+expense(s)?\\b/, /interest\\s+on\\s+the\\s+(note|notes|loan|term\\s+loan|seller\\s+note|revolver)/i. - Instrument-anchor detection: detect instrument names (Seller Notes, Term Loan, Revolver, Senior Notes, etc.) in same sentence OR previous sentence (allow antecedent resolution up to ±1 sentence and span <= 40 tokens). - Association window: currency numeric token within ±12 tokens of interest lexical cue (primary) and instrument-anchor within ±40 tokens across sentence boundary if needed. - Mapping rule: if both interest lexical cue and instrument-anchor present -> assign InterestExpenseDebt (link numeric to instrument id). If interest lexical cue present but no instrument-anchor -> assign generic InterestExpense and flag 'interest-amount-no-instrument' for review. - Zero/numeric normalization: if the numeric token is explicit 'zero', 'no interest', 'none' appearing within ±6 tokens of interest lexical cue and instrument-anchor present, normalize to numeric 0 and assign InterestExpenseDebt = 0; log negation cue span and anchor span for traceability. - Precedence: this instrument-specific mapping overrides any generic expense or cash-flow tag. - Unit-tests (atomic): - '$179,507 of interest charges associated with the Seller Notes for the year' -> $179,507 = InterestExpenseDebt (Seller Notes). - 'No interest expense was recorded on the Term Loan' -> InterestExpenseDebt = 0 (Term Loan), logged. - '$331,397 of interest expense for the six months ended June 30 related to the Term Loan' -> $331,397 = InterestExpenseDebt. - Logging: record instrument anchor span and interest phrase span for each mapping for QA and retraining; aggregate 'interest-amount-no-instrument' cases into review queue.\n[err-00002] helpful=0 harmful=0 :: err-000XX :: Lexical-first precedence for line-item expense labels (atomic rule to prevent overapplication of header/context inference):\n- Purpose (atomic): When a disclosure line explicitly uses a canonical line-item label (e.g., 'rent expense', 'lease and rental expense'), prefer the canonical line-item tag (LeaseAndRentalExpense) over a more specific context-derived tag (OperatingLeasesRentExpenseNet) unless the text itself explicitly signals the narrower concept.\n- Exact lexical cues (case-insensitive regex): /\\b(?:rent\\s+expense|lease(?:s)?\\s+and\\s+rental\\s+expense|lease\\s+and\\s+rental\\s+expense)\\b/i. Apply only when the cue appears in the same sentence or the same table/row label as the numeric token.\n- Association window: numeric token must be within ±8 tokens of the lexical cue OR the numeric is the value in the same table row/line that contains the lexical cue. Treat row/line membership as a strong local association (overrides paragraph-level header proximity).\n- Exception rules (allow OperatingLeasesRentExpenseNet only if ANY of the following explicit conditions are met):\n  1) Explicit adjacency: the phrase 'operating lease(s)' and 'rent expense' co-occur within a narrow adjacency window (e.g., within ±6 tokens) in the same sentence or row. Regex examples: /\\boperating\\s+lease(?:s)?\\b.*?\\brent\\s+expense\\b|\\brent\\s+expense\\b.*?\\boperating\\s+lease(?:s)?\\b/i.\n  2) Explicit labelled row/header coupling: the line/row label itself reads like 'Operating lease rent expense', 'Operating leases — rent expense', 'Operating lease expense — rent', or a table header/column title pairs 'Operating Leases' + row label 'Rent expense' where the parser can detect header->row binding (structured table indicator or hyphen/colon/row delimiter). Pattern to detect: /(?:Operating\\s+Leases?|NOTE\\s+\\d+\\s*-\\s*OPERATING\\s+LEASES?)\\b/ present AND row label contains 'rent' + 'expense' directly (no >2-token gap).\n  3) Document-level canonical mapping override: if the training/ground-truth mapping for this issuer consistently maps the specific phrase 'Operating lease rent expense' to OperatingLeasesRentExpenseNet and the disclosure line contains that full canonical phrase verbatim, allow specific tag.\n- Precedence decision (apply in order):\n  1) If lexical cue match (rent expense...) in same row/sentence -> assign LeaseAndRentalExpense.\n  2) Else if any Exception rule above is met -> assign OperatingLeasesRentExpenseNet (and link to instrument/context as required).\n  3) Else if lexical cue absent but only header 'OPERATING LEASES' exists and the line label says 'rent expense' (no explicit 'operating' adjacency), still assign LeaseAndRentalExpense (header-alone does NOT override explicit line-item lexical match).\n- Ambiguity handling & logging: if both mappings are plausibly matched (e.g., header present and short-distance 'operating' within previous sentence but not within the narrow adjacency windows), choose LeaseAndRentalExpense (canonical lexical) and log the example as 'header-overrule-avoided' with spans for: line-item lexical cue, header span, numeric span, chosen tag, rejected specific tag. Add logged cases to retraining queue.\n- Unit-tests (atomic examples to add):\n  - 'Rent expense was $1.3 million in 2017, $1.3 million in 2016, and $1.2 million in 2015.' -> LeaseAndRentalExpense.\n  - 'NOTE 11 - OPERATING LEASES. Rent expense was $1.3 million.' -> LeaseAndRentalExpense (header alone does not override line label).\n  - 'Operating lease rent expense — net was $1.0 million for the year.' -> OperatingLeasesRentExpenseNet (explicit adjacency/labeling).\n  - 'For operating leases, rent expense was $X' -> OperatingLeasesRentExpenseNet (explicit instrument context + adjacency).\n- Implementation notes (atomic):\n  - Apply this lexical-first rule before any header/context-scoring that boosts instrument-specific tags.\n  - Use token-distance thresholds and explicit row/line membership detection rather than document-level header presence to decide exception applicability.\n  - Record decision metadata (matched regex, token distances, header presence flag, chosen tag, rejected candidate) for each mapping to enable targeted QA and rule tuning.\n[err-00007] helpful=0 harmful=0 :: Taxonomy-existence + instrument-specificity fallback (atomic rule):\n1) Purpose: ensure issuance/issuance-price/share mappings preserve instrument-class specificity and cause taxonomy-enrichment when a more precise tag is missing.\n2) Precondition checks (apply BEFORE finalizing any issuance-related tag):\n   a) Detect instrument-class cues in same sentence OR ±1 sentence antecedent (token-window <= 40 tokens): regexes (case-insensitive): /\\bpreferred\\s+stock\\b/, /\\bcommon\\s+stock\\b/, /\\bSeries\\s+[A-Z0-9]+\\b/, /\\bconvertible\\b/, /\\bdepositary\\s+share(s)?\\b/, /\\bmandatory\\s+convertible\\b/.\n   b) Confirm numeric unit is 'shares' OR the phrase contains 'shares' / 'issued' / 'issued X shares' within ±8 tokens.\n3) Taxonomy existence check:\n   - If a candidate instrument-specific tag exists in the provided taxonomy (e.g., PreferredStockSharesIssued / PreferredStockDividendRatePercentage / DebtInstrumentConvertibleConversionPrice1), assign that specific tag (highest precedence).\n   - If candidate instrument-specific tag DOES NOT exist but instrument-class cues are present, DO NOT silently accept a generic issuance tag without metadata. Instead apply the fallback below.\n4) Fallback mapping (when specific tag missing):\n   a) Assign the most precise available tag from taxonomy (e.g., StockIssuedDuringPeriodSharesNewIssues) only as a technical mapping, AND attach structured metadata to the mapping result: { instrument_class: (preferred|common|convertible|other), instrument_series: <series-id if present>, cue_span: <text span>, rule: 'specific-tag-missing-fallback' }.\n   b) Immediately enqueue a taxonomy_enrichment item with payload: { sentence_text, numeric_value, instrument_class, suggested_preferred_tag_name, mapping_id } for human review and possible taxonomy addition.\n5) Logging & QA: for every fallback case log an entry with: chosen_tag, missing_specific_tag_candidates (list), instrument_class_span, numeric_span, filename/doc-id, and unique mapping id. Count these and surface in QA dashboard (threshold alert if >N per issuer or per run).\n6) Unit-tests (atomic examples to add):\n   - 'we issued 800,000 shares of common stock' -> if Preferred-specific tag absent then: map -> StockIssuedDuringPeriodSharesNewIssues + metadata {instrument_class: common}; flag taxonomy_enrichment=false (common tag typically present). If specific common tag exists, assign it.\n   - 'we issued 500,000 shares of the Convertible Preferred Stock' -> if PreferredStockSharesIssued tag missing: map -> StockIssuedDuringPeriodSharesNewIssues + metadata {instrument_class: preferred, series: 'Convertible Preferred'}; enqueue taxonomy_enrichment (preferred-issuance-tag).\n   - 'issued 250,000 shares of Series A Preferred Stock' -> same behavior; record series id in metadata.\n7) Precedence & tie-breakers: instrument-class detection outranks nearest-lexical generic match. Only choose a generic issuance tag without metadata when no instrument-class cue is detected.\n8) Implementation notes (atomic):\n   - Implement taxonomy-existence check as a deterministic lookup step after candidate-tag scoring but before final commit.\n   - Store metadata fields in the mapping output schema so downstream consumers retain instrument specificity even if taxonomy lacks a dedicated tag.\n   - Add automated QA job that aggregates all 'specific-tag-missing-fallback' logs weekly and auto-generates suggested taxonomy entries for human curators.\n9) Rationale: preserves signal (instrument class, series) when taxonomy incomplete, prevents silent context-collapse, enables targeted taxonomy improvements and avoids loss of granularity that would otherwise impede training/QA.\n[err-00013] helpful=0 harmful=0 :: Anti-pattern: conflating 'granted awards' with 'issued' or conflating 'weighted-average fair value' with generic per-share prices or convertible conversion-price. Prevention checklist (atomic):\n1) Lexical-first check: if 'granted' OR 'award' present within ±8 tokens of a share-count numeric -> do NOT map that numeric to issuance/sale/outstanding tags; map to grants-in-period tag unless 'issued'/'sold'/'vested and settled' appear within ±6 tokens and are the direct verb of the numeric.\n2) Fair-value vs conversion-price: if 'weighted-average fair value' appears with currency-per-share -> map to weighted-average grant-date fair value tag. Only consider converting this to a conversion-price tag when convertible/conversion-link cues co-occur (same sentence or antecedent sentence, see convertible rule).\n3) Per-share tie-breaker: always apply instrument-type detection (convertible/preferred/award/warrant) before assigning generic SaleOfStockPricePerShare. Instrument-specific signals must override generic per-share price mappings.\n4) Add unit-tests that pair the ambiguous surface forms to ensure the specific mapping wins: include examples where 'weighted-average fair value' co-occurs with 'convertible' (should prefer conversion only when explicit conversion-link exists) and where 'granted awards' co-occur with 'issued' (issued wins only when it is the syntactic verb tied to the numeric).\n5) Logging: any automatic override where a generic per-share mapping would have been assigned but an instrument-specific mapping was chosen must be logged with cue spans and chosen vs rejected tag for QA.\n[err-00022] helpful=0 harmful=0 :: [err-000XX-stockcomp] helpful=0 harmful=0 :: Prevent lexical-collapse on 'stock‑based compensation' by validating 'recognized/allocated per‑period' intent before choosing tag. Purpose: prefer AllocatedShareBasedCompensationExpense when the sentence reports amounts 'recognized' in the period or 'allocated' to functions/expense lines; otherwise use generic ShareBasedCompensation only for conceptual/aggregate disclosures.\nRules (atomic):\n1) Exact lexical cues (case-insensitive regex): /(recogniz(?:ed|es|ing)\\b|recognized\\s+expense|expense\\s+recognized|allocated|attributable\\s+to\\s+employee|allocated\\s+to\\s+function|for\\s+the\\s+period|during\\s+the\\s+period|in\\s+the\\s+period)\\b/; also capture verbs 'was recognized', 'were recognized', 'is recognized'.\n2) Association window: require any of these cues to co-occur within ±12 tokens of the currency amount OR in the same sentence. Allow antecedent resolution: if 'the amount recognized' appears and the plan/award anchor is in the previous sentence, allow ±1 sentence (combined span <= 40 tokens).\n3) Decision flow: when lexical surface match (\"stock-based compensation\" etc.) yields both candidate tags (AllocatedShareBasedCompensationExpense and ShareBasedCompensation), apply this validation: if any recognized/allocated/per‑period cue present per windows -> assign AllocatedShareBasedCompensationExpense (specific). Else if text is descriptive/conceptual (e.g., 'stock‑based compensation is a significant part of our compensation') with NO recognized/allocated/per‑period cue -> assign ShareBasedCompensation.\n4) Tie-breaker: if recognized/allocated cue is present but ambiguous (e.g., 'stock‑based compensation expense, which may be allocated...'), require explicit finite verb 'was recognized'/'was charged'/'was allocated' within ±12 tokens; otherwise flag 'stockcomp-ambiguous-allocated' and route to human review rather than defaulting to generic tag.\n5) Unit-tests (atomic):\n   - 'Stock-based compensation expense was $65.7 million recognized for the year.' -> AllocatedShareBasedCompensationExpense = 65.7M.\n   - 'Stock-based compensation expense totaled $28.4 million during the period and was allocated to cost of revenue and selling expenses.' -> AllocatedShareBasedCompensationExpense = 28.4M.\n   - 'We discuss our stock-based compensation program and its features.' -> ShareBasedCompensation (no allocated tag).\n6) Logging: always record matched cue span, numeric span, chosen tag, and which cue triggered allocated mapping. Log ambiguous cases ('stockcomp-ambiguous-allocated') with spans for QA and retraining.\n[err-00023] helpful=0 harmful=0 :: [err-000XX-taxrate] helpful=0 harmful=0 :: Prevent over‑mapping effective tax rates to reconciliation tag by requiring explicit reconciliation structure/intent before selecting EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate. Purpose: use EffectiveIncomeTaxRateContinuingOperations for plain reported effective rates; reserve reconciliation-to-federal-statute tag for explicit reconciliation language/tables/stepwise comparisons to the statutory rate.\nRules (atomic):\n1) Exact reconciliation lexical cues (case-insensitive regexes): /\\b(reconcili(?:e|ation|es|ed)|reconciles?|reconciling|reconciliation\\s+to|reconciled\\s+to|reconciles\\s+to\\s+the\\s+statutory\\s+rate|statutory\\s+rate\\s+of)\\b/ and statutory anchors: /\\b(federal\\s+statutory|U\\.?S\\.?\\s+federal\\s+statutory|U\\.?S\\.?\\s+statutory\\s+rate|federal\\s+statutory\\s+rate)\\b/; also capture explicit table/line cues: /\\bthe\\s+following\\s+reconciliation|the\\s+table\\s+below\\s+reconciles\\b|the\\s+reconciliation\\s+is\\s+as\\s+follows\\b/.\n2) Association window: require (a) a percent token or tax-rate phrase within ±12 tokens of a reconciliation/statutory cue in the same sentence OR (b) a reconciliation/statutory cue in same sentence and percent in adjacent sentence (±1 sentence antecedent) with combined span <= 40 tokens. If only 'statutory' appears but no 'reconcili*' / 'table' / 'line items' cues, do NOT select reconciliation tag automatically.\n3) Decision flow: if effective-tax-rate lexical match occurs (\"effective tax rate\", \"tax rate for continuing operations\", percent numeric reported) AND reconciliation+statutory cues are present per windows -> assign EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate. Else if percent is used to report effective tax rate(s) for periods without explicit reconciliation structure -> assign EffectiveIncomeTaxRateContinuingOperations.\n4) Tie-breaker: when both 'statutory' and simple comparative phrasing exist (e.g., 'our effective tax rate was 18%, lower than the federal statutory rate of 35%') but no 'reconcile'/'reconciliation'/'table' language, prefer EffectiveIncomeTaxRateContinuingOperations and log as 'taxrate-statutorily-compared-but-not-reconciliation' (do NOT pick reconciliation tag). Only choose reconciliation tag when 'reconcil*' or explicit reconciliation table/line item phrasing is present.\n5) Unit-tests (atomic):\n   - 'The effective income tax rate for continuing operations was 16% for the year.' -> EffectiveIncomeTaxRateContinuingOperations = 16%.\n   - 'The effective income tax rates were 18% and 16% respectively, lower than the U.S. federal statutory rate of 35%.' -> EffectiveIncomeTaxRateContinuingOperations = 18% and 16% (log 'statutory-compare-no-recon').\n   - 'The following table reconciles the U.S. federal statutory rate of 35% to the Company's effective income tax rate: statutory rate 35%; state taxes (x%); permanent differences (y%); resulting effective rate 18%.' -> EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate = reconciliation lines (map line items and overall reconciled percent).\n6) Logging: record reconciliation cue spans, statutory anchor spans, percent spans, chosen tag, and reason code ('explicit-reconciliation' vs 'statutory-compare-only'). Flag 'statutory-compare-no-recon' examples for QA and potential training adjustments.\n## PROBLEM-SOLVING HEURISTICS\n\n[ph-00006] helpful=1 harmful=0 :: Delta decision flow (apply in order for each numeric token): 1) Sentence-level scan: detect instrument-type cues (convertible/preferred/mandatory) and offering cues (underwriters, overallotment, offering language) across the sentence ±1 surrounding sentence. 2) If instrument-type == convertible: - If numeric token is a price or appears adjacent to unit tokens like 'per share', 'per common share', 'per depositary share': assign DebtInstrumentConvertibleConversionPrice1 unless an explicit secondary-market sale cue is present. - If numeric token is shares and offering cues present: assign StockIssuedDuringPeriodSharesNewIssues. 3) If offering cues present (even if instrument-type absent): - If numeric token is number-of-shares -> assign StockIssuedDuringPeriodSharesNewIssues (primary issuance). - If numeric token is price and context uses 'offering price', 'issued at', 'offering at' -> prefer issuance-price tag (if available) else flag for review. 4) If no instrument-type or offering cues: use existing lexical-to-tag mapping (e.g., 'sold' -> SaleOfStockNumberOfSharesIssuedInTransaction) as fallback. 5) Tie-breaker precedence (high -> low): instrument-specific issuance tags (convertible conversion price, mandatory-convertible issuance) > issuance/share-specific tags (StockIssuedDuringPeriodSharesNewIssues) > generic sale tags (SaleOfStock*). 6) Ambiguity handling: if fallback mapping would assign a generic sale tag but any instrument/offering cue matched (score difference < threshold), flag the example and record sentence+reason for human review and training. 7) Unit-test generation examples to add to test suite: - \"We sold 17,250,000 shares, including the underwriters' exercise of the overallotment option\" -> 17,250,000 = StockIssuedDuringPeriodSharesNewIssues. - \"Sempra Energy 6% Mandatory Convertible Preferred Stock, Series A, was issued at $100.00 per share\" -> $100.00 = DebtInstrumentConvertibleConversionPrice1. - \"We sold 500,000 shares on the open market\" -> 500,000 = SaleOfStockNumberOfSharesIssuedInTransaction.\n[ph-00014] helpful=0 harmful=0 :: Atomic rule: Transaction-direction disambiguation (lexical match + contextual validation). Purpose: prevent mis-mapping of ambiguous consideration phrases (e.g., 'purchase price', 'consideration') by requiring a direction/actor check before final tag assignment.\n\nExact actor-direction lexical cues (case-insensitive regex lists):\n- OUTGOING (entity paid / acquisition): /\\bwe\\s+paid\\b/, /\\bpaid\\b/, /\\bcash\\s+consideration(?:\\s+paid)?\\b/, /\\bcash\\s+paid\\b/, /\\bconsideration\\s+paid\\b/, /\\bwe\\s+issued\\b/, /\\bwe\\s+acquired\\b/, /we\\s+completed\\s+the\\s+acquisition\\b/, /was\\s+paid\\s+by\\b/.\n- INCOMING (entity received / sale/disposal): /\\bwe\\s+received\\b/, /\\breceived\\s+net\\s+cash\\s+proceeds\\b/, /\\bnet\\s+cash\\s+proceeds\\b/, /\\bproceeds\\s+from\\s+(?:the\\s+)?sale\\b/, /\\bsold\\b/, /\\bdisposal\\b/, /\\bwe\\s+sold\\b/, /\\bwe\\s+received\\s+consideration\\b/.\n- AMBIGUITY cues (neutral lexical tokens that require direction check): /\\bpurchase\\s+price\\b/, /\\btotal(ed)?\\s+purchase\\s+price\\b/, /\\bconsideration\\b/, /\\baggregate\\s+purchase\\s+price\\b/.\n\nAssociation & windows:\n- Apply direction cue search to the same sentence first; if not found, search ±1 surrounding sentence (antecedent resolution) and allow combined span <= 40 tokens.\n- Token-distance thresholds: treat a direction cue as 'local' if within ±12 tokens of the numeric amount or within the same clause; treat it as 'document-antecedent' if in adjacent sentence but within 40-token span.\n\nDecision flow (to be inserted directly after any lexical-to-tag match for acquisition/disposal phrases):\n1) Lexical match identifies candidate tags (e.g., 'purchase price' → PaymentsToAcquireBusinessesGross). Do NOT commit tag yet.\n2) Run direction-check: search for OUTGOING and INCOMING cues per association windows.\n3) If OUTGOING cue found and OUTGOING score > INCOMING score → finalize acquisition-related tag (PaymentsToAcquireBusinessesGross or BusinessCombinationConsiderationTransferred1 depending on lexical subtype).\n4) If INCOMING cue found and INCOMING score > OUTGOING score → override lexical acquisition tag and assign disposal-related tag (DisposalGroupIncludingDiscontinuedOperationConsideration or Sale/Proceeds tags as appropriate).\n   - Specific override rule: when phrase 'purchase price' co-occurs with INCOMING cues like 'we received' or 'net cash proceeds', map consideration amounts to DisposalGroupIncludingDiscontinuedOperationConsideration instead of PaymentsToAcquireBusinessesGross.\n5) If both cue types found with equal strength or no direction cues found → do NOT prefer acquisition by lexical default; mark mapping as 'ambiguous-direction' and either (a) defer to secondary semantic classifier with low-confidence flag, or (b) route to human review. Do not auto-commit acquisition tag solely on 'purchase price' in absence of corroborating outgoing cues.\n\nScoring & precedence:\n- Presence in same sentence within ±12 tokens = +10 points; presence in adjacent sentence within 40-token span = +5 points; proximity inverse-weight (1/(1+token_distance)) adds up to +3.\n- INCOMING/OUTGOING score difference threshold to auto-decide = 4 points; below threshold -> ambiguous.\n- Direction check overrides lexical-specific precedence (i.e., even if 'purchase price' ranked highest lexically, an INCOMING direction cue wins).\n\nUnit-tests (atomic examples to add):\n- 'Cash consideration of $637 million was paid at closing.' -> $637M = PaymentsToAcquireBusinessesGross (OUTGOING).\n- 'Total consideration of $2.5 billion was transferred as part of the acquisition.' -> $2.5B = BusinessCombinationConsiderationTransferred1 (OUTGOING consideration lexical + outgoing cue).\n- 'We recognized $1.3 billion of goodwill from the acquisition.' -> $1.3B = Goodwill (not applicable to direction rule but sanity-check).\n- 'The purchase price totaled $1.2 billion, and we received $1.0 billion of net cash proceeds, after consideration of customary adjustments, at closing.' -> $1.2B = DisposalGroupIncludingDiscontinuedOperationConsideration (INCOMING 'we received' + 'net cash proceeds' overrides 'purchase price' lexical acquisition mapping).\n- 'The purchase price was $1.2 billion and the acquirer paid $1.0 billion in cash.' -> $1.2B = PaymentsToAcquireBusinessesGross (OUTGOING cues present).\n\nImplementation notes & logging:\n- Insert this rule as a mandatory contextual-validation step into existing acquisition micro-decision flow (misc-00002) and any lexical-to-tag mapping that involves 'purchase/consideration/price' surface forms.\n- For every override or ambiguous-direction case, log: numeric span, lexical cue span, direction cue spans, chosen tag, scoring breakdown, and whether mapping was overridden or flagged. Aggregate 'ambiguous-direction' cases for retraining if frequency > threshold.\n- If downstream pipeline supports confidence propagation, reduce confidence for mappings decided by lexical match without direction corroboration.\n\nRationale: preserves lexical signal but prevents lexical-collapse by enforcing semantic actor/direction validation; addresses the exact root cause in the reflection where 'purchase price' was misinterpreted because the rule lacked a direction check.\n[ph-00021] helpful=0 harmful=0 :: Atomic heuristic: 'metric-verb + scope' precedence (exact-phrase mirroring tie-breaker)\n- Purpose: when choosing between competing tags, prefer the tag that mirrors both the explicit metric verb/noun (e.g., 'amortization', 'depreciation', 'weighted average interest rate', 'fair value') AND the explicit scope/anchor (e.g., 'intangible assets', 'debt outstanding', 'grant-date', 'lease intangibles'). This prevents generic or collapsed mappings when the sentence explicitly names metric and scope.\n- Decision flow (apply immediately after lexical-match candidates are generated):\n  1) Identify metric-verb/noun cue (examples: amortization, depreciation, weighted average, effective tax rate, grant-date fair value, exercise price). 2) Identify scope-anchor noun phrase (examples: intangible assets, lease intangibles, debt outstanding, continuing operations, grant-date). 3) If a taxonomy tag exists that explicitly maps metric-verb + scope-anchor combination, prefer that tag and mark decision as 'exact-phrase-mirroring'. 4) If no exact tag exists, but the metric-verb clearly restricts meaning (e.g., 'amortization' vs 'depreciation'), prefer the tag matching the metric-verb's domain (e.g., amortization -> intangible amortization) and attach metadata {fallback_reason: 'no-exact-tag'}; enqueue taxonomy enrichment if granularity is repeatedly missing.\n- Windows & confidence: require metric-verb within ±8 tokens of numeric and scope-anchor within same sentence OR previous sentence (antecedent <= 40 tokens). If either cue is absent, do not force mirroring — allow fallback classifier but flag low-confidence.\n- Unit-tests (atomic examples):\n  - 'Amortization expense of lease intangibles was $X' -> prefer AmortizationOfIntangibleAssets (metric-verb=amortization, scope=intangibles).\n  - 'Weighted average interest rate of debt outstanding was Y%' -> prefer DebtWeightedAverageInterestRate (metric-verb=weighted average, scope=debt outstanding).\n- Logging: annotate each mapping with 'exact-phrase-mirroring' and the spans used; add counters for cases where mirroring selected a fallback tag due to missing taxonomy to drive taxonomy additions.\n## CONTEXT CLUES & INDICATORS\n\n[ctx-00001] helpful=1 harmful=0 :: Lexical-to-tag mapping (exact cues + variants). Use exact phrase detection before higher-level semantic heuristics. Patterns to detect (case-insensitive): - 'purchase price', 'total purchase price', 'aggregate purchase price' -> tag PaymentsToAcquireBusinessesGross. Regex examples: /(?:aggregate\\s+|total\\s+)?purchase\\s+price/i. - 'consideration', 'consideration transferred', 'aggregate consideration' -> tag BusinessCombinationConsiderationTransferred1. Regex examples: /(?:aggregate\\s+)?consideration(?:\\s+transferred)?/i. - 'cash paid', 'cash consideration', 'cash consideration paid' -> PaymentsToAcquireBusinessesGross. Regex: /cash(?:\\s+consideration)?\\s+paid/i. - 'shares issued', 'shares were issued', 'issued X shares' -> BusinessAcquisitionEquityInterestsIssuedOrIssuableNumberOfSharesIssued. Regex: /(?:issued|issued\\s+approximately)\\s+\\d+[\\d,]*(?:\\s+shares)?/i. Apply these matches to the phrase window that contains the numeric amount (±8 tokens) to ensure the amount belongs to the detected cue.\n[ctx-00005] helpful=1 harmful=0 :: Instrument-type detection patterns (case-insensitive regexes and token cues): - Convertible indicators: /\\bconvertible\\b/, /\\bconversion price\\b/, /\\bconversion cap\\b/, /\\bconvertible preferred\\b/, /\\bmandatory convertible\\b/, /\\bmandatory convertible preferred\\b/. - Preferred-stock signals: /\\bpreferred stock\\b/, /\\bseries [A-Z]+\\b/, /\\bdividend(?:-bearing)?\\b/. - Debt-like convertible signals: /\\b6% mandatory convertible preferred stock\\b/ (literal patterns for numerated series acceptable). Offering / primary-issuance indicators: - underwriters: /\\bunderwriter(s)?\\b/, /\\bwe sold\\b/, /boffering\\b/, /\\boverallotment\\b/, /\\bexercise[d]?\\s+overallotment\\b/, /\\bprimary offering\\b/, /\\boffered and sold\\b/, /\\bpurchased by the underwriters\\b/. Sale / secondary-market indicators (inverse cues): /\\bwe sold to third parties\\b/, /\\bsecondary offering\\b/, /\\btraded on\\b/, /\\bsold on the market\\b/. Numeric association window policy: - Primary association window = ±8 tokens around numeric token. - If an instrument-type cue appears anywhere in the same sentence, treat instrument-type as global for that numeric token (i.e., instrument cues outrank local lexical matches within window). - If offering cue appears in same sentence or adjacent sentence (±1 sentence), mark transaction as primary issuance. Precedence mapping rules (applied after detection): - If instrument-type == convertible AND numeric_context == price -> map numeric to DebtInstrumentConvertibleConversionPrice1 (convertible conversion/issuance price). - If offering_flag == true AND numeric_context == shares -> map numeric to StockIssuedDuringPeriodSharesNewIssues. - If instrument-type == convertible AND offering_flag == true AND numeric_context == shares -> StockIssuedDuringPeriodSharesNewIssues (shares issued in offering of convertible instrument). - Only if no instrument-type OR offering cues detected, or if explicit secondary-sale cues present, fall back to SaleOfStockNumberOfSharesIssuedInTransaction / SaleOfStockPricePerShare. Distance weighting: - When multiple cues present, compute score = (instrument_cue_present ? 10 : 0) + (offering_cue_present ? 8 : 0) + (1 / (1 + token_distance_to_numeric)). Choose tag with highest score. Logging: - If generic sale tag would be selected but instrument-type OR offering cues exist with nonzero score, log for human review and mark as 'contextual-overlap' example for retraining.\n[ctx-00008] helpful=0 harmful=0 :: Credit-facility vs spread disambiguation (atomic heuristics):\n1) Purpose: ensure currency amounts describing facility capacity map to LineOfCreditFacilityMaximumBorrowingCapacity and percentage 'margin/spread' phrases over LIBOR/ABR map to DebtInstrumentBasisSpreadOnVariableRate1.\n2) Exact lexical cues (case-insensitive):\n   - Facility-capacity cues (map currency -> LineOfCreditFacilityMaximumBorrowingCapacity): /\\b(revolv(?:ing)?\\s+credit\\s+facilit(?:y|ies)|credit\\s+facility|revolver)\\b/, /\\bin\\s+an\\s+aggregate\\s+principal\\s+amount\\b/, /\\b(up\\s+to)\\b/, /\\bmaximum\\s+amount\\b/, /\\bcommitment\\b/.\n   - Outstanding/borrowings cues (do NOT map to capacity): /\\boutstanding\\b/, /\\bborrowed\\b/, /\\bamounts?\\s+outstanding\\b/, /\\bprincipal\\s+amounts?\\s+outstanding\\b/.\n   - Spread/margin cues (map percentage -> DebtInstrumentBasisSpreadOnVariableRate1): /\\bmargin(s)?\\b/, /\\bspread(s)?\\b/, /\\bover\\s+(?:LIBOR|ABR|an?\\s+index)\\b/, /\\bin\\s+the\\s+case\\s+of\\s+(?:LIBOR|ABR)\\s+loan(s)?\\b/.\n   - Absolute/effective-rate cues (do NOT map to spread): /\\binterest\\s+rate\\b/, /\\beffective\\s+rate\\b/, /\\bper annum\\b/, /\\bAPR\\b/.\n3) Token association window policy: apply matches to numeric tokens using a ±8-token window for lexical cues and ±1 sentence for facility-level cues (e.g., named facility in prior sentence). If a facility-capacity cue appears anywhere in the same sentence or the immediately preceding sentence, currency amounts within ±16 tokens of that cue are capacity candidates.\n4) Precedence rules (apply in order):\n   a) If numeric is currency AND a facility-capacity cue matches (within window) -> assign LineOfCreditFacilityMaximumBorrowingCapacity.\n   b) If numeric is currency AND an outstanding/borrowings cue matches -> assign outstanding-balance tag (do not map to capacity).\n   c) If numeric is a percentage AND a spread/margin cue matches (within ±3 tokens) AND the phrase references LIBOR/ABR/index -> assign DebtInstrumentBasisSpreadOnVariableRate1.\n   d) If numeric is a percentage AND absolute/effective-rate cues match (within ±3 tokens) -> assign the appropriate interest-rate tag (do NOT map to basis/spread); if no interest-rate tag exists in taxonomy, flag for human review rather than mapping to spread.\n   e) If a conflict exists (e.g., 'margin' and 'interest rate' both present), prefer the more specific cue: 'margin/spread over LIBOR/ABR' > 'interest rate' only when text explicitly says 'margin' or 'spread'; otherwise prefer 'interest rate' mapping.\n5) Normalization and token checks:\n   - Recognize percentages with % or the word 'percent' or numeric forms like '1.00%–2.00%'.\n   - Recognize currency with $ or currency words (dollars, EUR, etc.).\n6) Logging & QA:\n   - If mapping would assign a spread tag but the sentence contains 'interest rate'/'per annum' within ±3 tokens of the percentage, log as 'potential-rate-vs-spread' for human review and add to targeted unit-tests.\n7) Minimal unit-tests to add (atomic examples):\n   - \"revolving credit facilities in an aggregate principal amount of up to $225.0 million\" -> $225.0 million = LineOfCreditFacilityMaximumBorrowingCapacity.\n   - \"The margin ranges from 1.00% to 2.00% in the case of LIBOR loans\" -> 1.00% and 2.00% = DebtInstrumentBasisSpreadOnVariableRate1.\n   - \"The interest rate is 5.00% per annum\" -> 5.00% = interest-rate tag (do NOT map to DebtInstrumentBasisSpreadOnVariableRate1); if interest-rate tag missing, flag for review.\n   - \"$50 million outstanding under the revolver\" -> $50 million = outstanding-balance tag (do NOT map to capacity).\n8) Implementation notes (for classifiers / regex pipelines):\n   - Apply these patterns before generic lexical-to-tag fallbacks.\n   - When multiple tags are plausible, compute priority score where facility-capacity cue adds +10, outstanding cue +12 (to avoid mis-tagging as capacity), spread/margin +10, interest-rate cue +11; choose highest score and log ties.\n   - Add examples that mix LIBOR/ABR and 'margin' with numeric ranges to training/regression suites to prevent collapse into absolute-rate tags.\n[ctx-00009] helpful=0 harmful=0 :: Credit-facility availability vs capacity — atomic disambiguation rule (apply before generic 'availability' fallback):\n1) Purpose: ensure currency amounts that reference facility size/capacity map to LineOfCreditFacilityMaximumBorrowingCapacity and only map to LineOfCreditFacilityRemainingBorrowingCapacity when the sentence explicitly reports a point-in-time available amount.\n2) Exact lexical patterns (case-insensitive regexes):\n   - Facility-capacity anchor (detect stated cap): /(?:has|has a|has an|in an aggregate principal amount of|in an aggregate amount of|in an aggregate principal amount of up to|up to)\\s+\\$?[\\d,]+(?:\\.\\d+)?\\s*(?:million|billion)?\\s*(?:revolv(?:ing)?\\s+credit\\s+facilit(?:y|ies)|credit\\s+facility|revolver)/i\n   - Explicit remaining-amount cues (map to remaining borrowing capacity): /(?:amount available under the (?:credit )?facility(?: totaled|was|is)|available under the facility totaled|was available under the facility|amount available under the facility is)\\b/i\n   - Comparative/constraint cues (signal comparison to a stated cap): /availability\\s+(?:under|of)\\s+(?:this|the)?\\s*(?:credit )?facilit(?:y|ies)\\s+may\\s+be\\s+less\\s+than\\s+\\$?[\\d,]+(?:\\.\\d+)?/i, /may\\s+be\\s+less\\s+than\\b/i, /as\\s+a\\s+result\\s+of\\b/i, /for\\s+certain\\s+subsidiaries\\b/i, /for\\s+specific\\s+entities\\b/i\n3) Association windows and antecedent resolution:\n   - If a facility-capacity anchor (pattern above) appears anywhere in the same sentence OR in the immediately preceding sentence, consider that dollar amount the canonical facility maximum for subsequent comparative/availability clauses. (Sentence window = ±1 sentence.)\n   - Token association: when anchored, allow currency amounts in comparative clauses up to ±16 tokens from the comparative phrase to be treated as referencing the stated cap.\n4) Precedence decision flow (apply in order):\n   a) If numeric is currency AND explicit remaining-amount cues match (within ±8 tokens) -> assign LineOfCreditFacilityRemainingBorrowingCapacity.\n   b) Else if numeric is currency AND comparative/constraint cue matches (e.g., \"availability may be less than $X\") AND X equals the earlier-detected facility-capacity anchor amount (or the sentence contains a nearby explicit facility-capacity anchor) -> assign LineOfCreditFacilityMaximumBorrowingCapacity (the phrase is comparing to the contractual cap or describing effective cap reductions).\n   c) Else if numeric is currency AND comparative/constraint cue matches BUT no prior anchor exists: if clause contains constraint markers ('as a result of', 'for certain subsidiaries', 'for specific entities', 'may be less than') prefer MaximumBorrowingCapacity (treat as described cap limit) but mark as 'ambiguous-availability-without-anchor' and log for review.\n   d) Else if numeric is currency AND no comparative/anchor cues but lexical 'availability' appears alone (no 'amount available', no 'totaled') -> treat as ambiguous: do NOT auto-assign RemainingBorrowingCapacity; instead prefer MaximumBorrowingCapacity only if a facility-capacity anchor exists in same or previous sentence; otherwise flag for human review.\n5) Tie-breaker and override: facility-capacity anchor presence overrides the naive 'availability -> remaining' rule. Explicit remaining-amount lexical patterns override capacity mapping and must map to RemainingBorrowingCapacity regardless of anchors.\n6) Examples / unit-tests (add to targeted suite):\n   - \"The Company has a $75 million revolving credit facility (credit facility)\" -> $75 million = LineOfCreditFacilityMaximumBorrowingCapacity.\n   - \"availability under this credit facility may be less than $75 million as a result of outstanding letters of credit...\" -> $75 million = LineOfCreditFacilityMaximumBorrowingCapacity (because X matches stated cap and clause is comparative/constraint).\n   - \"an outstanding letter of credit under the credit facility totaled $12.5 million and the amount available under the facility totaled $62.5 million\" -> $12.5M = LettersOfCreditOutstandingAmount; $62.5M = LineOfCreditFacilityRemainingBorrowingCapacity (explicit remaining-amount cue).\n   - \"availability under the facility may be less than $40 million\" (no prior stated cap mentioned) -> flag 'ambiguous-availability-without-anchor' and queue for human review (do not auto-assign RemainingBorrowingCapacity).\n7) Logging & QA: any case where 'availability' appears but the rule chooses MaximumBorrowingCapacity only because of an antecedent anchor must be logged as 'availability-referenced-cap' with the anchor span and numeric comparison; ambiguous/no-anchor cases must be logged as 'ambiguous-availability' and added to training data.\n8) Implementation notes: incorporate these checks before any generic lexical mapping that equates 'availability' -> remaining capacity; add unit-tests above and regressions that ensure 'amount available' still maps to RemainingBorrowingCapacity.\n[ctx-00011] helpful=1 harmful=0 :: Interest-rate 'per annum' -> DebtInstrumentInterestRateStatedPercentage (atomic heuristic): - Purpose: map percentages expressed as annual/stated interest rates on named debt instruments to DebtInstrumentInterestRateStatedPercentage. - Exact lexical cues (case-insensitive regexes): /(per\\s+annum|per\\s+year|annually|annual\\s+rate|%\\s+per\\s+annum|APR)\\b/ and instrument anchors: /\\b(note|notes|loan|loans|seller\\s+note|senior\\s+notes|term\\s+loan|revolver|debt\\b)/i. - Association window: require both a percentage token and at least one instrument-anchor token in the same sentence OR instrument-anchor within the previous sentence (±1 sentence). If instrument name present in same sentence, require token-distance <= 12 tokens; if in prior sentence, allow <= 40 token span across sentence boundary. - Precedence: If 'per annum' (or equivalent) is detected within ±3 tokens of the percentage, prefer DebtInstrumentInterestRateStatedPercentage over spread/basis tags. - Conflict rule: If both 'margin'/'spread' cues and 'per annum' cues are present, prefer 'per annum' -> stated-rate mapping, but log as 'rate-vs-spread-conflict' for QA. - Unit-tests/examples: - \"8% per annum on the Seller Notes\" -> 8% = DebtInstrumentInterestRateStatedPercentage (anchor 'Seller Notes'). - \"The interest rate is 5.00% per year on the term loan\" -> 5.00% = DebtInstrumentInterestRateStatedPercentage. - Implementation note: apply before generic percentage-to-spread fallbacks.\n[ctx-00012] helpful=0 harmful=0 :: Monetary 'interest charges' mapping to instrument-specific InterestExpenseDebt (atomic heuristic): - Purpose: ensure currency amounts described as interest charges/interest expense tied to a particular note/loan map to InterestExpenseDebt (and are linked to the instrument identity) rather than a generic InterestExpense tag. - Exact lexical cues (case-insensitive regexes): /interest\\s+charge(s)?\\b/, /interest\\s+expense(s)?\\b/, /interest\\s+cost(s)?\\b/, /(interest\\s+charges)\\s+associated\\s+with/, /interest\\s+relating\\s+to/, /interest\\s+on\\s+the\\s+(?:note|notes|loan|loan\\s+agreement)/i. - Association policy: require a currency token (e.g., $179,507) in same sentence and an instrument anchor (note/loan name like 'Seller Notes') in same sentence OR previous sentence. Primary token-distance window = ±12 tokens around numeric; allow ±1 sentence antecedent resolution with span <= 40 tokens. - Precedence: instrument-specific InterestExpenseDebt overrides generic InterestExpense when instrument anchor present. If instrument anchor not present, map to generic InterestExpense and flag 'interest-amount-no-instrument' for review. - Unit-tests/examples: - \"$179,507 of interest charges associated with the Seller Notes for the year\" -> $179,507 = InterestExpenseDebt (linked to Seller Notes). - \"$331,397 of interest expense for the six months ended June 30 related to the Term Loan\" -> $331,397 = InterestExpenseDebt. - Logging: record sentence span and instrument anchor for any instrument-linked interest mapping for traceability.\n[ctx-00013] helpful=0 harmful=0 :: Customer-concentration percentage mapping -> ConcentrationRiskPercentage1 (atomic heuristic): - Purpose: map percentages that quantify customer concentration of revenues to ConcentrationRiskPercentage1. - Exact lexical cues/patterns (case-insensitive regexes): /(?:two|three|top|largest|the\\s+two\\s+largest|the\\s+largest)\\s+customers\\b/, /customer\\s+concentration\\b/, /accounts?\\s+for\\s+about|accounted\\s+for\\s+approximately|accounted\\s+for\\s+|represent(s|ed)\\s+approximately\\s+\\d+\\%/i. Percentage capture window: detect percentage token within ±10 tokens of customer/revenue cue and/or the phrase 'of (our|the)? revenues' or 'of revenue'. - Precedence: when percentage is explicitly tied to 'customers' + 'revenues', map to ConcentrationRiskPercentage1 even if other percentage-tag candidates exist. - Unit-tests/examples: - \"Our two largest customers accounted for approximately 44% of our revenues\" -> 44% = ConcentrationRiskPercentage1. - \"The largest customer represented 22% of revenue\" -> 22% = ConcentrationRiskPercentage1. - Ambiguity handling: if percent lacks 'customer' anchor but 'of revenues' alone appears, mark as potential concentration and log for human review.\n[ctx-00001] helpful=1 harmful=0 :: Equity / Plan lexical-to-tag atomic rules (exact cues + variants). Purpose: deterministically map par-value, shares-outstanding, plan-availability and plan-authorized numeric tokens to the most specific US GAAP tag. Rules (apply in order):\n1) Par/Stated value per share -> CommonStockParOrStatedValuePerShare\n   - Exact lexical cues (case-insensitive regex examples): /\\$?\\s*[0-9]{1,3}(?:[\\,\\d]*)(?:\\.\\d+)?\\s*(?:per|par)\\s+share(s)?\\b/, /par\\s+value\\s+of\\s+\\$?\\s*[0-9.,]+\\b/, /stated\\s+value\\s+per\\s+share\\b/.\n   - Association window: numeric token and 'per share'/'par value' cue must co-occur in the same sentence and lie within ±8 tokens.\n   - Precedence: if matched, assign CommonStockParOrStatedValuePerShare regardless of other nearby 'price' or 'per share' generic sale cues.\n   - Unit-tests: '$0.001 par value per share' -> CommonStockParOrStatedValuePerShare = 0.001; 'stated value per common share of $0.01' -> CommonStockParOrStatedValuePerShare = 0.01.\n\n2) 'Shares outstanding' -> CommonStockSharesOutstanding\n   - Exact lexical cues: /shares\\s+outstanding\\b/, /outstanding\\s+shares\\b/, /shares\\s+were\\s+outstanding\\b/.\n   - Association window: numeric token within ±8 tokens of the cue; sentence-level anchor required.\n   - Precedence: this tag wins over generic 'shares issued' or offering tags when 'outstanding' is present and no offering/underwriter cues are present in ±1 sentence.\n   - Unit-tests: '28,026,713 shares outstanding' -> CommonStockSharesOutstanding = 28,026,713.\n\n3) Plan context: map plan-specific share counts to plan tags\n   - Plan-anchor detection (case-insensitive): /(?:long[- ]term incentive plan|2014\\s+Long\\s+Term\\s+Incentive\\s+Plan|LTIP|stock\\s+plan|equity\\s+compensation\\s+plan)\\b/ (allow named-year or 'the Plan' with antecedent resolution from prior sentence).\n   - If plan-anchor present in same sentence OR immediately preceding sentence (±1 sentence) then apply plan-specific mappings:\n     a) 'available'/'remain available' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant\n        - Cues: /available\\s+.*?shares|remain\\s+available|shares\\s+available\\s+for\\s+grant\\b/; numeric token within ±8 tokens maps to that tag.\n     b) 'maximum number' / 'may be delivered' / 'authorized' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAuthorized\n        - Cues: /maximum\\s+number\\s+of\\s+shares|may\\s+be\\s+delivered\\s+.*?is\\s+\\$?\\s*[\\d,]+|authorized\\s+to\\s+issue\\s+up\\s+to\\s+\\$?\\s*[\\d,]+\\b/, numeric token maps to Authorized tag.\n   - Token association: allow antecedent plan-name in previous sentence when 'the Plan' or year-named plan is used; antecedent span <= 40 tokens across sentence boundary.\n   - Precedence: plan-specific tags override generic share tags (e.g., StockIssuedDuringPeriodSharesNewIssues, SaleOfStockNumberOfSharesIssuedInTransaction) whenever the plan-anchor is detected.\n   - Unit-tests: 'no shares remain available under the 2014 Long Term Incentive Plan' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant = 0; 'maximum number of shares that may be delivered under the plan is 15,000,000' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAuthorized = 15,000,000.\n\n4) Association & ambiguity handling\n   - If both a plan-anchor and offering/underwriter cues are present, prefer plan-specific mappings for availability/authorized fields and issuance-specific mappings for issuance events; log any example where plan-anchor and issuance-anchor both score >0 as 'plan-vs-issuance-overlap' for human review.\n   - If no plan-anchor is found but text uses 'available under the plan' with an antecedent plan name earlier in document >1 sentence away, require human-review flag (do not auto-assign) unless antecedent resolution confidence >= threshold.\n\n5) Implementation notes\n   - Apply these rules before generic 'per share' or 'shares' fallbacks; add unit-tests above and log 'plan-availability-zero' cases for QA traceability.\n[ctx-00003] helpful=0 harmful=0 :: Atomic rule: Map 'LIBOR plus X%' (and close variants) -> DebtInstrumentBasisSpreadOnVariableRate1. - Purpose: avoid misinterpreting 'LIBOR plus X%' as an absolute stated interest rate. - Exact lexical patterns (case-insensitive regexes): /(LIBOR|ABR|an? index)\\s*(?:\\+|plus|\\+/-|\\band\\s+an?\\s+adjusted\\s+rate|with\\s+a\\s+margin\\s+of)\\s*([0-9]+(?:\\.[0-9]+)?\\s*%)/i and /(?:margin|spread)\\s*(?:of)?\\s*([0-9]+(?:\\.[0-9]+)?\\s*%)\\s*(?:over|above|to|on)\\s*(LIBOR|ABR|index)/i. - Token association: require percentage token within ±3 tokens of LIBOR/ABR or 'plus'/'over' lexical cue; allow antecedent instrument references in same sentence or previous sentence ±1 if needed for linking. - Precedence/tie-breaker: If both 'per annum'/'per year'/'annual' occurs within ±3 tokens of the percentage, prefer DebtInstrumentInterestRateStatedPercentage only if there is explicit 'per annum' + instrument-anchor; otherwise prefer DebtInstrumentBasisSpreadOnVariableRate1 for 'LIBOR plus X%' forms. - Unit-tests (atomic examples): - 'LIBOR plus 4.15%' -> 4.15% = DebtInstrumentBasisSpreadOnVariableRate1. - 'the margin ranges from 1.00% to 2.00% in the case of LIBOR loans' -> both percents = DebtInstrumentBasisSpreadOnVariableRate1. - 'interest rate of 4.15% per annum' -> 4.15% = DebtInstrumentInterestRateStatedPercentage (not a spread). - Logging: any mapping where both 'margin/spread' and 'per annum' cues are within ±3 tokens should be logged as 'rate-vs-spread-conflict' with spans for QA and unit-test augmentation. - Implementation note: apply this rule before generic percentage-to-interest fallbacks and add targeted regression tests for 'plus/over' surface forms.\n[ctx-00005] helpful=1 harmful=0 :: Atomic lexical rule: map 'borrowing base' -> LineOfCreditFacilityRemainingBorrowingCapacity (alias: LineOfCreditFacilityCurrentBorrowingCapacity).\n- Exact lexical cues (case-insensitive regexes): /\\bborrowing\\s+base\\b/, /\\bamount(?:s)?\\s+available\\s+to\\s+borrow\\b/, /\\bavailable\\s+borrowing\\s+capacity\\b/, /\\bamount\\s+available\\s+under\\s+the\\s+(?:credit\\s+)?facility\\b/.\n- Association window: numeric token must lie within ±8 tokens of the cue in the same sentence; allow antecedent plan/facility name resolution in previous sentence (±1 sentence) if anchor span <= 40 tokens.\n- Precedence rules (apply in order):\n  1) If a cue above matches -> assign LineOfCreditFacilityRemainingBorrowingCapacity for the nearest numeric currency token (override generic 'capacity' or 'availability' fallbacks).\n  2) If the same sentence explicitly contains 'maximum', 'commitment', 'up to', 'in an aggregate principal amount of', or similar contractual-cap cues within ±8 tokens of a different currency token -> assign those tokens to LineOfCreditFacilityMaximumBorrowingCapacity (do NOT remap borrows labeled explicitly as 'maximum').\n  3) If a single sentence contains both a 'borrowing base' cue and a 'maximum/commitment' cue with two different currency tokens, map each numeric to the cue it is adjacent to (token-distance); if one numeric token is within distance of both cues, prefer the 'borrowing base' -> RemainingBorrowingCapacity mapping for that numeric and log as 'borrowbase-vs-commitment-conflict'.\n  4) If only the word 'capacity' or 'availability' appears without an explicit 'borrowing base' or 'amount available' phrasing, defer to existing availability-vs-capacity rules (ctx-00009 / err-00010) and require anchor-checks; do NOT treat 'capacity' alone as proof of remaining-amount.\n- Ambiguity handling: if 'borrowing base' appears but no numeric token in ±8 tokens, flag 'borrowing-base-no-amount' for review (do not guess). If numeric present but sentence contains conflicting language (e.g., 'borrowing base' and 'maximum' both adjacent to the same numeric), map to RemainingBorrowingCapacity and log conflict for QA.\n- Unit-tests (atomic examples to add):\n  - \"The borrowing base under the credit facility is $425.0 million.\" -> $425.0M = LineOfCreditFacilityRemainingBorrowingCapacity.\n  - \"An amount available under the facility totaled $62.5 million\" -> $62.5M = LineOfCreditFacilityRemainingBorrowingCapacity.\n  - \"Revolving credit facility in an aggregate principal amount of up to $225.0 million; the borrowing base available is $150.0 million\" -> $225.0M = LineOfCreditFacilityMaximumBorrowingCapacity; $150.0M = LineOfCreditFacilityRemainingBorrowingCapacity.\n  - \"Availability under this credit facility may be less than $75 million as a result of outstanding letters of credit\" (and $75M equals prior stated cap) -> follow comparative-rule in ctx-00009 (map to MaximumBorrowingCapacity), but if 'borrowing base' is used instead of 'availability' and tied to $75M map to RemainingBorrowingCapacity.\n- Logging & QA: record mapping span with label 'borrowing-base-mapped' including cue span, numeric span, and antecedent facility anchor. Add 'borrowbase-vs-commitment-conflict' and 'borrowing-base-no-amount' to review queues for retraining.\n[ctx-00001] helpful=1 harmful=0 :: Atomic rule: map 'designated' / 'authorized' -> SharesAuthorized by security class and resolve multiple share counts by class-anchor + verb.\n- Exact lexical cues (case-insensitive regexes): /\\bdesignated\\b/, /\\bauthorized\\b/, /authorized\\s+to\\s+issue\\b/, /designated\\s+as\\s+series\\b/, /series\\s+[A-Z0-9]+/i, /\\bpreferred\\s+stock\\b/, /\\bcommon\\s+stock\\b/, /\\bpreferred\\b/, /\\bcommon\\b/.\n- Association window: for a numeric token, require a controlling verb cue ('designated' or 'authorized') within ±8 tokens OR a class-anchor ('Series X', 'preferred', 'common') within ±8 tokens. If both verb and class-anchor exist, require numeric to be within ±10 tokens of at least one and prefer the pair whose combined token-distance to numeric is smallest (distance_sum = dist(verb, numeric)+dist(class_anchor, numeric)).\n- Tag mapping rules (apply in order):\n  1) If verb cue ∈ {designated, authorized} AND class-anchor contains 'preferred' or 'Series <id>' -> assign PreferredStockSharesAuthorized (for the named series if taxonomy allows series-specific tag; otherwise generic PreferredStockSharesAuthorized). Include series id in link metadata if present.\n  2) If verb cue ∈ {designated, authorized} AND class-anchor contains 'common' or phrase 'authorized to issue X shares' referencing common stock -> assign CommonStockSharesAuthorized.\n  3) If verb cue ∈ {designated, authorized} but no explicit class-anchor in same sentence, attempt antecedent resolution to previous sentence up to ±1 sentence (allow up to 40 tokens across boundary). If antecedent resolves to a plan/class, map accordingly; otherwise assign SharesAuthorized_Generic and flag for review.\n- Disambiguation when multiple numeric tokens present in same sentence:\n  - Detect all class-anchor spans and controlling-verb spans. For each numeric, compute nearest (verb+class) pair by token-distance; assign numeric to that class's SharesAuthorized tag. If two pairs tie, break tie by class specificity: Preferred (series-specified) > Preferred (unspecified) > Common > Generic SharesAuthorized.\n- Conflict vs issued/outstanding:\n  - If the same numeric token has 'issued'/'issued and outstanding'/'outstanding' within ±6 tokens, do NOT map to SharesAuthorized; instead map to issued/outstanding tags per existing rules. 'issued'/'outstanding' cues override 'authorized'/'designated' when they are nearer to the numeric (distance threshold 6 tokens).\n- Negation and zero handling: if 'no'/'none'/'zero' appears within ±6 tokens of 'designated'/'authorized' + class-anchor, assign numeric=0 to SharesAuthorized tag for that class and log negation span.\n- Precedence: apply this rule before generic 'shares' or 'per share' fallbacks and before plan-specific availability rules unless a plan-anchor is detected (see ctx-00001); when a plan-anchor and 'designated/authorized' both present, prefer plan-specific authorized tag only when the class-anchor refers to plan shares.\n- Minimal unit-tests (atomic examples):\n  - 'The Board designated 1,000,000 shares as Series A Preferred Stock.' -> 1,000,000 = PreferredStockSharesAuthorized (Series A).\n  - 'The Company has designated 10,000 shares of preferred stock and authorized to issue 300,000,000 shares of common stock.' -> 10,000 = PreferredStockSharesAuthorized; 300,000,000 = CommonStockSharesAuthorized.\n  - 'No shares were designated for the 2018 Series; none remain designated.' -> 0 = PreferredStockSharesAuthorized (series-specific), log negation span.\n  - '5,000 shares were issued and 10,000 were authorized.' -> 5,000 -> SharesIssued tag (issued override); 10,000 -> SharesAuthorized tag.\n- Logging & QA: record verb span, class-anchor span, numeric span, distance scores, and any antecedent resolution used for each mapping; flag cases where antecedent resolution was required or tie-breakers applied for manual review.\n[ctx-00003] helpful=0 harmful=0 :: [ctx-000XX] Atomic rule: map 'exercise price' contingent on conversion -> DebtInstrumentConvertibleConversionPrice1\n- Purpose: prevent mis-mapping of 'exercise price' phrases to warrant/right tags when the exercisability or exercise-price clause is explicitly tied to conversion of a specific convertible debt instrument.\n- Exact lexical cues (case-insensitive regex examples):\n  - Conversion-link cues: /\\b(?:when and if|when\\s+if|when\\s+converted|upon\\s+conversion|upon\\s+conversion\\s+of|if\\s+the\\s+[0-9]{4}\\s+Notes\\s+are\\s+converted|contingent\\s+on\\s+conversion|tied\\s+to\\s+the\\s+Notes|exercisable\\s+when\\s+and\\s+if)\\b/i\n  - Exercise-price cue: /\\bexercise\\s+price\\b|\\bexercisable\\b|\\bexercise\\s+at\\b/i\n  - Convertible-instrument anchors: /\\bconvertible\\b|\\bNotes\\b|\\bthe\\s+[0-9]{4}\\s+Notes\\b|\\bconvertible\\s+notes\\b|\\bconvertible\\s+bond(s)?\\b/ i\n  - Warrant/right cues (to detect true warrant contexts): /\\bwarrant(?:s)?\\b|\\bright(?:s)?\\b|\\bclass\\s+of\\s+warrant(?:s)?\\b|\\bseries\\s+of\\s+warrants\\b/i\n- Association & antecedent resolution:\n  1) Primary case (same sentence): If an 'exercise price' numeric token appears in the same sentence as BOTH an exercise-price cue and a conversion-link cue OR a convertible-instrument anchor co-occurring with an exercise-price cue within the sentence, map numeric -> DebtInstrumentConvertibleConversionPrice1.\n  2) Cross-sentence antecedent: If an exercise-price numeric appears in a sentence containing an exercise-price cue and the immediately preceding sentence (±1 sentence) contains a convertible-instrument anchor with a conversion-linking phrase (e.g., 'when converted', 'upon conversion of the Notes'), allow antecedent resolution (span <= 40 tokens across sentence boundary) and map to DebtInstrumentConvertibleConversionPrice1.\n  3) Token-distance windows: require exercise-price numeric token to be within ±12 tokens of the exercise-price lexical cue; require conversion-link / convertible anchor to be within the same sentence OR previous sentence and within a combined span <= 40 tokens for cross-sentence resolution.\n- Precedence / tie-breaker rules:\n  1) If conversion-link present per above -> assign DebtInstrumentConvertibleConversionPrice1 (highest precedence).\n  2) Else if explicit warrant/right lexical cue is present near the numeric (within ±8 tokens) AND no conversion-link is detected -> assign ClassOfWarrantOrRightExercisePriceOfWarrantsOrRights1.\n  3) If both warrant cue and conversion-link are present, conversion-link wins (map to DebtInstrumentConvertibleConversionPrice1) but log as 'warrant-vs-conversion-conflict' for QA.\n  4) If exercise-price phrase occurs but instrument anchor absent and no warrant/right cue present, flag as ambiguous for human review instead of defaulting to warrant mapping.\n- Consistency propagation rule (atomic): If the same numeric value has been confidently mapped elsewhere in the document to DebtInstrumentConvertibleConversionPrice1 (confidence threshold met), propagate that mapping to other instances of the identical numeric token and exact-unit phrase (e.g., '$248.48 per share') unless a later sentence contains an explicit warrant/right class indicator that meets the warrant cue threshold. Record propagated mappings in decision metadata.\n- Logging & QA: record spans for exercise-price cue, conversion-link cue, instrument-anchor, numeric token, chosen tag, and which rule (same-sentence vs antecedent) applied. Log all 'warrant-vs-conversion-conflict' and 'propagation-overruled' cases for manual review.\n- Unit-tests (atomic examples):\n  1) 'The convertible bond hedges have an exercise price of $248.48 per share and are exercisable when and if the 2023 Notes are converted.' -> $248.48 = DebtInstrumentConvertibleConversionPrice1.\n  2) 'The warrants have an exercise price of $5.00 per share and are exercisable at any time prior to expiration.' -> $5.00 = ClassOfWarrantOrRightExercisePriceOfWarrantsOrRights1.\n  3) 'The exercise price is $1.25 per share. Upon conversion of the 2022 Convertible Notes, holders may exchange into common shares.' (exercise-price sentence separated; prior sentence anchors conversion) -> $1.25 = DebtInstrumentConvertibleConversionPrice1.\n  4) 'We issued warrants with an exercise price of $10.00 per share tied to the conversion of the Notes.' (both cues present) -> $10.00 = DebtInstrumentConvertibleConversionPrice1 (conversion-link precedence); log conflict.\n- Implementation note: insert this rule before any lexical fallback that maps 'exercise price' to a warrant/right tag. Add the unit-tests above to the regression suite and ensure decision metadata is stored for traceability.\n[ctx-00004] helpful=0 harmful=0 :: Atomic rule: Percent directly qualifying a named debt instrument -> DebtInstrumentInterestRateStatedPercentage\n- Purpose: map percentage tokens that directly modify/narrow a named debt instrument to DebtInstrumentInterestRateStatedPercentage even if 'per annum' is absent. \n- Exact lexical anchors (case-insensitive): /\\b(note|notes|loan|loans|seller\\s+note|senior\\s+notes|term\\s+loan|revolver|debt|senior\\s+note)\\b/, coupon/interest qualifiers: /coupon|coupon\\s+rate|interest\\s+rate|rate\\b|yield\\b/.\n- Percentage detection: token containing '%' or word 'percent' or forms like '2.25%' or '2.250%'.\n- Association windows: same-sentence adjacency: percentage within ±6 tokens of an instrument-anchor OR within ≤3 tokens when percent immediately follows/precedes instrument name (e.g., 'Senior Notes, 2.250%'). Allow antecedent instrument-anchor in previous sentence when instrument name resolves to 'the Notes'/'such notes' etc. (±1 sentence and combined span <=40 tokens).\n- Precedence & conflicts: prefer DebtInstrumentInterestRateStatedPercentage over spread/basis tags unless a clear spread-matching pattern (e.g., 'LIBOR plus', 'margin over LIBOR', 'spread over') exists within ±3 tokens of the percentage—then map to DebtInstrumentBasisSpreadOnVariableRate1. If both 'margin/spread' and instrument-anchor + direct adjacency exist, prefer spread only when explicit spread/margin lexemes are present; otherwise prefer stated-rate. Log 'rate-vs-spread-conflict' when both cues are nearby.\n- Linking: when instrument-anchor present, link assigned rate to instrument identifier (store anchor span + numeric span).\n- Unit-tests (atomic examples):\n  - 'Senior Notes bearing interest at 2.250%' -> 2.250% = DebtInstrumentInterestRateStatedPercentage (Senior Notes).\n  - 'The 3.250% Senior Notes, aggregate principal amount €500 million' -> 3.250% = DebtInstrumentInterestRateStatedPercentage; €500 million = DebtInstrumentFaceAmount.\n  - 'margin ranges from 1.00% to 2.00% in the case of LIBOR loans' -> map to DebtInstrumentBasisSpreadOnVariableRate1 (spread precedence).\n- Logging: record percent token span, instrument-anchor span, chosen tag, and which precedence rule applied.\n[ctx-00005] helpful=0 harmful=0 :: Atomic rule: 'aggregate principal amount' / 'principal amount' lexical-first -> DebtInstrumentFaceAmount\n- Purpose: deterministically map currency amounts described as the instrument's aggregate/face principal to DebtInstrumentFaceAmount (aggregate principal/face amount of a debt issuance).\n- Exact lexical cues (case-insensitive regexes): /\\baggregate\\s+principal\\s+amount\\b/, /\\bin\\s+an\\s+aggregate\\s+principal\\s+amount\\s+of\\b/, /\\baggregate\\s+principal\\b/, /\\bprincipal\\s+amount\\b/ when used with instrument-anchor in same clause/sentence.\n- Association window: currency numeric token (symbol or currency word) within ±8 tokens of the cue in same sentence. If instrument-anchor appears in same sentence or immediately preceding sentence (±1 sentence and combined span <=40 tokens), link numeric -> specific debt instrument face amount. If no explicit instrument anchor but the phrase 'aggregate principal amount' is present, still map to DebtInstrumentFaceAmount (general) and flag 'face-amount-no-anchor' for review.\n- Precedence & conflicts: this mapping overrides generic facility-capacity/availability or maximum-borrowing heuristics when cue explicitly includes 'aggregate principal amount' and an instrument anchor exists. Do NOT map 'aggregate principal' that is clearly part of facility-capacity language (e.g., 'revolving credit facility in an aggregate principal amount of up to $X') to DebtInstrumentFaceAmount; in that case prefer LineOfCreditFacilityMaximumBorrowingCapacity (apply facility heuristics). Use token-level detection of 'revolving/credit/facility/revolver' to pick facility-capacity instead.\n- Normalization: accept currencies with symbols ($, €, GBP) and words (dollars, euros); support 'in the aggregate principal amount of €500 million' variants.\n- Unit-tests (atomic examples):\n  - '€500 million aggregate principal amount of Senior Notes' -> €500M = DebtInstrumentFaceAmount (linked to Senior Notes).\n  - 'aggregate principal amount of $500 million' (no instrument name in sentence) -> $500M = DebtInstrumentFaceAmount (general), log 'face-amount-no-anchor'.\n  - 'revolving credit facility in an aggregate principal amount of up to $225.0 million' -> map to LineOfCreditFacilityMaximumBorrowingCapacity (facility-capacity override).\n- Logging: record cue span, numeric span, instrument-anchor span (if any), chosen tag, and whether a facility-capacity override applied.\n[ctx-00006] helpful=0 harmful=0 :: Atomic rule: Map bare benchmark/index level percentages (e.g., 'LIBOR', 'one‑month LIBOR', 'EURIBOR', 'SOFR') -> DebtInstrumentBasisSpreadOnVariableRate1.\n- Purpose: capture numeric index levels referenced in prose (not spreads) as variable-benchmark values per ground-truth mapping.\n- Exact index lexical patterns (case-insensitive regex examples): /\\b(?:LIBOR|one[- ]month\\s+LIBOR|three[- ]month\\s+LIBOR|EURIBOR|SOFR|prime\\s+rate|ABR|an?\\s+index)\\b/i. Accept short forms (\"LIBOR\") and adjectival qualifiers (\"one month\", \"three month\").\n- Index-level qualifiers (strong signals): /\\bwas approximately\\b|\\bwas\\s+approximately\\b|\\bwas\\s+about\\b|\\bas\\s+of\\s+[A-Za-z0-9,]+\\b|\\bon\\s+[A-Za-z0-9,]+\\b|\\bat\\s+\\b|\\bstood\\s+at\\b|\\bregistered\\s+at\\b/i. Presence of these within ±6 tokens of numeric greatly increases confidence this is an index level.\n- Numeric detection: percentages with '%' or 'percent' or numeric forms like '2.51%'. Require percentage token present.\n- Token association window: map a percentage to basis-spread when an index lexical match occurs within ±6 tokens of the percent OR the sentence explicitly names the index (anywhere in same sentence) and a proximity qualifier like 'was approximately'/'as of' is present within ±12 tokens of the percent.\n- Precedence rules (apply in order):\n  1) If percentage token co-occurs with an index name per patterns above -> assign DebtInstrumentBasisSpreadOnVariableRate1.\n  2) Exception: if the same percentage has explicit instrument-anchor (note/loan/term loan/senior notes) in the same sentence AND an explicit stated-rate cue ('per annum', 'per year', 'coupon', 'interest rate', 'yield') appears within ±3 tokens of the percentage -> assign DebtInstrumentInterestRateStatedPercentage instead. Log as 'index-vs-stated-exception'.\n  3) If both index and 'plus/margin/spread' cues present (e.g., 'LIBOR plus 1.70%') -> existing 'LIBOR plus X%' rule (DebtInstrumentBasisSpreadOnVariableRate1) applies; ensure priority is consistent.\n- Conflict handling & logging: when index-name and instrument-anchor + per-annum cues are both present but not within the tight exception windows above, prefer basis-spread mapping (index wins) and log the example as 'index-precedence-chosen' with spans for percent, index-name, and instrument-anchor for QA.\n- Edge cases: do NOT map non-benchmark uses of index words (e.g., 'the LIBOR-based covenant was amended' with no percent nearby) to any numeric tag; require numeric percent proximity. If percent appears but no index or instrument cues present, mark ambiguous and queue for review.\n- Minimal unit-tests to add (atomic examples):\n  - 'One month LIBOR as of June 30, 2019 was approximately 2.51%' -> 2.51% = DebtInstrumentBasisSpreadOnVariableRate1.\n  - 'LIBOR was 2.51% on December 31' -> 2.51% = DebtInstrumentBasisSpreadOnVariableRate1.\n  - 'the margin ranges from 1.00% to 2.00% in the case of LIBOR loans' -> both percents = DebtInstrumentBasisSpreadOnVariableRate1 (existing behavior).\n  - 'The interest rate is 5.00% per annum on the term loan' -> 5.00% = DebtInstrumentInterestRateStatedPercentage (exception: instrument-anchor + per‑annum wins).\n  - 'One month LIBOR was 2.51% and the notes bear interest at 5.00% per annum' -> 2.51% = DebtInstrumentBasisSpreadOnVariableRate1; 5.00% = DebtInstrumentInterestRateStatedPercentage.\n- Implementation notes: insert this rule before generic percentage-to-interest fallbacks and alongside ctx-00003 and ctx-00008; record decision metadata (index span, percent span, which precedence branch used) for each mapping to enable targeted QA and retraining.\n[ctx-00008] helpful=0 harmful=0 :: Atomic rule: Map 'borrowings/borrowed/amounts outstanding/amount outstanding under the [facility]' -> debt-balance tag (prefer LongTermDebt by default) (apply BEFORE facility-capacity/availability mapping). - Purpose: avoid lexical-collapse where presence of the word 'facility' causes selection of facility-capacity tags (LineOfCredit*) rather than the debt balance tag the numeric actually represents. - Exact lexical cues (case-insensitive regexes): /\\bborrowings\\b/, /\\bborrowed\\b/, /\\bamounts?\\s+outstanding\\b/, /\\boutstanding\\b.*?under\\s+the\\s+/, /\\bbalance\\s+of\\s+borrowings\\b/, /\\bprincipal\\s+outstanding\\b/, /\\bamount\\s+outstanding\\s+under\\b/. - Association window: require a currency numeric token within ±8 tokens of one of the borrowings/outstanding cues in the same sentence; allow antecedent facility anchor (e.g., 'ABL Facility', 'revolver', 'credit facility') in same sentence or previous sentence (±1 sentence, span <= 40 tokens) to link the debt to a specific facility/instrument. - Precedence & decision flow (apply in order): 1) If numeric is currency AND a borrowings/outstanding/borrowed cue matches within ±8 tokens -> classify as a debt-balance tag (debt-carrying/face/balance). 2) If instrument-specific debt tag exists and an instrument-anchor (e.g., 'Term Loan', 'Senior Notes', named facility with instrument id) is present in sentence/antecedent, prefer the instrument-specific balance tag (DebtInstrumentCarryingAmount / DebtInstrumentFaceAmount) and link mapping to that instrument. 3) Else if no instrument-specific tag exists or anchor absent, default to LongTermDebt (prefer LongTermDebt when no explicit short-term/current qualifier present). 4) Only map to LineOfCreditFacilityMaximumBorrowingCapacity / RemainingBorrowingCapacity / LineOfCredit* when explicit capacity/commitment/availability lexical cues appear (e.g., 'up to', 'maximum', 'availability', 'amount available', 'commitment', 'borrowing base') within the capacity windows defined in existing facility rules. - Short-term vs long-term resolution: if the same sentence contains short-term/time qualifiers within ±6 tokens (regex: /\\bcurrent\\b|\\bshort[- ]term\\b|\\bdue\\s+within\\s+12\\s+months\\b|\\bwithin\\s+one\\s+year\\b|\\bnext\\s+12\\s+months\\b/), map to the appropriate current/short-term debt tag (e.g., CurrentPortionOfLongTermDebt or ShortTermDebt) instead of LongTermDebt. - Conflict / tie-breaker: if both borrowings/outstanding cues AND capacity/availability cues appear for the same numeric, prefer the borrowings/outstanding -> debt-balance mapping (because the numeric quantifies an outstanding balance) and log as 'borrowings-vs-capacity-conflict' for QA. If capacity wording is dominant and numeric explicitly labeled 'available'/'available under' then capacity mapping overrides. - Instrument-link fallback: when instrument-anchor resolution yields a named debt instrument and taxonomy contains DebtInstrumentCarryingAmount for that instrument, prefer that tag over generic LongTermDebt and include anchor span in mapping metadata. - Unit-tests (atomic examples to add): 1) '$58.0 million of borrowings under the ABL Facility' -> $58.0M = LongTermDebt (linked to ABL Facility instrument anchor if available). 2) '$50 million outstanding under the revolver' -> $50.0M = DebtInstrumentCarryingAmount or LongTermDebt (not LineOfCreditFacilityMaximumBorrowingCapacity). 3) 'The amount outstanding under the facility totaled $12.5 million and the amount available under the facility totaled $62.5 million' -> $12.5M = DebtBalance (LettersOfCreditOutstandingAmount / OutstandingBorrowings); $62.5M = LineOfCreditFacilityRemainingBorrowingCapacity (explicit 'available' maps to remaining). 4) 'Short-term borrowings under the credit facility were $15 million' -> $15.0M = ShortTermDebt / CurrentPortion (use short-term tag). 5) 'Revolving credit facility in an aggregate principal amount of up to $225.0 million; borrowings outstanding were $30.0 million' -> $225.0M = LineOfCreditFacilityMaximumBorrowingCapacity; $30.0M = DebtBalance (LongTermDebt/DebtInstrumentCarryingAmount). - Logging & QA: record chosen mapping, matched cue span (borrowings/outstanding), any instrument/facility anchor span, whether a short-term qualifier was detected, and if a borrowings-vs-capacity conflict occurred. Add conflicts to retraining queue and surface for manual review when count > threshold. - Implementation note: insert this rule into the pipeline before generic facility-capacity heuristics (ctx-00008, ctx-00009) and before lexical-only 'facility' -> LineOfCredit fallbacks so numeric tokens with borrowings/outstanding cues are correctly mapped to debt-balance tags rather than facility tags.\n[ctx-00009] helpful=0 harmful=0 :: Atomic rule A: map equity-affiliate investment currency amounts -> EquityMethodInvestments\n- Purpose: deterministically map currency amounts described as investments in unconsolidated/equity-method affiliates to EquityMethodInvestments rather than to generic Investment or Monetary tags.\n- Exact lexical cues (case-insensitive regex examples): /investments?\\s+in\\s+(?:unconsolidated\\s+)?(?:equity\\s+)?affiliat(?:e|es)\\b/, /investment\\s+in\\s+equity\\s+affiliat(?:e|es)\\b/, /equity-method\\s+investments?/i.\n- Association window: require a currency numeric token within ±12 tokens of one of the cues in the same sentence. Allow antecedent resolution to previous sentence (±1 sentence) when anaphors like 'such affiliates'/'these equity affiliates' appear; combined cross-sentence span <= 40 tokens.\n- Precedence: this mapping overrides any generic 'investments' or 'other-investments' tag. If both an equity-affiliate cue and a consolidation/ownership disclosure cue (e.g., 'unconsolidated', 'equity method', 'our share of') are present, raise confidence and map to EquityMethodInvestments; if only 'affiliate' appears without equity/consolidation cue, attach metadata {confidence: low, cue_span} and flag for review.\n- Normalization: capture currency tokens (with $ or currency words) and normalize to numeric value; store instrument-anchor span = affiliate phrase for downstream linking.\n- Unit-tests (atomic):\n  - 'investments in unconsolidated equity affiliates of $190,964' -> $190,964 = EquityMethodInvestments (anchor: 'unconsolidated equity affiliates').\n  - 'our investment in equity affiliates amounted to $2,500' -> $2,500 = EquityMethodInvestments.\n  - 'investments in affiliates — $1,000' (no 'equity'/'unconsolidated' cue) -> map with metadata {confidence: low} and queue for review.\n- Logging: record cue span, numeric span, antecedent resolution if used, chosen tag, and confidence.\n\nAtomic rule B: map 'useful life' integers -> PropertyPlantAndEquipmentUsefulLife\n- Purpose: map numeric tokens that express asset useful lives (years) for classes of property, plant and equipment to PropertyPlantAndEquipmentUsefulLife instead of generic numeric/quantity tags.\n- Exact lexical cues (case-insensitive regex examples): /useful\\s+life(s)?\\b/, /estimated\\s+useful\\s+life(s)?\\b/, /estimated\\s+useful\\s+lives\\b/, /have\\s+useful\\s+lives\\b/, /useful\\s+life\\s+of\\s+\\d+\\s+year(s)?/i. Also capture class anchors: /buildings\\b/, /furniture\\b/, /fixtures\\b/, /equipment\\b/, /leasehold\\s+improvements\\b/, /machinery\\b/.\n- Numeric detection & units: prefer integer tokens representing years (e.g., 3, 10, 30) optionally followed by 'year(s)' or 'yrs' within ±3 tokens. If unit 'years' is absent but lexical phrase 'useful life' is present, allow integer-only mapping (years implied) but attach confidence flag if ambiguous.\n- Association window: require numeric token within ±8 tokens of 'useful life' cue OR within ±6 tokens of the class-anchor when 'useful life' occurs in adjacent clause; allow antecedent class-anchor in previous sentence (±1 sentence) when phrase 'such assets'/'these assets' refers back; combined span <= 40 tokens.\n- Precedence & tie-breaker: map to PropertyPlantAndEquipmentUsefulLife (highest) over generic numeric tags or over depreciation/expense tags. If same numeric also appears adjacent to monetary cues (e.g., $ amounts) prefer monetary mapping for currency tokens and useful-life mapping only for the integer token representing years.\n- Normalization: store integer as whole-year count; if range expressed (e.g., '10 to 30 years') capture as two PropertyPlantAndEquipmentUsefulLife entries with {min:, max:} metadata or as separate tags per class if classes differ.\n- Unit-tests (atomic):\n  - 'Buildings — useful lives are 10 to 40 years' -> 10 & 40 = PropertyPlantAndEquipmentUsefulLife (class anchor: Buildings) with range metadata.\n  - 'Furniture, fixtures and equipment — useful lives are 3 years' -> 3 = PropertyPlantAndEquipmentUsefulLife (class anchor: furniture, fixtures and equipment).\n  - 'The buildings have useful lives of 30 years' -> 30 = PropertyPlantAndEquipmentUsefulLife.\n- Ambiguity handling: if numeric has no 'year' unit and no explicit 'useful life' cue, do not auto-map; flag for review. If a percentage appears near 'useful life', treat as unrelated and flag.\n- Logging: record cue span, numeric span, class-anchor span, chosen tag, and whether unit ('years') was explicit or inferred.\n[ctx-00010] helpful=0 harmful=0 :: Atomic rule: map 'granted' + 'award(s)' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod\n- Purpose: detect explicit grant events and map numeric share counts to the grants-in-period tag rather than issuance/settlement or outstanding tags.\n- Exact lexical cues (case-insensitive regexes): /\\bgrant(?:ed|s)?\\b/, /\\baward(?:s|ed)?\\b/, /performance\\s+share(?:s)?\\b/, /restricted\\s+stock\\s+award(?:s)?\\b/, /RSU(?:s)?\\b/.\n- Association window: numeric-token must lie within ±8 tokens of any grant/award cue in same sentence OR numeric appears in same clause containing 'granted'/'awarded'. Allow antecedent plan/instrument anchor ('the Plan', named plan) in previous sentence (±1 sentence, combined span <= 40 tokens).\n- Precedence: if grant/award cues present -> assign ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod. This overrides generic 'shares issued', 'sold', or plan-availability fallbacks unless explicit 'issued and delivered', 'vested and settled', or 'sold on the market' cues appear nearer the numeric (distance threshold: issued/settled cues must be within 6 tokens of numeric to override).\n- Conflict handling: if both 'granted' and 'issued' appear, choose 'granted' mapping when 'granted' is the verb linked to 'award' (e.g., 'granted performance share awards of 366,500 shares'); choose 'issued' mapping when numeric is described as 'were issued', 'issued and outstanding', 'sold' with underwriter cues.\n- Unit-tests (atomic):\n  - 'granted performance share awards of 366,500 shares' -> 366,500 = ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod\n  - 'We issued 366,500 shares under the offering' -> 366,500 = StockIssuedDuringPeriodSharesNewIssues (issued wins when 'issued' is the direct verb)\n- Logging: record matched cue spans ('granted' span and 'award' span) and numeric span for QA and traceability.\n[ctx-00011] helpful=0 harmful=0 :: Atomic rule: map 'weighted-average fair value $X per share' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriodWeightedAverageGrantDateFairValue\n- Purpose: detect grant-date weighted-average fair value statements and avoid mapping them to generic price-per-share tags.\n- Exact lexical cues (case-insensitive regexes): /weighted[- ]?average\\s+fair\\s+value\\b/, /weighted[- ]?average\\s+grant[- ]?date\\s+fair\\s+value\\b/, /average\\s+grant[- ]date\\s+fair\\s+value\\b/.\n- Numeric pattern: currency token followed by unit 'per share' / 'per common share' / 'per share of common stock' within ±6 tokens.\n- Association window: weighted-average cue and currency-per-share must co-occur in same sentence; antecedent 'granted'/'award' within ±1 sentence increases confidence but is not required.\n- Precedence: this mapping takes precedence over generic 'SaleOfStockPricePerShare' or other per-share price tags. Exception: if the sentence also contains convertible-specific conversion-link cues (see convertible rule) that explicitly tie the per-share dollar to conversion of a debt instrument (e.g., 'upon conversion the conversion price will be $X per share'), then DebtInstrumentConvertibleConversionPrice1 wins.\n- Unit-tests (atomic):\n  - 'weighted-average fair value of $8.05 per share' -> $8.05 = ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriodWeightedAverageGrantDateFairValue\n  - 'The weighted average grant-date fair value was $2.50 per share' -> $2.50 = same tag\n- Logging: store cue span and whether a 'granted' anchor was present for confidence scoring.\n[ctx-00012] helpful=0 harmful=0 :: Atomic rule: map 'convertible ... at $X per share' / 'conversion price' / 'upon conversion' -> DebtInstrumentConvertibleConversionPrice1\n- Purpose: deterministically map per‑share dollar amounts that represent a convertible debt instrument's conversion/exchange price to the convertible-conversion-price tag instead of generic per-share price or warrant-exercise tags.\n- Exact lexical cues (case-insensitive regexes): /\\bconvertible\\b/, /\\bconversion\\s+price\\b/, /\\bconvert(?:ible)?\\s+into\\b/, /\\bupon\\s+conversion\\b/, /\\bwhen\\s+converted\\b/, /\\bat\\s+\\$?\\d+[\\d,]*(?:\\.\\d+)?\\s+per\\s+share\\b/.\n- Association window: numeric-per-share must be within ±12 tokens of either 'convertible' or 'conversion' cues in same sentence OR numeric-per-share appears in a sentence with an exercise-price cue and the immediately preceding sentence contains convertible-anchor + conversion-linking phrase (±1 sentence, combined span <= 40 tokens).\n- Precedence: when convertible/conversion cues are satisfied -> assign DebtInstrumentConvertibleConversionPrice1. This overrides generic 'SaleOfStockPricePerShare', 'ClassOfWarrantOrRightExercisePriceOfWarrantsOrRights1', and grant fair-value tags. Tie-breaker: if both 'weighted-average fair value' and convertible 'conversion price' cues are present for the same numeric, prefer conversion-price mapping only when conversion-link language explicitly ties the dollar amount to conversion (e.g., 'convertible at $X per share', 'conversion price of $X per share', 'upon conversion holders will receive common stock at $X per share'). Otherwise prefer the weighted-average-grant mapping when 'weighted-average fair value' is explicit and no conversion-link exists.\n- Cross-sentence propagation: if the identical per-share numeric has already been mapped with high confidence to DebtInstrumentConvertibleConversionPrice1 elsewhere in the document, propagate that tag to repeated identical-form instances unless an explicit contradictory cue appears nearer the repeated occurrence.\n- Unit-tests (atomic):\n  - 'convertible at $0.50 per share' -> $0.50 = DebtInstrumentConvertibleConversionPrice1\n  - 'The conversion price was $0.50 per share' -> $0.50 = DebtInstrumentConvertibleConversionPrice1\n  - 'An exercise price of $10.00 per share was set for warrants' -> $10.00 = ClassOfWarrantOrRightExercisePriceOfWarrantsOrRights1 (warrant cue wins when no conversion-link present)\n- Logging: record conversion-anchor span, numeric-per-share span, and any cross-sentence antecedent used.\n[ctx-00015] helpful=0 harmful=0 :: Atomic rule: Notes-payable / balance-sheet-listing context → prefer debt-balance tags (LongTermDebt / CurrentPortion) over DebtInstrumentFaceAmount.\n- Purpose (atomic): When a numeric currency amount appears inside a 'notes payable' / 'long-term debt' disclosure listing or an enumerated balance-sheet note, treat it as a balance-sheet liability classification (LongTermDebt / CurrentPortion) unless explicit issuance context outside the listing is proven.\n- Exact header/list lexical cues (case-insensitive regexes): /\\bnotes\\s+payable\\b/, /\\bnotes\\s+payable\\s*(?:consisted\\s+of|:|—|-)\\b/, /\\blong[- ]term\\s+debt\\b/, /\\bnotes\\s+payable\\s+consisted\\s+of\\b/, /\\bconsisted\\s+of\\s+the\\s+following\\b/, paragraph headers like /^NOTE\\s+\\d+\\b.*NOTES?\\s+PAYABLE/i.\n- Enumerated/list detection heuristics (apply in order):\n  1) If a header-match occurs and the numeric appears in the same paragraph or within the next 1–2 sentences separated by a colon or list markers (lines starting with dates, bullets, or 'On [Month] [DD], [YYYY]'), mark the numeric as 'in-notes-list' (list context window = header sentence + following up to 3 sentences or until next header/blank line).\n  2) If the sentence contains the phrase 'consisted of the following', 'consists of the following', 'was as follows', or '(in thousands)' immediately after a notes/long-term-debt header, treat subsequent sentences in that block as enumerated balance-sheet items.\n- Decision flow & precedence (apply in order):\n  1) If numeric is currency and 'in-notes-list' == true -> map to LongTermDebt by default.\n  2) Short-term/current resolution: within the same sentence or the enumerated item, if short-term qualifiers appear within ±12 tokens (regex: /\\b(current portion|current|short[- ]term|due within (?:twelve|12) months|due within one year)\\b/), map to CurrentPortionOfLongTermDebt or ShortTermDebt accordingly instead of LongTermDebt.\n  3) Override rule: this notes-list mapping MUST override any DebtInstrumentFaceAmount / aggregate-principal lexical mapping when 'in-notes-list' is true. Log an 'notes-list-overrode-face-amount' event with header span and numeric span.\n  4) Exception (allow DebtInstrumentFaceAmount only when issuance narrative proven): if the sentence contains strong issuance-only cues (same-sentence verbs: /\\bissued\\b/, /\\bwas issued\\b/, /\\bissued a promissory note\\b/, /\\bin the amount of\\b/) AND there is NO notes-payable header/consisted-of anchor in the same paragraph/block (no 'in-notes-list'), then permit mapping to DebtInstrumentFaceAmount. If both issuance cues and notes-list header are present in the same block, prefer notes-list mapping (balance-sheet) unless the sentence explicitly signals an issuance event separate from the listing (explicit temporal separation, e.g., a separate paragraph beginning 'On [date] we issued...')—require explicit paragraph separation to allow DebtInstrumentFaceAmount.\n- Token windows & antecedent resolution: header can be up to 2 sentences before the numeric and still anchor the numeric to the list; allow antecedent span <= 60 tokens across sentence boundary for header->item resolution. List block ends at next top-level header or blank-line/section break.\n- Examples / unit-tests (atomic):\n  - 'At September 30, 2017 and December 31, 2016, notes payable consisted of the following (in thousands): On November 13, 2014 ... issued a promissory note ... in the amount of $65.1 million ...' -> $65.1M = LongTermDebt (NOT DebtInstrumentFaceAmount).\n  - 'NOTE 7 - NOTES PAYABLE. The outstanding balances consisted of: Term Loan — $50,000.' -> $50,000 = LongTermDebt (or CurrentPortion if qualifier present).\n  - 'On November 13, 2014, the Company issued a promissory note in the amount of $65.1 million.' (separate issuance paragraph, no notes-payable header in same block) -> $65.1M = DebtInstrumentFaceAmount.\n- Logging & QA: for every mapping where notes-list rule applied, record header span, numeric span, decision (LongTermDebt vs CurrentPortion), and whether a DebtInstrumentFaceAmount candidate was suppressed. Flag and aggregate any cases where both issuance verbs and notes-list cues are present for manual review ('notes-list-issuance-overlap').\n- Rationale: preserves disclosure-scope signal and prevents lexical-collapse where issuance lexical cues inside a balance-sheet enumeration would otherwise produce instrument-face-amount tags instead of the expected statement-line debt classification.\n[ctx-00016] helpful=0 harmful=0 :: Tax-reconciliation-to-federal-statutory-rate (atomic heuristic):\n- Purpose: map any mention that ties an effective income tax rate to the U.S. federal statutory rate to EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate instead of a generic effective-tax-rate tag.\n- Exact lexical cues (case-insensitive regex): /\\b(U\\.?S\\.?|United States|U\\.S\\.)?\\s*(federal\\s+)?statutory\\s+rate\\b/, /\\bstatutory\\s+rate\\b/, /\\breconcil(?:e|iation|ed)\\b/, /\\breconciles?\\s+to\\b/, /\\bcompared\\s+to\\s+the\\s+statutory\\s+rate\\b/, /\\bat\\s+the\\s+time\\s+of\\s+[0-9]+(?:\\.[0-9]+)?\\s*%/i.\n- Trigger conditions (apply in order):\n  1) If the sentence (or immediately adjacent sentence ±1) contains ANY tax lexical cue (e.g., 'effective tax rate', 'income tax rate') AND ANY of the statutory/reconciliation cues above within a token window of ±12 tokens of the numeric or tax phrase -> assign EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate.\n  2) If the sentence contains an explicit numeric percent (e.g., '35%') inside a phrase matching /at the time of [0-9]+(?:\\.[0-9]+)?%/ or immediately follows 'statutory rate' anchor -> treat numeric as the statutory reconciliation percent and map accordingly.\n- Precedence: this reconciliation tag MUST override EffectiveIncomeTaxRateContinuingOperations and other general effective-rate tags.\n- Edge-cases: if 'effective tax rate' appears with no statutory/reconciliation cues -> keep existing EffectiveIncomeTaxRateContinuingOperations mapping. If both 'statutory' and a different jurisdiction (non-U.S.) appear explicitly (e.g., 'the German statutory rate of 30%') then only map to the reconciliation tag when text explicitly references 'U.S.'/'United States'/'federal' or when taxonomy contains jurisdiction-scoped reconciliation tags; otherwise, map to a jurisdiction-agnostic reconciliation tag if available or flag for review.\n- Unit-tests (atomic):\n  - 'our effective tax rate was lower than the U.S. federal statutory rate at the time of 35%' -> EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate = 35%.\n  - 'the effective tax rate for continuing operations was 25%' (no 'statutory'/'reconciliation') -> EffectiveIncomeTaxRateContinuingOperations = 25%.\n  - 'reconciled to the federal statutory rate of 35%' -> reconciliation tag = 35%.\n- Logging: record matched statutory/reconciliation cue span, numeric span, sentence-id, chosen tag, and confidence. Flag ambiguous cross-sentence antecedent cases for human review with 'tax-recon-antecedent' label.\n[ctx-00017] helpful=0 harmful=0 :: Operating-vs-reportable-segment count disambiguation (atomic heuristic):\n- Purpose: deterministically choose NumberOfOperatingSegments when the disclosure text contains 'operating segments' even if 'reportable' also appears (e.g., 'two operating and reportable segments'), and reserve NumberOfReportableSegments for cases that explicitly and solely quantify reportable segments.\n- Exact lexical cues (case-insensitive regex): /\\boperating\\s+segment(?:s)?\\b/, /\\breportable\\s+segment(?:s)?\\b/, /\\boperating\\s+and\\s+reportable\\s+segment(?:s)?\\b/, /\\bnumber\\s+of\\s+(?:operating|reportable)\\s+segments\\b/, /\\bwe\\s+operate\\s+through\\s+\\d+\\s+operating\\s+segments\\b/.\n- Decision flow (apply in order):\n  1) If numeric token is within ±6 tokens of 'operating segment(s)' -> assign NumberOfOperatingSegments.\n  2) If numeric token is within ±6 tokens of the exact phrase 'operating and reportable segments' or 'operating & reportable segments' -> assign NumberOfOperatingSegments (treat 'operating' as the canonical class).\n  3) Only assign NumberOfReportableSegments when the sentence explicitly quantifies 'reportable segments' without 'operating' present (e.g., 'The number of reportable segments was two') OR when the numeric is adjacent to a lexical construction that restricts count to 'reportable' (clauses like 'for reporting purposes, the number of reportable segments is').\n  4) If a sentence contains two distinct numeric counts with explicit labels for each (e.g., 'two operating segments and three reportable segments'), assign each numeric to the nearest matching tag by token-distance.\n- Precedence: NumberOfOperatingSegments > NumberOfReportableSegments when 'operating' appears in the same clause/sentence; this must override any generic 'reportable' lexical-first heuristics.\n- Unit-tests (atomic):\n  - 'The company's internal structure includes two operating and reportable segments.' -> 2 = NumberOfOperatingSegments.\n  - 'We have three reportable segments for financial reporting purposes.' -> 3 = NumberOfReportableSegments.\n  - 'We have two operating segments and three reportable segments' -> 2 = NumberOfOperatingSegments; 3 = NumberOfReportableSegments (nearest-number tie-breaker).\n- Ambiguity handling & logging: if 'reportable' appears and antecedent context suggests a difference between operational and reporting definitions but no clear numeric locality exists, flag as 'segment-count-ambiguous' and record spans for manual review. Log every override where NumberOfOperatingSegments was chosen despite presence of 'reportable' with spans and reason code 'operating-present'.\n[ctx-00018] helpful=0 harmful=0 :: Atomic rule: Transaction-verb disambiguation for numeric ownership percentages (map ownership-percentage + action-verb → transaction tag)\n\nPurpose: Ensure percentages that quantify ownership (\"% ownership interest\", \"% stake\", \"% of voting interest\") are mapped to transaction/acquisition/disposition tags when the sentence contains a transaction verb (acquired/sold/issued/repurchased/etc.), instead of mapping them to static ownership tags.\n\nExact lexical anchors (case-insensitive regexes):\n- Ownership nouns: /(?:ownership\\s+interest|ownership|voting\\s+interest|stake|interest\\s+in\\s+the\\s+company|percentage\\s+interest|percent\\s+interest)\\b/i\n- Acquisition verbs (acquiring actions → acquisition tag): /\\b(acquir(?:e|ed|ing)|acquired\\s+an?|indirectly\\s+acquired|purchas(?:e|ed|ing)|purchased|obtained|assumed|took\\s+acquisition\\b|completed\\s+the\\s+acquisition|we\\s+acquired|we\\s+purchased)\\b/i\n- Disposition/sale verbs (disposition tags): /\\b(sold|disposed|divested|transferred\\s+to|we\\s+sold|we\\s+disposed)\\b/i\n- Issuance/repurchase verbs (other transaction tags): /\\b(issued|repurchased|redeemed|exchanged|contributed)\\b/i\n\nAssociation & token-window policy:\n- A numeric percentage token (e.g., '40%', '40 percent', or numeric with % omitted but immediately preceded/followed by 'percent'/'%') that co-occurs with an Ownership noun within ±8 tokens is an ownership-percentage candidate.\n- Search for any transaction verb anchors in the same sentence first; if none found, search the immediately adjacent sentence (±1 sentence) allowing combined span <= 40 tokens.\n- A transaction verb within ±12 tokens of the numeric OR within the same clause (commas/parenthesis-bound clause) is considered 'local' and decisive.\n\nDecision flow & precedence (apply in order):\n1) If numeric is ownership-percentage candidate AND an Acquisition verb anchor matches per windows above → assign BusinessAcquisitionPercentageOfVotingInterestsAcquired (or the most specific acquisition-percentage tag available). Link mapping metadata: { verb_span, ownership_noun_span, numeric_span, antecedent_sentence_id }.\n2) Else if numeric is ownership-percentage candidate AND a Disposition/Sale verb anchor matches → assign the appropriate disposition/sale percentage tag (e.g., BusinessDispositionPercentageOfVotingInterestsDisposed or SaleOfStockNumberOfSharesIssuedInTransaction if shares count present) with same metadata.\n3) Else if numeric is ownership-percentage candidate AND Issuance/Repurchase verb matches (issued/repurchased) → assign instrument-specific issuance/repurchase tag (e.g., StockIssuedDuringPeriodSharesNewIssues or StockRepurchasedNumberOfSharesRepurchased) as appropriate.\n4) Else (no transaction verb found within windows) → fall back to static ownership mapping (e.g., MinorityInterestOwnershipPercentageByNoncontrollingOwners or OwnershipPercentageOutstanding) but mark mapping with 'no-transaction-verb' flag.\n\nTie-breakers & conflict rules:\n- If both acquisition and disposition verbs appear with conflicting directions, choose the verb with the smallest token-distance to the numeric; if distances equal, mark 'ambiguous-direction' and route to human review (do not auto-commit a static ownership tag in ambiguous cases).\n- Passive voice variants allowed (e.g., 'was acquired', 'was sold'): match acquisition/disposition regexes that include passive forms; treat as equivalent to active forms for precedence.\n- If a transaction verb is present but ownership noun is generic (e.g., 'we acquired an interest' with no percent in same clause), require numeric and ownership noun to be within ±12 tokens to auto-map; otherwise queue for review.\n\nLogging & QA:\n- For every mapping triggered by this rule, log: numeric_span, ownership_noun_span, verb_span, chosen_tag, token_distance_scores, sentence_id, and whether antecedent resolution was used.\n- Log 'no-transaction-verb' fallback cases for retraining; aggregate 'ambiguous-direction' cases for manual curation.\n\nUnit-tests (atomic examples to add):\n- 'AES indirectly acquired the 40% ownership interest of the noncontrolling shareholder for a de minimis payment' -> 40% = BusinessAcquisitionPercentageOfVotingInterestsAcquired (verb 'acquired' within window).\n- 'The company sold a 12% ownership interest to an outside investor' -> 12% = BusinessDispositionPercentageOfVotingInterestsDisposed (verb 'sold').\n- 'We issued a 6.7% interest to the counterparty' -> 6.7% = StockIssuedDuringPeriodSharesNewIssues (issued → issuance tag) or instrument-specific issuance tag if available.\n- 'The noncontrolling owners hold a 40% ownership interest' -> 40% = MinorityInterestOwnershipPercentageByNoncontrollingOwners (no transaction verb → static ownership mapping).\n- 'The company acquired a 10% stake and now holds 60% ownership' -> 10% = BusinessAcquisitionPercentageOfVotingInterestsAcquired; 60% = MinorityInterestOwnershipPercentageByNoncontrollingOwners or ControllingOwnerPercentage as applicable depending on lexical anchor and clause separation.\n\nImplementation note: Insert this rule as a mandatory validation step in the acquisition/disposition micro-decision flow (misc-00002 / ph-00006). This rule must override any pure-lexical noun-first mapping of percentage-of-ownership to static ownership tags when a transaction verb is present. Ensure the mapping output includes verb_span and ownership_noun_span in metadata for traceability.\n[ctx-00019] helpful=0 harmful=0 :: Atomic rule: map 'amortization' + intangible-anchor -> AmortizationOfIntangibleAssets\n- Purpose: deterministically map currency amounts labeled as amortization of intangibles (including lease-related intangible assets) to AmortizationOfIntangibleAssets rather than generic expense/depreciation/lease-expense tags.\n- Exact lexical cues (case-insensitive regex examples): /amortization\\s+expense\\b/, /amortization\\s+of\\b/, /amortization\\s+related\\s+to\\b/, /amortization\\s+charge(s)?\\b/.\n- Intangible/asset anchors (case-insensitive): /lease\\s+intangibles\\b/, /intangible\\s+assets\\b/, /intangible\\s+asset\\b/, /definite-lived\\s+intangible(s)?\\b/, /acquired\\s+intangible(s)?\\b/, /customer\\s+relationships\\b/, /trademark(s)?\\b/, /goodwill\\s+amortization\\b/ (use as caution: goodwill rarely amortized under US GAAP; prefer Goodwill tag if 'goodwill' and 'amortization' co-occur only when taxonomy requires it).\n- Association window: require currency numeric token within ±10 tokens of an amortization lexical cue AND an intangible-anchor in same sentence OR previous sentence (±1 sentence) with combined span <= 40 tokens.\n- Precedence/tie-breaker: if rule conditions met -> assign AmortizationOfIntangibleAssets. This mapping overrides (a) LeaseAndRentalExpense / OperatingLeasesRentExpenseNet (do NOT map to lease expense when 'amortization' + intangible-anchor present), (b) DepreciationOfPropertyPlantAndEquipment (do NOT map to depreciation if 'intangible' anchor present), and (c) generic 'Expense' tags. If 'amortization' appears but anchor is ambiguous (no 'intangible' anchor within windows), do NOT auto-assign AmortizationOfIntangibleAssets; flag for review or apply semantic classifier.\n- Conflict handling: if both 'amortization' and 'rent/lease expense' appear explicitly adjacent (e.g., 'amortization and rent expense'), map each numeric to nearest lexical cue by token-distance; if single numeric and both cues co-occur equally, prefer AmortizationOfIntangibleAssets only if intangible-anchor explicit; otherwise flag ambiguous.\n- Unit-tests (atomic examples):\n  - 'Amortization expense of lease intangibles was $3.4 million for the year.' -> $3.4M = AmortizationOfIntangibleAssets.\n  - 'Amortization expense related to definite-lived intangible assets totaled $1.2 million.' -> $1.2M = AmortizationOfIntangibleAssets.\n  - 'Rent expense was $1.3 million; amortization expense of intangibles was $0.4 million.' -> map each to respective tags; amortization -> AmortizationOfIntangibleAssets.\n- Logging: record amortization cue span and intangible-anchor span and chosen tag; log ambiguous/no-anchor cases to retraining queue.\n[ctx-00020] helpful=0 harmful=0 :: Atomic rule: map 'weighted average interest rate' on debt -> DebtWeightedAverageInterestRate\n- Purpose: map percentages explicitly described as weighted-average interest rates on a portfolio of debt to DebtWeightedAverageInterestRate and avoid mis-mapping to per-instrument interest-rate tags.\n- Exact lexical cues (case-insensitive regex examples): /weighted[- ]?average\\s+interest\\s+rate\\b/, /weighted[- ]?average\\s+rate\\b/, /weighted[- ]?average\\s+interest\\s+of\\b/.\n- Debt portfolio anchors (case-insensitive): /debt\\s+outstanding\\b/, /total\\s+debt\\b/, /debt\\b/, /our\\s+outstanding\\s+debt\\b/, /aggregate\\s+debt\\b/, /of\\s+debt\\s+outstanding\\b/.\n- Association window: require a percentage token (e.g., '2.72%' or '2.72 percent') within ±6 tokens of a 'weighted average' cue OR percentage anywhere in same sentence where 'weighted average interest rate' phrase exists. Also require a debt-portfolio anchor in same sentence OR previous sentence (±1 sentence) within combined span <= 40 tokens; if 'weighted average interest rate' phrase itself includes 'of debt outstanding' or 'on the Company's outstanding debt', anchor requirement satisfied.\n- Precedence/tie-breaker: if conditions met -> assign DebtWeightedAverageInterestRate. This mapping has precedence over instrument-level DebtInstrumentInterestRateStatedPercentage for that percentage token. Exception: if the phrase explicitly qualifies a per-instrument context (e.g., 'weighted average interest rate of our term loans was X for the period, and the XYZ note bears 3.5% per annum') still map the explicit 'weighted average' percent to DebtWeightedAverageInterestRate; map explicit per-instrument rates separately. If a single percent token is labeled both 'weighted average' and immediately bound to a single instrument name (e.g., 'weighted average interest rate on the Term Loan of 3.5%') treat as DebtWeightedAverageInterestRate (phrase mirrors 'weighted average') unless text explicitly states 'the interest rate on [InstrumentName] was 3.5% (not a weighted average)'.\n- Conflict handling: if both 'weighted average' and instrument-specific 'per annum' cues are present for the same percent token and the text is ambiguous which scope applies, prefer DebtWeightedAverageInterestRate only when 'weighted average' matches the percent within ±6 tokens; otherwise flag 'rate-scope-ambiguous' for review.\n- Unit-tests (atomic examples):\n  - 'The weighted average interest rate on debt outstanding was 2.72% and 2.63% for the periods.' -> 2.72% & 2.63% = DebtWeightedAverageInterestRate.\n  - 'Our weighted-average interest rate on outstanding debt was 3.1% for the year.' -> 3.1% = DebtWeightedAverageInterestRate.\n  - 'The Term Loan interest rate was 5.00% per annum; the weighted average interest rate on all debt outstanding was 3.2%.' -> 5.00% = DebtInstrumentInterestRateStatedPercentage (term loan); 3.2% = DebtWeightedAverageInterestRate.\n- Logging: record weighted-average cue span, percent span, debt-anchor span, and chosen tag; aggregate 'rate-scope-ambiguous' cases for QA.\n[ctx-00024] helpful=0 harmful=0 :: Atomic rule: Distinguish AwardVestingPeriod vs AwardExpirationPeriod for numeric time expressions (years/months/days)\n\nPurpose: prevent blanket mapping of any numeric+unit near 'vest' to vesting-period; map anchored time-to-event expressions (\"from the grant date\", \"from issuance\", \"on the grant date\", \"by the grant date\", \"after grant date\") to the award-expiration/term tag.\n\nExact lexical patterns (case-insensitive regex examples):\n- Anchored time-to-event patterns (map numeric -> SharebasedCompensationArrangementBySharebasedPaymentAwardExpirationPeriod):\n  - /\\b(?:from|from the|from the date of|after|after the|on|by)\\s+(?:the\\s+)?(?:grant|grant date|date of grant|issuance|issue date|grant\\s+date|date\\s+of\\s+grant)\\b/i\n  - /\\bexpires?\\s+(?:in|after|from)\\s+\\d+\\s*(?:month|months|year|years|day|days)\\b/i\n  - /\\bvesting\\s+\\d+\\s*(?:month|months|year|years)\\s+from\\b/i\n  - /\\bvests?\\s+on\\s+the\\s+grant\\s+date\\b/i\n\n- Vesting-schedule patterns (map numeric -> ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1):\n  - /\\b(vest(?:s|ing)?(?:\\s+schedule)?|cliff\\s+vesting|vests?\\s+ratably|vests?\\s+over|vests?\\s+in)\\b/i\n  - boundary examples: /\\bthree[- ]year(?:s)?\\s+cliff\\s+vesting\\b/, /\\bvests?\\s+over\\s+\\d+\\s+year(?:s)?\\b/, /\\b\\d+\\s+year(?:s)?\\b(\\s+cliff)?(?=\\s+vesting)/i\n\nAssociation & token-window policy:\n- Primary: apply patterns within the same sentence. Numeric token must be within ±12 tokens of the matched anchor phrase.\n- Antecedent resolution: allow anchored phrases in the immediately preceding sentence (±1 sentence) when anaphors refer to 'the award'/'the Plan' and combined span <= 40 tokens.\n\nDecision flow & precedence (apply in order):\n1) If anchored time-to-event pattern matches (any anchored regex above) and numeric+unit is in the pattern window -> assign SharebasedCompensationArrangementBySharebasedPaymentAwardExpirationPeriod and link mapping metadata { anchor_span, numeric_span, matched_pattern }.\n2) Else if vesting-schedule pattern matches (vesting-schedule regexes) and numeric+unit is in that window -> assign ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1.\n3) If BOTH patterns co-occur in same clause/sentence (e.g., 'three-year cliff vesting' AND 'vesting 36 months from the grant date') -> map schedule numeric(s) to AwardVestingPeriod and map anchored numeric(s) (the '... from the grant date' expression) to AwardExpirationPeriod (explicit split rule). Do NOT collapse into a single vesting-period tag.\n4) Tie-breaker: when a numeric appears in proximity to both a generic 'vest' verb and an anchored 'from the grant date' prepositional phrase, favor anchored-expiration mapping when the numeric is syntactically tied to the prepositional phrase (token-distance to preposition < token-distance to generic 'vest' verb) OR if the preposition 'from/on/by/after' immediately precedes the date-anchor phrase.\n\nEdge-case rules:\n- If sentence reads like 'vests immediately; fully vested after X months from grant date' apply anchored-expiration mapping to the 'after X months' numeric.\n- If numeric lacks explicit 'from/on/after/by' anchor but context contains 'vests in X years' without date anchoring -> treat as AwardVestingPeriod.\n\nExamples / unit-tests (atomic):\n- 'with the entire award vesting 36 months from the grant date.' -> 36 months = SharebasedCompensationArrangementBySharebasedPaymentAwardExpirationPeriod (NOT AwardVestingPeriod).\n- 'three-year cliff vesting' -> 'three' & 'year' = ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1.\n- 'vests over three years and fully vests 36 months from the grant date' -> three years -> AwardVestingPeriod; 36 months -> AwardExpirationPeriod.\n- 'award vests 24 months after issuance' -> 24 months = AwardExpirationPeriod (anchored 'after issuance').\n- 'vesting schedule: 25% each year for four years' -> four years = AwardVestingPeriod (schedule form).\n\nLogging & QA:\n- Record anchor_span, numeric_span, matched_regex, token_distances to both 'vest' and 'from' anchors, chosen_tag, and decision_reason (e.g., 'anchored-expiration' or 'schedule-match').\n- Flag for review any mapping where token-distance difference between anchored anchor and vest-schedule anchor is <=2 tokens (ambiguous proximity) with label 'vesting-expiration-proximity-ambiguous'.\n\nImplementation notes:\n- Insert this rule as a mandatory validation step after any generic 'numeric+unit -> vesting' candidate assignment but before final commit of vesting tags.\n- Make outputs carry metadata so downstream QA/training can detect repeated anchored-expiration patterns for taxonomy improvements.\n## OTHERS\n[misc-00002] helpful=1 harmful=1 :: Micro decision flow for acquisition-related monetary phrases (apply in order): 1) Search sentence (or immediate surrounding sentence ±1) for the exact phrase variants from the lexical-to-tag mapping. 2) If only one cue matches, assign the corresponding tag. 3) If multiple cues match, choose the cue whose token span is closest to the numeric amount (measure token-distance from numeric token to cue span). 4) If both cues are equidistant or no numeric amount is present, break ties by cue specificity: ('purchase price' > 'cash paid' > 'consideration'). 5) If still ambiguous, prefer PaymentsToAcquireBusinessesGross when the sentence explicitly mentions payments, cash, or amounts described as 'paid' or 'paid as part of the acquisition'; prefer BusinessCombinationConsiderationTransferred1 only when the text uses 'consideration' or explicitly 'consideration transferred' and describes the composition of consideration (e.g., cash + shares + other instruments). 6) Log ambiguous cases for human review and add the sentence to a short test-suite.\n\n**Reflection:**\n(empty)\n\n**Question:**\nYou are XBRL expert.  Here is a list of US GAAP tags options: ,OperatingLeasesRentExpenseNet,MinorityInterestOwnershipPercentageByParent,ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriodWeightedAverageGrantDateFairValue,DerivativeNotionalAmount,PreferredStockDividendRatePercentage,GuaranteeObligationsMaximumExposure,LossContingencyEstimateOfPossibleLoss,OperatingLeaseRightOfUseAsset,NumberOfOperatingSegments,PaymentsToAcquireBusinessesNetOfCashAcquired,DebtInstrumentBasisSpreadOnVariableRate1,InterestExpense,ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsNonvestedNumber,CommonStockSharesOutstanding,StockRepurchaseProgramRemainingAuthorizedRepurchaseAmount1,LineOfCreditFacilityInterestRateAtPeriodEnd,ContractWithCustomerLiabilityRevenueRecognized,AmortizationOfIntangibleAssets,ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1,DebtInstrumentRedemptionPricePercentage,RepaymentsOfDebt,DisposalGroupIncludingDiscontinuedOperationConsideration,LineOfCreditFacilityRemainingBorrowingCapacity,BusinessCombinationAcquisitionRelatedCosts,LesseeOperatingLeaseRenewalTerm,TreasuryStockValueAcquiredCostMethod,PreferredStockSharesAuthorized,RelatedPartyTransactionExpensesFromTransactionsWithRelatedParty,ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsVestedInPeriodTotalFairValue,UnrecognizedTaxBenefitsThatWouldImpactEffectiveTaxRate,SaleOfStockNumberOfSharesIssuedInTransaction,OperatingLeaseWeightedAverageRemainingLeaseTerm1,StockRepurchaseProgramAuthorizedAmount1,SupplementalInformationForPropertyCasualtyInsuranceUnderwritersPriorYearClaimsAndClaimsAdjustmentExpense,RelatedPartyTransactionAmountsOfTransaction,CommonStockDividendsPerShareDeclared,IncomeLossFromEquityMethodInvestments,DebtInstrumentMaturityDate,LettersOfCreditOutstandingAmount,AllocatedShareBasedCompensationExpense,EffectiveIncomeTaxRateContinuingOperations,ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAuthorized,ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant,ShareBasedCompensationArrangementByShareBasedPaymentAwardOptionsGrantsInPeriodGross,ConcentrationRiskPercentage1,OperatingLeasePayments,LongTermDebt,RestructuringCharges,CommonStockParOrStatedValuePerShare,DebtInstrumentConvertibleConversionPrice1,Revenues,DeferredFinanceCostsGross,EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate,DefinedBenefitPlanContributionsByEmployer,GoodwillImpairmentLoss,LossContingencyPendingClaimsNumber,OperatingLeaseLiability,LineOfCreditFacilityMaximumBorrowingCapacity,OperatingLeaseExpense,DerivativeFixedInterestRate,LineOfCreditFacilityCommitmentFeePercentage,CumulativeEffectOfNewAccountingPrincipleInPeriodOfAdoption,SharebasedCompensationArrangementBySharebasedPaymentAwardAwardVestingRightsPercentage,DebtWeightedAverageInterestRate,PaymentsToAcquireBusinessesGross,DebtInstrumentCarryingAmount,BusinessCombinationRecognizedIdentifiableAssetsAcquiredAndLiabilitiesAssumedIntangibles,RevenueFromContractWithCustomerExcludingAssessedTax,PublicUtilitiesRequestedRateIncreaseDecreaseAmount,ContractWithCustomerLiability,DebtInstrumentTerm,DebtInstrumentFairValue,RevenueFromContractWithCustomerIncludingAssessedTax,RevenueFromRelatedParties,DebtInstrumentInterestRateEffectivePercentage,GainsLossesOnExtinguishmentOfDebt,EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognizedShareBasedAwardsOtherThanOptions,DebtInstrumentUnamortizedDiscount,LineOfCreditFacilityCurrentBorrowingCapacity,CashAndCashEquivalentsFairValueDisclosure,LesseeOperatingLeaseTermOfContract,RestructuringAndRelatedCostExpectedCost1,DefinedContributionPlanCostRecognized,OperatingLeaseCost,LossContingencyDamagesSoughtValue,ShareBasedCompensationArrangementByShareBasedPaymentAwardOptionsGrantsInPeriodWeightedAverageGrantDateFairValue,ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod,EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognizedPeriodForRecognition1,EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognized,FiniteLivedIntangibleAssetUsefulLife,Depreciation,AcquiredFiniteLivedIntangibleAssetsWeightedAverageUsefulLife,DeferredFinanceCostsNet,DebtInstrumentInterestRateStatedPercentage,Goodwill,CommonStockCapitalSharesReservedForFutureIssuance,LongTermDebtFairValue,OperatingLossCarryforwards,InterestExpenseDebt,UnrecognizedTaxBenefits,BusinessCombinationContingentConsiderationLiability,TreasuryStockAcquiredAverageCostPerShare,ClassOfWarrantOrRightExercisePriceOfWarrantsOrRights1,SharebasedCompensationArrangementBySharebasedPaymentAwardExpirationPeriod,NumberOfRealEstateProperties,TreasuryStockSharesAcquired,AntidilutiveSecuritiesExcludedFromComputationOfEarningsPerShareAmount,CommonStockSharesAuthorized,SharePrice,DebtInstrumentFaceAmount,AmortizationOfFinancingCosts,BusinessCombinationConsiderationTransferred1,LineOfCreditFacilityUnusedCapacityCommitmentFeePercentage,StockRepurchasedDuringPeriodShares,ProceedsFromIssuanceOfCommonStock,StockIssuedDuringPeriodSharesNewIssues,AccrualForEnvironmentalLossContingencies,BusinessAcquisitionPercentageOfVotingInterestsAcquired,LossContingencyAccrualAtCarryingValue,OperatingLeaseWeightedAverageDiscountRatePercent,ShareBasedCompensationArrangementByShareBasedPaymentAwardOptionsExercisesInPeriodTotalIntrinsicValue,BusinessAcquisitionEquityInterestsIssuedOrIssuableNumberOfSharesIssued,CapitalizedContractCostAmortization,NumberOfReportableSegments,AssetImpairmentCharges,RevenueRemainingPerformanceObligation,EquityMethodInvestmentOwnershipPercentage,MinorityInterestOwnershipPercentageByNoncontrollingOwners,AreaOfRealEstateProperty,StockRepurchasedAndRetiredDuringPeriodShares,LineOfCredit,BusinessCombinationRecognizedIdentifiableAssetsAcquiredAndLiabilitiesAssumedIntangibleAssetsOtherThanGoodwill,IncomeTaxExpenseBenefit,PropertyPlantAndEquipmentUsefulLife,LeaseAndRentalExpense,ShareBasedCompensation,EquityMethodInvestments,SaleOfStockPricePerShare,EmployeeServiceShareBasedCompensationTaxBenefitFromCompensationExpense. Answer the following 4 independent questions by providing only  4 US GAAP tags answers in the order of the questions. Each answer must be saperated by a comma (,).  Provide nothing else. \n1. What is best tag for entity \"13,228\" in sentence: \"On July 9 , 2018 , the Compensation Committee of the Board of Directors of the Company granted each of the four non - employee directors 13,228 RSUs in accordance with a RSU Grant Agreement pursuant to the Company 's 2009 LTIP , as amended .?\"\n2. What is best tag for entity \"three\" in sentence: \"The RSUs will be subject to three year cliff vesting , with the entire award vesting 36 months from the grant date .?\"\n3. What is best tag for entity \"year\" in sentence: \"The RSUs will be subject to three year cliff vesting , with the entire award vesting 36 months from the grant date .?\"\n4. What is best tag for entity \"36\" in sentence: \"The RSUs will be subject to three year cliff vesting , with the entire award vesting 36 months from the grant date .?\"\nOutput US GAAP tags:\n\n**Context:**\n\n\n**Answer in this exact JSON format:**\n{\n  \"reasoning\": \"[Your chain of thought / reasoning / thinking process, detailed analysis and calculations]\",  \n  \"bullet_ids\": [\"calc-00001\", \"fin-00002\"],  \n  \"final_answer\": \"[Your concise final answer here]\"\n}\n\n---\n",
  "response": "{\n  \"reasoning\": \"Applied playbook lexical and contextual rules: (1) 'granted' + 'RSUs' in same sentence with plan anchor (2009 LTIP) → map share-count to grants-in-period tag (ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod) per grant/award mapping rules. (2) The phrase 'three year cliff vesting' is a vesting-schedule expression; the numeric 'three' and its unit 'year' map to the award vesting-period tag (ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1) per the vesting-vs-expiration heuristic. (3) The token 'year' functions as the unit for the vesting period and thus is also associated with the same vesting-period tag. (4) 'vesting 36 months from the grant date' is an anchored time‑to‑event expression ('from the grant date') → map '36' to the award expiration/term tag (SharebasedCompensationArrangementBySharebasedPaymentAwardExpirationPeriod). Avoided mapping to issuance/price or weighted-average fair-value tags by using grant/award and anchor cues. \",\n  \"bullet_ids\": [\n    \"ctx-00010\",\n    \"ctx-00024\",\n    \"ctx-00001\",\n    \"err-00013\"\n  ],\n  \"final_answer\": \"ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod,ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1,ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1,SharebasedCompensationArrangementBySharebasedPaymentAwardExpirationPeriod\"\n}",
  "prompt_time": 0.0,
  "response_time": 25.27472710609436,
  "total_time": 25.27472710609436,
  "call_time": 25.27472710609436,
  "prompt_length": 128064,
  "response_length": 1498,
  "prompt_num_tokens": 29680,
  "response_num_tokens": 1971,
  "timestamp": "20260206_185345_067",
  "datetime": "2026-02-06T18:53:45.069626"
}