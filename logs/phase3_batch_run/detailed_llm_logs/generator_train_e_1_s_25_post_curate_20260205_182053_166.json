{
  "role": "generator",
  "call_id": "train_e_1_s_25_post_curate",
  "model": "gpt-5-mini",
  "prompt": "You are an analysis expert tasked with answering questions using your knowledge, a curated playbook of strategies and insights and a reflection that goes over the diagnosis of all previous mistakes made while answering the question.\n\n**Instructions:**\n- Read the playbook carefully and apply relevant strategies, formulas, and insights\n- Pay attention to common mistakes listed in the playbook and avoid them\n- Show your reasoning step-by-step\n- Be concise but thorough in your analysis\n- If the playbook contains relevant code snippets or formulas, use them appropriately\n- Double-check your calculations and logic before providing the final answer\n\nYour output should be a json object, which contains the following fields:\n- reasoning: your chain of thought / reasoning / thinking process, detailed analysis and calculations\n- bullet_ids: each line in the playbook has a bullet_id. all bulletpoints in the playbook that's relevant, helpful for you to answer this question, you should include their bullet_id in this list\n- final_answer: your concise final answer\n\n\n**Playbook:**\n## STRATEGIES & INSIGHTS\n\n## FORMULAS & CALCULATIONS\n\n## CODE SNIPPETS & TEMPLATES\n\n[code-00004] helpful=0 harmful=0 :: Regex detection template (pseudo-code): - patterns = { 'PaymentsToAcquireBusinessesGross': [/(?:aggregate\\s+|total\\s+)?purchase\\s+price/i, /cash(?:\\s+consideration)?\\s+paid/i], 'BusinessCombinationConsiderationTransferred1': [/(?:aggregate\\s+)?consideration(?:\\s+transferred)?/i], 'BusinessAcquisitionEquityInterestsIssuedOrIssuableNumberOfSharesIssued': [/issued\\s+\\d[\\d,]*/i, /shares\\s+issued/i] } - For each numeric token in sentence: find nearest matching pattern within N tokens (N=8). - Assign tag of nearest matched pattern. - If multiple tags at equal distance, apply specificity precedence: purchase_price > cash_paid > consideration. - If no match, fall back to semantic classifier but flag for review.\n## COMMON MISTAKES TO AVOID\n\n[err-00003] helpful=0 harmful=0 :: Do not conflate 'purchase price' with 'consideration'. Anti-pattern: tagging both an 'aggregate purchase price of $X' and an 'aggregate consideration of $Y' with the same 'consideration' tag. Concrete prevention: enforce lexical-match-first rule (if 'purchase price' appears, do not map that phrase to BusinessCombinationConsiderationTransferred1). Add a unit-test: example sentence 'aggregate purchase price of $162 million' must map to PaymentsToAcquireBusinessesGross; 'aggregate consideration of $1.2 billion' must map to BusinessCombinationConsiderationTransferred1.\n[err-00007] helpful=0 harmful=0 :: Anti-patterns and prevention rules (atomic): - Anti-pattern: mapping any 'per share' price to SaleOfStockPricePerShare without checking instrument class. Prevention: before assigning SaleOfStockPricePerShare check for convertible/preferred/mandatory cues in same sentence; if present, map to convertible-specific price tag. - Anti-pattern: treating 'we sold X shares' as a generic secondary sale when underwriter/overallotment/offer language is present. Prevention: if 'we sold' co-occurs with underwriter/overallotment/overallotment exercise/offer language within ±1 sentence, treat as primary issuance and map share counts to StockIssuedDuringPeriodSharesNewIssues. - Anti-pattern: applying nearest-lexical-match only. Prevention: implement precedence override: instrument-type and offering flags must be evaluated and can override nearest lexical match. - Add unit-tests for regressions: include at least 10 sentences mixing convertible language with 'per share' and 'sold' / 'offered' / 'underwriters' to ensure convertible/issuance tags win over generic sale tags.\n[err-00010] helpful=0 harmful=0 :: err-XXXX :: Anti-pattern: blanket-mapping 'availability' -> RemainingBorrowingCapacity. Prevention checklist (atomic):\n- Do not assign RemainingBorrowingCapacity solely because the word 'availability' appears. First check for a facility-capacity anchor in same or previous sentence (\"has a $X credit facility\", \"in an aggregate principal amount of up to $X\").\n- If 'availability' is used in a comparative clause referencing a previously stated cap (\"may be less than $X\" where X == stated cap), map to MaximumBorrowingCapacity (the sentence is comparing to the contractual cap or describing an effective cap constraint).\n- If the phrase contains explicit current-amount tokens (\"amount available under the facility totaled\", \"was available under the facility\"), map to RemainingBorrowingCapacity.\n- If no anchor and no explicit remaining-amount phrase exist, mark as ambiguous and require human review instead of auto-mapping.\n- Add automated unit-tests for both positive and negative examples and log ambiguous cases for retraining.\n[err-00014] helpful=0 harmful=0 :: Tie-breaker: prefer instrument-specific mapping over generic financial-category tags when instrument anchor present (atomic prevention rule): - Anti-pattern: mapping an 'interest' currency amount to generic InterestExpense or mapping a 'per annum' percentage to a spread tag without checking instrument context. - Prevention checklist (apply in order): 1) If numeric token is percentage AND 'per annum'/'per year' present AND any instrument-anchor (note/loan/term loan/seller note) in sentence ±1 -> map to DebtInstrumentInterestRateStatedPercentage. 2) If numeric token is currency AND interest lexical cue ('interest charges', 'interest expense', 'interest on') AND instrument-anchor in sentence ±1 -> map to InterestExpenseDebt (link numeric to instrument anchor). 3) If both 'spread'/'margin' and 'per annum' cues occur, prefer per-annum/stated-rate mapping; log conflict for QA. 4) If customer + revenue percent detected, map to ConcentrationRiskPercentage1; do not map to generic 'percentage' tags. 5) If instrument-anchor is absent for interest-charge currency amounts, map to generic InterestExpense and flag for human review; add the sentence to a retraining queue. - Unit-tests: include all examples referenced in the above heuristics and assert instrument-specific tags beat generic alternatives.\n[err-00002] helpful=0 harmful=0 :: Atomic negation-to-zero rule for availability quantities (prevention of treating negation as 'absent' rather than numeric zero). Purpose: ensure explicit negative availability phrases ('no', 'none', 'not available') are normalized to numeric zero for quantity tags and mapped to the most specific availability tag. Rules:\n1) Negation cues (case-insensitive regex examples): /\\bno\\b/, /\\bnone\\b/, /\\bnot\\s+available\\b/, /\\bthere\\s+are\\s+no\\b/, /\\bzero\\b/ within ±6 tokens of an availability noun ('available', 'remain', 'remain\\s+available', 'available\\s+for\\s+grant').\n2) Quantity mapping: when negation cue co-occurs with availability noun and a plan/instrument anchor as applicable (e.g., 'under the Plan', 'under the facility'), assign numeric value 0 and map to the specific quantity tag (e.g., ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant = 0; LineOfCreditFacilityRemainingBorrowingCapacity = $0 when explicit 'amount available under the facility was $0' or 'no availability under the credit facility').\n3) Scope constraints (do NOT apply universal zero conversion): do not convert negations that apply to non-quantity facts or idiomatic phrases ('no material impact', 'no change', 'no further details'); require proximity to a numeric/quantity noun and an anchor.\n4) Tag-type constraint: only auto-convert to zero for quantity/amount-of-shares/remaining-capacity numeric tags; do not auto-convert percentages unless explicit context indicates 'zero percent' (e.g., 'no revenue' vs 'zero percent of revenue' are different; flag ambiguous percent-negations for review).\n5) Token-window & antecedent resolution: allow antecedent anchors in previous sentence up to ±1 sentence when anaphoric phrase 'the Plan'/'the facility' is used; require confidence threshold for cross-sentence negation mapping; otherwise flag for human review.\n6) Unit-tests/examples to add:\n   - 'no shares remain available under the 2014 Long Term Incentive Plan' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant = 0.\n   - 'There are no amounts available under the credit facility' -> LineOfCreditFacilityRemainingBorrowingCapacity = 0.\n   - 'No material impact was expected' -> do NOT map to any numeric tag (must be filtered by scope constraint).\n7) Logging: any auto-zero assignment should be recorded with the negation cue span and the anchor span for traceability and QA.\n[err-00004] helpful=0 harmful=0 :: Anti-pattern prevention: Do not map currency amounts labeled as 'interest charges'/'interest expense' to generic InterestExpense when an instrument-anchor is present; instead map to InterestExpenseDebt and normalize explicit zeros. - Exact lexical cues (case-insensitive): /interest\\s+charge(s)?\\b/, /interest\\s+expense(s)?\\b/, /interest\\s+on\\s+the\\s+(note|notes|loan|term\\s+loan|seller\\s+note|revolver)/i. - Instrument-anchor detection: detect instrument names (Seller Notes, Term Loan, Revolver, Senior Notes, etc.) in same sentence OR previous sentence (allow antecedent resolution up to ±1 sentence and span <= 40 tokens). - Association window: currency numeric token within ±12 tokens of interest lexical cue (primary) and instrument-anchor within ±40 tokens across sentence boundary if needed. - Mapping rule: if both interest lexical cue and instrument-anchor present -> assign InterestExpenseDebt (link numeric to instrument id). If interest lexical cue present but no instrument-anchor -> assign generic InterestExpense and flag 'interest-amount-no-instrument' for review. - Zero/numeric normalization: if the numeric token is explicit 'zero', 'no interest', 'none' appearing within ±6 tokens of interest lexical cue and instrument-anchor present, normalize to numeric 0 and assign InterestExpenseDebt = 0; log negation cue span and anchor span for traceability. - Precedence: this instrument-specific mapping overrides any generic expense or cash-flow tag. - Unit-tests (atomic): - '$179,507 of interest charges associated with the Seller Notes for the year' -> $179,507 = InterestExpenseDebt (Seller Notes). - 'No interest expense was recorded on the Term Loan' -> InterestExpenseDebt = 0 (Term Loan), logged. - '$331,397 of interest expense for the six months ended June 30 related to the Term Loan' -> $331,397 = InterestExpenseDebt. - Logging: record instrument anchor span and interest phrase span for each mapping for QA and retraining; aggregate 'interest-amount-no-instrument' cases into review queue.\n[err-00003] helpful=0 harmful=0 :: err-000XX :: Heuristic-use logging and auto-linking rule (atomic prevention of traceability inconsistencies): Purpose: ensure every auto-assigned tag that corresponds to a playbook heuristic is recorded with that heuristic id and supporting evidence; detect and correct cases where tag assignment and playbook-bullet usage are inconsistent.\nRules (apply at tag-assignment time, deterministic steps):\n1) Heuristic-match pass (post-tag decision): run a deterministic heuristic-matcher over the sentence/span using the canonical set of playbook heuristics (use same regexes/token-windows as playbook bullets) and compute for each bullet: match_score = sum(matched_cues_weight) - distance_penalty. Use identical precedence rules as the playbook.\n2) If the assigned tag equals the top-scoring playbook bullet's canonical mapping AND match_score >= MATCH_THRESHOLD (e.g., 0.7), then automatically attach the following fields to the annotation: { attached_bullet_id: <id>, match_score: <float>, matched_cue_spans: [ { cue_text, start_token, end_token } ], numeric_span: { start_token, end_token }, evidence_sentence_id }.\n3) If the assigned tag equals a playbook canonical mapping but no bullet matched with score >= MATCH_THRESHOLD, create a derived_bullet record with id derived-<hash> containing the observed cue patterns, numeric span, sentence, and system-generated regex; attach derived_bullet_id to the annotation and add the derived record to the 'to-review' queue.\n4) If the generator attempted to attach 'no playbook bullet used' but the post-decision heuristic-match finds a bullet with match_score >= MATCH_THRESHOLD, override 'no-bullet' flag by attaching the matched bullet id and log an inconsistency event: { event: 'bullet-missing-on-output', predicted_tag, matched_bullet_id, match_score, run_id }.\n5) If the assigned tag does NOT correspond to any existing bullet mapping, attach explicit { attached_bullet_id: null, reason: 'no-bullet-match', top_candidate_bullets: [ {id, match_score} ] } and queue example for playbook author review if top_candidate match_score >= REVIEW_THRESHOLD (e.g., 0.5).\n6) Mandatory trace fields (always attach these to each numeric-tag annotation): { tag_assigned, numeric_span_tokens, anchor_span_tokens (if any), attached_bullet_id (or derived id or null), match_score, matched_cue_texts, confidence_score, provenance: { model_version, pipeline_version, timestamp } }.\n7) Post-commit validator: after annotation commit, run a validator that checks 'if tag_assigned in canonical_playbook_map and attached_bullet_id not equal canonical_id then emit error-level QA record and auto-attach canonical_id (idempotent). Example: if tag_assigned == ConcentrationRiskPercentage1 and canonical bullet==ctx-00013 but attached_bullet_id==null -> auto-attach ctx-00013 and create QA record.\n8) Unit-tests (atomic examples to add to CI):\n   - Sentence: 'Tech Data accounted for 32% of total net revenue for the year' -> expected: ConcentrationRiskPercentage1 attached_bullet_id == 'ctx-00013', matched_cue_spans include 'of total net revenue' and 'Tech Data'.\n   - Negative: 'Random percent in unrelated sentence' -> if no playbook bullet matches, attached_bullet_id == null and top_candidate_bullets list empty or low scores.\n   - Inconsistency detection: simulate pipeline that would earlier output 'no bullet used' but matches ctx-00013 on validator; assert validator auto-attaches ctx-00013 and emits QA record 'bullet-missing-on-output'.\n9) Logging & QA metrics: record counts and example lists for (a) auto-attached bullets, (b) derived bullets created, (c) inconsistency corrections. Surface these in weekly QA dashboard and include example spans for human review. Persist match_score thresholds and allow hyperparameter tuning, but require explicit change-log entry when thresholds are updated.\n10) Implementation notes: Implement this rule as a lightweight deterministic post-processing module in the tagging pipeline (idempotent). It must run the same matching logic as playbook bullets to avoid mismatch. Add regression tests to ensure existing high-confidence mappings (e.g., ctx-00013 -> customer concentration percent -> ConcentrationRiskPercentage1) always result in attached_bullet_id == ctx-00013.\n[err-00007] helpful=0 harmful=0 :: [err-xxxx] helpful=0 harmful=0 :: Anti-pattern: equating 'recognized' with 'vested' in share-based compensation disclosures. Prevention checklist (atomic):\n\n1) Detection: if sentence contains verb 'recognized'/'recorded'/'expensed' within ±8 tokens of numeric token, do NOT map to any 'vested' fair-value tag unless explicit 'vested' AND 'fair value' are both present (within ±6 tokens).\n2) If sentence contains 'unrecognized' + 'expected to be recognized' or 'weighted-average period' in proximity to the numeric token, do NOT map to award-vesting-period tags; instead map period to the 'PeriodForRecognition' tag (only when unrecognized-cost cue present).\n3) Disambiguation priority (use before labeling): expense-recognition verbs > unrecognized-recognition-period cues > vested+fair-value cues > generic 'period'/'vesting' lexical matches.\n4) Unit-tests to add to CI to prevent regression: include at least 6 sentences mixing 'recognized', 'vested', 'fair value', and 'weighted-average' in different permutations showing correct/incorrect mappings (examples from ctx-xxxx unit-tests). Failing any unit-test should block model auto-assignment for that pattern and trigger human-review.\n5) Training data capture: whenever the system would have mapped 'recognized' -> vested-fair-value but the precedence rule chooses AllocatedShareBasedCompensationExpense, log the positive example (sentence, predicted tag, corrected tag) into a 'recognized-vs-vested' training bucket for model fine-tuning.\n## PROBLEM-SOLVING HEURISTICS\n\n[ph-00006] helpful=0 harmful=0 :: Delta decision flow (apply in order for each numeric token): 1) Sentence-level scan: detect instrument-type cues (convertible/preferred/mandatory) and offering cues (underwriters, overallotment, offering language) across the sentence ±1 surrounding sentence. 2) If instrument-type == convertible: - If numeric token is a price or appears adjacent to unit tokens like 'per share', 'per common share', 'per depositary share': assign DebtInstrumentConvertibleConversionPrice1 unless an explicit secondary-market sale cue is present. - If numeric token is shares and offering cues present: assign StockIssuedDuringPeriodSharesNewIssues. 3) If offering cues present (even if instrument-type absent): - If numeric token is number-of-shares -> assign StockIssuedDuringPeriodSharesNewIssues (primary issuance). - If numeric token is price and context uses 'offering price', 'issued at', 'offering at' -> prefer issuance-price tag (if available) else flag for review. 4) If no instrument-type or offering cues: use existing lexical-to-tag mapping (e.g., 'sold' -> SaleOfStockNumberOfSharesIssuedInTransaction) as fallback. 5) Tie-breaker precedence (high -> low): instrument-specific issuance tags (convertible conversion price, mandatory-convertible issuance) > issuance/share-specific tags (StockIssuedDuringPeriodSharesNewIssues) > generic sale tags (SaleOfStock*). 6) Ambiguity handling: if fallback mapping would assign a generic sale tag but any instrument/offering cue matched (score difference < threshold), flag the example and record sentence+reason for human review and training. 7) Unit-test generation examples to add to test suite: - \"We sold 17,250,000 shares, including the underwriters' exercise of the overallotment option\" -> 17,250,000 = StockIssuedDuringPeriodSharesNewIssues. - \"Sempra Energy 6% Mandatory Convertible Preferred Stock, Series A, was issued at $100.00 per share\" -> $100.00 = DebtInstrumentConvertibleConversionPrice1. - \"We sold 500,000 shares on the open market\" -> 500,000 = SaleOfStockNumberOfSharesIssuedInTransaction.\n[ph-00002] helpful=0 harmful=0 :: Delta decision flow for tax-rate-percentage mapping (apply for each percentage token): 1) Sentence-level scan: detect tax-reconciliation anchors ('effective tax-rate reconciliation', 'reconciliation of effective tax rate', 'reconciled to') anywhere in the sentence or immediately preceding sentence (±1). 2) Detect statutory-rate cues (use lexical rule above). 3) If BOTH (a) reconciliation anchor present AND (b) 'federal'/'U.S.'/'statutory' tax-rate cue present within allowed windows -> deterministically assign EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate to the nearest percentage token. 4) Tie-breaker: if more than one statutory-like cue exists, prefer the percent whose token-distance to the phrase 'federal statutory' is smallest; if equal, prefer the percent that co-occurs with the word 'rate' or the explicit phrase 'statutory'. 5) If reconciliation anchor is present but 'federal' qualifier is missing, prefer tag only when textual context explicitly references 'statutory' and jurisdiction 'U.S.'; otherwise flag as 'tax-rate-ambiguous-jurisdiction' and queue for human review (do not auto-map to federal statutory tag). 6) If other percentage-mapping heuristics (e.g., spreads, concentration) are also triggered, enforce precedence: statutory-reconciliation mapping > concentration/customer mapping > spread/basis mapping > generic percentage mapping. 7) Unit-tests to add: - 'Reconciled to the federal statutory income tax rate of 35%.' -> 35% = EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate. - 'For the year ended, the U.S. statutory rate used in the reconciliation was 21%.' -> 21% = EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate. - 'The statutory tax rate used in reconciliation was 25% (no jurisdiction specified)' -> flagged as 'tax-rate-ambiguous-jurisdiction'. 8) Logging: Always record reconciliation-anchor span, statutory-cue span, chosen numeric span, and applied tag for audit and retraining.\n## CONTEXT CLUES & INDICATORS\n\n[ctx-00001] helpful=1 harmful=0 :: Lexical-to-tag mapping (exact cues + variants). Use exact phrase detection before higher-level semantic heuristics. Patterns to detect (case-insensitive): - 'purchase price', 'total purchase price', 'aggregate purchase price' -> tag PaymentsToAcquireBusinessesGross. Regex examples: /(?:aggregate\\s+|total\\s+)?purchase\\s+price/i. - 'consideration', 'consideration transferred', 'aggregate consideration' -> tag BusinessCombinationConsiderationTransferred1. Regex examples: /(?:aggregate\\s+)?consideration(?:\\s+transferred)?/i. - 'cash paid', 'cash consideration', 'cash consideration paid' -> PaymentsToAcquireBusinessesGross. Regex: /cash(?:\\s+consideration)?\\s+paid/i. - 'shares issued', 'shares were issued', 'issued X shares' -> BusinessAcquisitionEquityInterestsIssuedOrIssuableNumberOfSharesIssued. Regex: /(?:issued|issued\\s+approximately)\\s+\\d+[\\d,]*(?:\\s+shares)?/i. Apply these matches to the phrase window that contains the numeric amount (±8 tokens) to ensure the amount belongs to the detected cue.\n[ctx-00005] helpful=0 harmful=0 :: Instrument-type detection patterns (case-insensitive regexes and token cues): - Convertible indicators: /\\bconvertible\\b/, /\\bconversion price\\b/, /\\bconversion cap\\b/, /\\bconvertible preferred\\b/, /\\bmandatory convertible\\b/, /\\bmandatory convertible preferred\\b/. - Preferred-stock signals: /\\bpreferred stock\\b/, /\\bseries [A-Z]+\\b/, /\\bdividend(?:-bearing)?\\b/. - Debt-like convertible signals: /\\b6% mandatory convertible preferred stock\\b/ (literal patterns for numerated series acceptable). Offering / primary-issuance indicators: - underwriters: /\\bunderwriter(s)?\\b/, /\\bwe sold\\b/, /boffering\\b/, /\\boverallotment\\b/, /\\bexercise[d]?\\s+overallotment\\b/, /\\bprimary offering\\b/, /\\boffered and sold\\b/, /\\bpurchased by the underwriters\\b/. Sale / secondary-market indicators (inverse cues): /\\bwe sold to third parties\\b/, /\\bsecondary offering\\b/, /\\btraded on\\b/, /\\bsold on the market\\b/. Numeric association window policy: - Primary association window = ±8 tokens around numeric token. - If an instrument-type cue appears anywhere in the same sentence, treat instrument-type as global for that numeric token (i.e., instrument cues outrank local lexical matches within window). - If offering cue appears in same sentence or adjacent sentence (±1 sentence), mark transaction as primary issuance. Precedence mapping rules (applied after detection): - If instrument-type == convertible AND numeric_context == price -> map numeric to DebtInstrumentConvertibleConversionPrice1 (convertible conversion/issuance price). - If offering_flag == true AND numeric_context == shares -> map numeric to StockIssuedDuringPeriodSharesNewIssues. - If instrument-type == convertible AND offering_flag == true AND numeric_context == shares -> StockIssuedDuringPeriodSharesNewIssues (shares issued in offering of convertible instrument). - Only if no instrument-type OR offering cues detected, or if explicit secondary-sale cues present, fall back to SaleOfStockNumberOfSharesIssuedInTransaction / SaleOfStockPricePerShare. Distance weighting: - When multiple cues present, compute score = (instrument_cue_present ? 10 : 0) + (offering_cue_present ? 8 : 0) + (1 / (1 + token_distance_to_numeric)). Choose tag with highest score. Logging: - If generic sale tag would be selected but instrument-type OR offering cues exist with nonzero score, log for human review and mark as 'contextual-overlap' example for retraining.\n[ctx-00008] helpful=0 harmful=0 :: Credit-facility vs spread disambiguation (atomic heuristics):\n1) Purpose: ensure currency amounts describing facility capacity map to LineOfCreditFacilityMaximumBorrowingCapacity and percentage 'margin/spread' phrases over LIBOR/ABR map to DebtInstrumentBasisSpreadOnVariableRate1.\n2) Exact lexical cues (case-insensitive):\n   - Facility-capacity cues (map currency -> LineOfCreditFacilityMaximumBorrowingCapacity): /\\b(revolv(?:ing)?\\s+credit\\s+facilit(?:y|ies)|credit\\s+facility|revolver)\\b/, /\\bin\\s+an\\s+aggregate\\s+principal\\s+amount\\b/, /\\b(up\\s+to)\\b/, /\\bmaximum\\s+amount\\b/, /\\bcommitment\\b/.\n   - Outstanding/borrowings cues (do NOT map to capacity): /\\boutstanding\\b/, /\\bborrowed\\b/, /\\bamounts?\\s+outstanding\\b/, /\\bprincipal\\s+amounts?\\s+outstanding\\b/.\n   - Spread/margin cues (map percentage -> DebtInstrumentBasisSpreadOnVariableRate1): /\\bmargin(s)?\\b/, /\\bspread(s)?\\b/, /\\bover\\s+(?:LIBOR|ABR|an?\\s+index)\\b/, /\\bin\\s+the\\s+case\\s+of\\s+(?:LIBOR|ABR)\\s+loan(s)?\\b/.\n   - Absolute/effective-rate cues (do NOT map to spread): /\\binterest\\s+rate\\b/, /\\beffective\\s+rate\\b/, /\\bper annum\\b/, /\\bAPR\\b/.\n3) Token association window policy: apply matches to numeric tokens using a ±8-token window for lexical cues and ±1 sentence for facility-level cues (e.g., named facility in prior sentence). If a facility-capacity cue appears anywhere in the same sentence or the immediately preceding sentence, currency amounts within ±16 tokens of that cue are capacity candidates.\n4) Precedence rules (apply in order):\n   a) If numeric is currency AND a facility-capacity cue matches (within window) -> assign LineOfCreditFacilityMaximumBorrowingCapacity.\n   b) If numeric is currency AND an outstanding/borrowings cue matches -> assign outstanding-balance tag (do not map to capacity).\n   c) If numeric is a percentage AND a spread/margin cue matches (within ±3 tokens) AND the phrase references LIBOR/ABR/index -> assign DebtInstrumentBasisSpreadOnVariableRate1.\n   d) If numeric is a percentage AND absolute/effective-rate cues match (within ±3 tokens) -> assign the appropriate interest-rate tag (do NOT map to basis/spread); if no interest-rate tag exists in taxonomy, flag for human review rather than mapping to spread.\n   e) If a conflict exists (e.g., 'margin' and 'interest rate' both present), prefer the more specific cue: 'margin/spread over LIBOR/ABR' > 'interest rate' only when text explicitly says 'margin' or 'spread'; otherwise prefer 'interest rate' mapping.\n5) Normalization and token checks:\n   - Recognize percentages with % or the word 'percent' or numeric forms like '1.00%–2.00%'.\n   - Recognize currency with $ or currency words (dollars, EUR, etc.).\n6) Logging & QA:\n   - If mapping would assign a spread tag but the sentence contains 'interest rate'/'per annum' within ±3 tokens of the percentage, log as 'potential-rate-vs-spread' for human review and add to targeted unit-tests.\n7) Minimal unit-tests to add (atomic examples):\n   - \"revolving credit facilities in an aggregate principal amount of up to $225.0 million\" -> $225.0 million = LineOfCreditFacilityMaximumBorrowingCapacity.\n   - \"The margin ranges from 1.00% to 2.00% in the case of LIBOR loans\" -> 1.00% and 2.00% = DebtInstrumentBasisSpreadOnVariableRate1.\n   - \"The interest rate is 5.00% per annum\" -> 5.00% = interest-rate tag (do NOT map to DebtInstrumentBasisSpreadOnVariableRate1); if interest-rate tag missing, flag for review.\n   - \"$50 million outstanding under the revolver\" -> $50 million = outstanding-balance tag (do NOT map to capacity).\n8) Implementation notes (for classifiers / regex pipelines):\n   - Apply these patterns before generic lexical-to-tag fallbacks.\n   - When multiple tags are plausible, compute priority score where facility-capacity cue adds +10, outstanding cue +12 (to avoid mis-tagging as capacity), spread/margin +10, interest-rate cue +11; choose highest score and log ties.\n   - Add examples that mix LIBOR/ABR and 'margin' with numeric ranges to training/regression suites to prevent collapse into absolute-rate tags.\n[ctx-00009] helpful=1 harmful=1 :: Credit-facility availability vs capacity — atomic disambiguation rule (apply before generic 'availability' fallback):\n1) Purpose: ensure currency amounts that reference facility size/capacity map to LineOfCreditFacilityMaximumBorrowingCapacity and only map to LineOfCreditFacilityRemainingBorrowingCapacity when the sentence explicitly reports a point-in-time available amount.\n2) Exact lexical patterns (case-insensitive regexes):\n   - Facility-capacity anchor (detect stated cap): /(?:has|has a|has an|in an aggregate principal amount of|in an aggregate amount of|in an aggregate principal amount of up to|up to)\\s+\\$?[\\d,]+(?:\\.\\d+)?\\s*(?:million|billion)?\\s*(?:revolv(?:ing)?\\s+credit\\s+facilit(?:y|ies)|credit\\s+facility|revolver)/i\n   - Explicit remaining-amount cues (map to remaining borrowing capacity): /(?:amount available under the (?:credit )?facility(?: totaled|was|is)|available under the facility totaled|was available under the facility|amount available under the facility is)\\b/i\n   - Comparative/constraint cues (signal comparison to a stated cap): /availability\\s+(?:under|of)\\s+(?:this|the)?\\s*(?:credit )?facilit(?:y|ies)\\s+may\\s+be\\s+less\\s+than\\s+\\$?[\\d,]+(?:\\.\\d+)?/i, /may\\s+be\\s+less\\s+than\\b/i, /as\\s+a\\s+result\\s+of\\b/i, /for\\s+certain\\s+subsidiaries\\b/i, /for\\s+specific\\s+entities\\b/i\n3) Association windows and antecedent resolution:\n   - If a facility-capacity anchor (pattern above) appears anywhere in the same sentence OR in the immediately preceding sentence, consider that dollar amount the canonical facility maximum for subsequent comparative/availability clauses. (Sentence window = ±1 sentence.)\n   - Token association: when anchored, allow currency amounts in comparative clauses up to ±16 tokens from the comparative phrase to be treated as referencing the stated cap.\n4) Precedence decision flow (apply in order):\n   a) If numeric is currency AND explicit remaining-amount cues match (within ±8 tokens) -> assign LineOfCreditFacilityRemainingBorrowingCapacity.\n   b) Else if numeric is currency AND comparative/constraint cue matches (e.g., \"availability may be less than $X\") AND X equals the earlier-detected facility-capacity anchor amount (or the sentence contains a nearby explicit facility-capacity anchor) -> assign LineOfCreditFacilityMaximumBorrowingCapacity (the phrase is comparing to the contractual cap or describing effective cap reductions).\n   c) Else if numeric is currency AND comparative/constraint cue matches BUT no prior anchor exists: if clause contains constraint markers ('as a result of', 'for certain subsidiaries', 'for specific entities', 'may be less than') prefer MaximumBorrowingCapacity (treat as described cap limit) but mark as 'ambiguous-availability-without-anchor' and log for review.\n   d) Else if numeric is currency AND no comparative/anchor cues but lexical 'availability' appears alone (no 'amount available', no 'totaled') -> treat as ambiguous: do NOT auto-assign RemainingBorrowingCapacity; instead prefer MaximumBorrowingCapacity only if a facility-capacity anchor exists in same or previous sentence; otherwise flag for human review.\n5) Tie-breaker and override: facility-capacity anchor presence overrides the naive 'availability -> remaining' rule. Explicit remaining-amount lexical patterns override capacity mapping and must map to RemainingBorrowingCapacity regardless of anchors.\n6) Examples / unit-tests (add to targeted suite):\n   - \"The Company has a $75 million revolving credit facility (credit facility)\" -> $75 million = LineOfCreditFacilityMaximumBorrowingCapacity.\n   - \"availability under this credit facility may be less than $75 million as a result of outstanding letters of credit...\" -> $75 million = LineOfCreditFacilityMaximumBorrowingCapacity (because X matches stated cap and clause is comparative/constraint).\n   - \"an outstanding letter of credit under the credit facility totaled $12.5 million and the amount available under the facility totaled $62.5 million\" -> $12.5M = LettersOfCreditOutstandingAmount; $62.5M = LineOfCreditFacilityRemainingBorrowingCapacity (explicit remaining-amount cue).\n   - \"availability under the facility may be less than $40 million\" (no prior stated cap mentioned) -> flag 'ambiguous-availability-without-anchor' and queue for human review (do not auto-assign RemainingBorrowingCapacity).\n7) Logging & QA: any case where 'availability' appears but the rule chooses MaximumBorrowingCapacity only because of an antecedent anchor must be logged as 'availability-referenced-cap' with the anchor span and numeric comparison; ambiguous/no-anchor cases must be logged as 'ambiguous-availability' and added to training data.\n8) Implementation notes: incorporate these checks before any generic lexical mapping that equates 'availability' -> remaining capacity; add unit-tests above and regressions that ensure 'amount available' still maps to RemainingBorrowingCapacity.\n[ctx-00011] helpful=0 harmful=0 :: Interest-rate 'per annum' -> DebtInstrumentInterestRateStatedPercentage (atomic heuristic): - Purpose: map percentages expressed as annual/stated interest rates on named debt instruments to DebtInstrumentInterestRateStatedPercentage. - Exact lexical cues (case-insensitive regexes): /(per\\s+annum|per\\s+year|annually|annual\\s+rate|%\\s+per\\s+annum|APR)\\b/ and instrument anchors: /\\b(note|notes|loan|loans|seller\\s+note|senior\\s+notes|term\\s+loan|revolver|debt\\b)/i. - Association window: require both a percentage token and at least one instrument-anchor token in the same sentence OR instrument-anchor within the previous sentence (±1 sentence). If instrument name present in same sentence, require token-distance <= 12 tokens; if in prior sentence, allow <= 40 token span across sentence boundary. - Precedence: If 'per annum' (or equivalent) is detected within ±3 tokens of the percentage, prefer DebtInstrumentInterestRateStatedPercentage over spread/basis tags. - Conflict rule: If both 'margin'/'spread' cues and 'per annum' cues are present, prefer 'per annum' -> stated-rate mapping, but log as 'rate-vs-spread-conflict' for QA. - Unit-tests/examples: - \"8% per annum on the Seller Notes\" -> 8% = DebtInstrumentInterestRateStatedPercentage (anchor 'Seller Notes'). - \"The interest rate is 5.00% per year on the term loan\" -> 5.00% = DebtInstrumentInterestRateStatedPercentage. - Implementation note: apply before generic percentage-to-spread fallbacks.\n[ctx-00012] helpful=1 harmful=0 :: Monetary 'interest charges' mapping to instrument-specific InterestExpenseDebt (atomic heuristic): - Purpose: ensure currency amounts described as interest charges/interest expense tied to a particular note/loan map to InterestExpenseDebt (and are linked to the instrument identity) rather than a generic InterestExpense tag. - Exact lexical cues (case-insensitive regexes): /interest\\s+charge(s)?\\b/, /interest\\s+expense(s)?\\b/, /interest\\s+cost(s)?\\b/, /(interest\\s+charges)\\s+associated\\s+with/, /interest\\s+relating\\s+to/, /interest\\s+on\\s+the\\s+(?:note|notes|loan|loan\\s+agreement)/i. - Association policy: require a currency token (e.g., $179,507) in same sentence and an instrument anchor (note/loan name like 'Seller Notes') in same sentence OR previous sentence. Primary token-distance window = ±12 tokens around numeric; allow ±1 sentence antecedent resolution with span <= 40 tokens. - Precedence: instrument-specific InterestExpenseDebt overrides generic InterestExpense when instrument anchor present. If instrument anchor not present, map to generic InterestExpense and flag 'interest-amount-no-instrument' for review. - Unit-tests/examples: - \"$179,507 of interest charges associated with the Seller Notes for the year\" -> $179,507 = InterestExpenseDebt (linked to Seller Notes). - \"$331,397 of interest expense for the six months ended June 30 related to the Term Loan\" -> $331,397 = InterestExpenseDebt. - Logging: record sentence span and instrument anchor for any instrument-linked interest mapping for traceability.\n[ctx-00013] helpful=2 harmful=0 :: Customer-concentration percentage mapping -> ConcentrationRiskPercentage1 (atomic heuristic): - Purpose: map percentages that quantify customer concentration of revenues to ConcentrationRiskPercentage1. - Exact lexical cues/patterns (case-insensitive regexes): /(?:two|three|top|largest|the\\s+two\\s+largest|the\\s+largest)\\s+customers\\b/, /customer\\s+concentration\\b/, /accounts?\\s+for\\s+about|accounted\\s+for\\s+approximately|accounted\\s+for\\s+|represent(s|ed)\\s+approximately\\s+\\d+\\%/i. Percentage capture window: detect percentage token within ±10 tokens of customer/revenue cue and/or the phrase 'of (our|the)? revenues' or 'of revenue'. - Precedence: when percentage is explicitly tied to 'customers' + 'revenues', map to ConcentrationRiskPercentage1 even if other percentage-tag candidates exist. - Unit-tests/examples: - \"Our two largest customers accounted for approximately 44% of our revenues\" -> 44% = ConcentrationRiskPercentage1. - \"The largest customer represented 22% of revenue\" -> 22% = ConcentrationRiskPercentage1. - Ambiguity handling: if percent lacks 'customer' anchor but 'of revenues' alone appears, mark as potential concentration and log for human review.\n[ctx-00001] helpful=1 harmful=0 :: Equity / Plan lexical-to-tag atomic rules (exact cues + variants). Purpose: deterministically map par-value, shares-outstanding, plan-availability and plan-authorized numeric tokens to the most specific US GAAP tag. Rules (apply in order):\n1) Par/Stated value per share -> CommonStockParOrStatedValuePerShare\n   - Exact lexical cues (case-insensitive regex examples): /\\$?\\s*[0-9]{1,3}(?:[\\,\\d]*)(?:\\.\\d+)?\\s*(?:per|par)\\s+share(s)?\\b/, /par\\s+value\\s+of\\s+\\$?\\s*[0-9.,]+\\b/, /stated\\s+value\\s+per\\s+share\\b/.\n   - Association window: numeric token and 'per share'/'par value' cue must co-occur in the same sentence and lie within ±8 tokens.\n   - Precedence: if matched, assign CommonStockParOrStatedValuePerShare regardless of other nearby 'price' or 'per share' generic sale cues.\n   - Unit-tests: '$0.001 par value per share' -> CommonStockParOrStatedValuePerShare = 0.001; 'stated value per common share of $0.01' -> CommonStockParOrStatedValuePerShare = 0.01.\n\n2) 'Shares outstanding' -> CommonStockSharesOutstanding\n   - Exact lexical cues: /shares\\s+outstanding\\b/, /outstanding\\s+shares\\b/, /shares\\s+were\\s+outstanding\\b/.\n   - Association window: numeric token within ±8 tokens of the cue; sentence-level anchor required.\n   - Precedence: this tag wins over generic 'shares issued' or offering tags when 'outstanding' is present and no offering/underwriter cues are present in ±1 sentence.\n   - Unit-tests: '28,026,713 shares outstanding' -> CommonStockSharesOutstanding = 28,026,713.\n\n3) Plan context: map plan-specific share counts to plan tags\n   - Plan-anchor detection (case-insensitive): /(?:long[- ]term incentive plan|2014\\s+Long\\s+Term\\s+Incentive\\s+Plan|LTIP|stock\\s+plan|equity\\s+compensation\\s+plan)\\b/ (allow named-year or 'the Plan' with antecedent resolution from prior sentence).\n   - If plan-anchor present in same sentence OR immediately preceding sentence (±1 sentence) then apply plan-specific mappings:\n     a) 'available'/'remain available' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant\n        - Cues: /available\\s+.*?shares|remain\\s+available|shares\\s+available\\s+for\\s+grant\\b/; numeric token within ±8 tokens maps to that tag.\n     b) 'maximum number' / 'may be delivered' / 'authorized' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAuthorized\n        - Cues: /maximum\\s+number\\s+of\\s+shares|may\\s+be\\s+delivered\\s+.*?is\\s+\\$?\\s*[\\d,]+|authorized\\s+to\\s+issue\\s+up\\s+to\\s+\\$?\\s*[\\d,]+\\b/, numeric token maps to Authorized tag.\n   - Token association: allow antecedent plan-name in previous sentence when 'the Plan' or year-named plan is used; antecedent span <= 40 tokens across sentence boundary.\n   - Precedence: plan-specific tags override generic share tags (e.g., StockIssuedDuringPeriodSharesNewIssues, SaleOfStockNumberOfSharesIssuedInTransaction) whenever the plan-anchor is detected.\n   - Unit-tests: 'no shares remain available under the 2014 Long Term Incentive Plan' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant = 0; 'maximum number of shares that may be delivered under the plan is 15,000,000' -> ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAuthorized = 15,000,000.\n\n4) Association & ambiguity handling\n   - If both a plan-anchor and offering/underwriter cues are present, prefer plan-specific mappings for availability/authorized fields and issuance-specific mappings for issuance events; log any example where plan-anchor and issuance-anchor both score >0 as 'plan-vs-issuance-overlap' for human review.\n   - If no plan-anchor is found but text uses 'available under the plan' with an antecedent plan name earlier in document >1 sentence away, require human-review flag (do not auto-assign) unless antecedent resolution confidence >= threshold.\n\n5) Implementation notes\n   - Apply these rules before generic 'per share' or 'shares' fallbacks; add unit-tests above and log 'plan-availability-zero' cases for QA traceability.\n[ctx-00003] helpful=0 harmful=0 :: Atomic rule: Map 'LIBOR plus X%' (and close variants) -> DebtInstrumentBasisSpreadOnVariableRate1. - Purpose: avoid misinterpreting 'LIBOR plus X%' as an absolute stated interest rate. - Exact lexical patterns (case-insensitive regexes): /(LIBOR|ABR|an? index)\\s*(?:\\+|plus|\\+/-|\\band\\s+an?\\s+adjusted\\s+rate|with\\s+a\\s+margin\\s+of)\\s*([0-9]+(?:\\.[0-9]+)?\\s*%)/i and /(?:margin|spread)\\s*(?:of)?\\s*([0-9]+(?:\\.[0-9]+)?\\s*%)\\s*(?:over|above|to|on)\\s*(LIBOR|ABR|index)/i. - Token association: require percentage token within ±3 tokens of LIBOR/ABR or 'plus'/'over' lexical cue; allow antecedent instrument references in same sentence or previous sentence ±1 if needed for linking. - Precedence/tie-breaker: If both 'per annum'/'per year'/'annual' occurs within ±3 tokens of the percentage, prefer DebtInstrumentInterestRateStatedPercentage only if there is explicit 'per annum' + instrument-anchor; otherwise prefer DebtInstrumentBasisSpreadOnVariableRate1 for 'LIBOR plus X%' forms. - Unit-tests (atomic examples): - 'LIBOR plus 4.15%' -> 4.15% = DebtInstrumentBasisSpreadOnVariableRate1. - 'the margin ranges from 1.00% to 2.00% in the case of LIBOR loans' -> both percents = DebtInstrumentBasisSpreadOnVariableRate1. - 'interest rate of 4.15% per annum' -> 4.15% = DebtInstrumentInterestRateStatedPercentage (not a spread). - Logging: any mapping where both 'margin/spread' and 'per annum' cues are within ±3 tokens should be logged as 'rate-vs-spread-conflict' with spans for QA and unit-test augmentation. - Implementation note: apply this rule before generic percentage-to-interest fallbacks and add targeted regression tests for 'plus/over' surface forms.\n[ctx-00005] helpful=0 harmful=0 :: Atomic lexical rule: map 'borrowing base' -> LineOfCreditFacilityRemainingBorrowingCapacity (alias: LineOfCreditFacilityCurrentBorrowingCapacity).\n- Exact lexical cues (case-insensitive regexes): /\\bborrowing\\s+base\\b/, /\\bamount(?:s)?\\s+available\\s+to\\s+borrow\\b/, /\\bavailable\\s+borrowing\\s+capacity\\b/, /\\bamount\\s+available\\s+under\\s+the\\s+(?:credit\\s+)?facility\\b/.\n- Association window: numeric token must lie within ±8 tokens of the cue in the same sentence; allow antecedent plan/facility name resolution in previous sentence (±1 sentence) if anchor span <= 40 tokens.\n- Precedence rules (apply in order):\n  1) If a cue above matches -> assign LineOfCreditFacilityRemainingBorrowingCapacity for the nearest numeric currency token (override generic 'capacity' or 'availability' fallbacks).\n  2) If the same sentence explicitly contains 'maximum', 'commitment', 'up to', 'in an aggregate principal amount of', or similar contractual-cap cues within ±8 tokens of a different currency token -> assign those tokens to LineOfCreditFacilityMaximumBorrowingCapacity (do NOT remap borrows labeled explicitly as 'maximum').\n  3) If a single sentence contains both a 'borrowing base' cue and a 'maximum/commitment' cue with two different currency tokens, map each numeric to the cue it is adjacent to (token-distance); if one numeric token is within distance of both cues, prefer the 'borrowing base' -> RemainingBorrowingCapacity mapping for that numeric and log as 'borrowbase-vs-commitment-conflict'.\n  4) If only the word 'capacity' or 'availability' appears without an explicit 'borrowing base' or 'amount available' phrasing, defer to existing availability-vs-capacity rules (ctx-00009 / err-00010) and require anchor-checks; do NOT treat 'capacity' alone as proof of remaining-amount.\n- Ambiguity handling: if 'borrowing base' appears but no numeric token in ±8 tokens, flag 'borrowing-base-no-amount' for review (do not guess). If numeric present but sentence contains conflicting language (e.g., 'borrowing base' and 'maximum' both adjacent to the same numeric), map to RemainingBorrowingCapacity and log conflict for QA.\n- Unit-tests (atomic examples to add):\n  - \"The borrowing base under the credit facility is $425.0 million.\" -> $425.0M = LineOfCreditFacilityRemainingBorrowingCapacity.\n  - \"An amount available under the facility totaled $62.5 million\" -> $62.5M = LineOfCreditFacilityRemainingBorrowingCapacity.\n  - \"Revolving credit facility in an aggregate principal amount of up to $225.0 million; the borrowing base available is $150.0 million\" -> $225.0M = LineOfCreditFacilityMaximumBorrowingCapacity; $150.0M = LineOfCreditFacilityRemainingBorrowingCapacity.\n  - \"Availability under this credit facility may be less than $75 million as a result of outstanding letters of credit\" (and $75M equals prior stated cap) -> follow comparative-rule in ctx-00009 (map to MaximumBorrowingCapacity), but if 'borrowing base' is used instead of 'availability' and tied to $75M map to RemainingBorrowingCapacity.\n- Logging & QA: record mapping span with label 'borrowing-base-mapped' including cue span, numeric span, and antecedent facility anchor. Add 'borrowbase-vs-commitment-conflict' and 'borrowing-base-no-amount' to review queues for retraining.\n[ctx-00001] helpful=1 harmful=0 :: Atomic lexical-to-tag rule: Map any percentage explicitly described as the federal (U.S.) statutory income tax rate in an effective-tax-rate reconciliation to EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate.\n- Exact lexical cues (case-insensitive regexes): /federal\\s+(?:statutory\\s+)?income\\s+tax\\s+rate\\b/, /U\\.S\\.?\\s+statutory\\s+tax\\s+rate\\b/, /U\\.S\\.?\\s+federal\\s+statutory\\s+rate\\b/, /statutory\\s+tax\\s+rate\\b/ when co-occurring with 'federal' or 'U.S.'; also accept phrase variants that include 'used in reconciliation', 'used in the effective tax-rate reconciliation', or 'effective tax-rate reconciliation'.\n- Association window: require the percentage token to appear in the same sentence as the cue or within ±8 tokens of the cue; if 'reconciliation' or 'effective tax-rate' appears in the immediately preceding sentence (±1 sentence), allow antecedent resolution and link the percent to the cue across the sentence boundary (span <= 40 tokens).\n- Precedence: If this cue is detected, assign EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate and override any generic percentage tags (e.g., InterestRate, ConcentrationRiskPercentage1) or ambiguous percent heuristics.\n- Ambiguity handling: If multiple percentage tokens and only one explicit 'federal statutory income tax rate' cue exists, map the percent nearest the cue; if no percent is within window, flag 'statutory-rate-no-percent' for review.\n- Unit-tests/examples: 'The federal statutory income tax rate was 35%.' -> 35% = EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate; 'The U.S. statutory tax rate of 21% was used in the effective tax-rate reconciliation.' -> 21% = EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate.\n- Logging: record numeric-token span and cue span ('federal statutory income tax rate' and 'reconciliation' if present) for QA traceability.\n[ctx-00004] helpful=1 harmful=0 :: Depreciation & Amortization lexical-to-tag atomic rule (exact cues + variants):\n1) Purpose: deterministically map currency amounts labeled as depreciation/amortization to the most specific US GAAP tags and ensure comparative/sibling numeric mentions in the same clause use the same tag.\n2) Exact lexical cues (case-insensitive regex examples):\n   - Depreciation cues -> /\\bdepreciation\\s+expense(s)?\\b/, /\\bdepreciation\\b/.\n   - Amortization cues -> /\\bamortization\\s+expense(s)?\\b/, /\\bamortization\\b/.\n   - Amortization-of-intangibles qualifier -> /finite-?lived|intangible(s)?|intangibles/ (must co-occur with amortization cue to map to AmortizationOfIntangibleAssets).\n3) Association window: for any currency numeric token in the same sentence, if the sentence contains a Depreciation cue within ±12 tokens -> assign Depreciation to that numeric token. If the sentence contains an Amortization cue AND an intangible qualifier (as above) within ±12 tokens of the numeric token -> assign AmortizationOfIntangibleAssets. If amortization cue appears without intangible qualifier, assign generic Amortization tag if present in taxonomy; otherwise flag as 'amortization-ambiguous-asset-type' for review.\n4) Same-sentence/comparative rule: when multiple numeric tokens appear in the same clause/sentence associated with the same explicit expense cue (e.g., \"Depreciation expense of $29 million and $28 million was recognized\"), map all such tokens to the same canonical tag (Depreciation or AmortizationOfIntangibleAssets) rather than splitting across different tags. Implementation: if a single expense-cue span covers multiple numeric spans, assign the canonical tag to every numeric in that cue-span.\n5) Precedence: these rules override generic currency-to-expense fallbacks. If both Depreciation and Amortization cues appear in the same sentence, assign by nearest token-distance to each numeric; if equidistant, prefer the cue that explicitly names the asset class (e.g., 'intangible') -> AmortizationOfIntangibleAssets.\n6) Unit-tests/examples (atomic):\n   - \"Depreciation expense of $29 million and $28 million was recognized\" -> both $29M and $28M = Depreciation.\n   - \"Amortization expense related to finite-lived intangible assets was $38 million\" -> $38M = AmortizationOfIntangibleAssets.\n   - \"Amortization expense was $38 million and $31 million\" (same sentence, same cue) -> both = AmortizationOfIntangibleAssets (if qualifier present) or Amortization (if no qualifier and taxonomy has only Amortization).\n7) Logging: record matched cue span, matched qualifier spans (e.g., 'finite-lived', 'intangible'), numeric spans, attached_tag, and attached_bullet_id (if playbook bullet exists). Flag ambiguous/no-qualifier amortization mappings for human review.\n[ctx-00005] helpful=0 harmful=0 :: Percent-on-issued-debt instrument atomic rule (issue-percent -> DebtInstrumentInterestRateStatedPercentage):\n1) Purpose: map percentages that directly qualify newly-issued/named debt instruments in issuance language to DebtInstrumentInterestRateStatedPercentage and link to the instrument anchor.\n2) Exact lexical/anchor cues (case-insensitive): issuance verbs/phrases: /\\bissued\\b/, /\\bissued\\s+and\\s+sold\\b/, /\\bwe\\s+issued\\b/, /\\bissued\\s+%\\b/, instrument types: /senior\\s+notes|notes|note|term\\s+loan|loan|seller\\s+note|revolver|debentures/i.\n3) Pattern to detect percentages attached to issuance: numeric percentage token immediately adjacent or within ±3 tokens of issuance-verb + instrument anchor (e.g., \"issued 2.250% Senior Notes\"). Regex example to match pattern: /(issued|we\\s+issued|issued\\s+and\\s+sold)\\s+([0-9]+(?:\\.[0-9]+)?%|[0-9]+(?:\\.[0-9]+)?\\s*percent)\\s+([A-Za-z ]*(note|notes|senior|loan|debenture))/i.\n4) Association window: require both percentage token and instrument-anchor in same sentence OR instrument-anchor in previous sentence (antecedent allowed up to ±1 sentence and <= 40 token span). If instrument-anchor present, require percentage within <=12 tokens of the anchor in same sentence; if anchor in prior sentence allow <=40 token cross-boundary span.\n5) Mapping & precedence: when matched, deterministically assign DebtInstrumentInterestRateStatedPercentage and attach instrument identity (e.g., 'Senior Notes') as anchor metadata. This mapping takes precedence over generic percentage tags (spread, concentration, statutory tax) and over generic interest-rate fallbacks. If both 'margin/spread' cues and direct issuance percentage co-occur (rare), prefer this issuance-stated-rate mapping but log 'rate-vs-spread-conflict' for QA.\n6) Same-sentence numeric siblings: if issuance phrase presents more than one percentage (range or two comparative percentages) within the same issuance-clause, map each to DebtInstrumentInterestRateStatedPercentage and preserve order/association to instrument; if percentages describe different instruments in same sentence, link each percentage to the nearest instrument anchor by token-distance.\n7) Unit-tests/examples:\n   - \"we issued 2.250% Senior Notes\" -> 2.250% = DebtInstrumentInterestRateStatedPercentage (anchor: Senior Notes).\n   - \"Issued 6.00% term loan and 5.25% revolver\" -> 6.00% -> DebtInstrumentInterestRateStatedPercentage (term loan), 5.25% -> DebtInstrumentInterestRateStatedPercentage (revolver).\n8) Logging: record issuance-verb span, percentage span(s), instrument-anchor span(s), assigned_tag, and attached_bullet_id for traceability.\n[ctx-00006] helpful=1 harmful=0 :: [ctx-xxxx] helpful=0 harmful=0 :: Share-based compensation mapping (atomic heuristics to disambiguate 'recognized' vs 'vested' vs 'expected to be recognized' and 'weighted-average period' vs 'award vesting period')\n\nPurpose: deterministically map numeric tokens in share-based-compensation disclosures to the correct accounting-measure tags by matching measurement verbs/phrases and period semantics rather than relying on lexically-similar tag names.\n\n1) Exact lexical cue groups (case-insensitive regexes):\n   - Recognized/Expense cues -> /(\\brecognized\\b|\\brecorded\\b|\\bexpensed\\b|\\bwas\\s+recognized\\b|\\bwere\\s+recognized\\b|\\bcompensation\\s+expense\\b)/i\n   - Vested + fair-value cues -> /\\bvested\\b.*?(fair\\s*value|total\\s+fair\\s+value)|(?:fair\\s*value).*?vested/i\n   - Unrecognized + expected-to-be-recognized period cues -> /unrecogniz(?:ed|ance)|compensation\\s+cost\\s+not\\s+yet\\s+recognized|not\\s+yet\\s+recognized\\s+compensation|total\\s+unrecognized\\s+compensation\\b/i AND /(expected\\s+to\\s+be\\s+recognized|expected\\s+to\\s+be\\s+recognized\\s+over|will\\s+be\\s+recognized\\s+over|weighted-?average\\s+period)/i\n   - Award-vesting-period lexical forms (to avoid mis-mapping) -> /(?:award|vesting|vesting\\s+period|award\\s+vests|vesting\\s+schedule)\\b/i\n   - Weighted-average qualifier -> /weighted-?average\\s+period|weighted-?average\\s+remaining\\s+period\\b/i\n\n2) Token-window & association policy:\n   - Numeric tokens within the same sentence are primary; allow antecedent resolution to previous sentence only if an anaphor ('these awards', 'such awards', 'the unrecognized cost') exists and antecedent span <= 40 tokens.\n   - For 'unrecognized' + 'expected to be recognized' mapping, require both an unrecognized-cost cue and a period-phrase cue (e.g., 'expected to be recognized over a weighted-average period of X years') within ±12 tokens of the numeric token OR in the same clause.\n   - For 'recognized' mapping, require a recognized/recorded/expensed cue within ±8 tokens of the numeric token.\n   - For 'vested fair value' mapping, require explicit 'vested' and 'fair value' cues co-occurring within ±6 tokens of the numeric token (both cues required). Presence of only 'vested' without 'fair value' should not auto-map to VestedInPeriodTotalFairValue.\n\n3) Deterministic mapping rules & precedence (apply in order):\n   A) If numeric + (unrecognized-cost cue) + (expected-to-be-recognized OR weighted-average qualifier) -> assign EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognizedPeriodForRecognition1 for the PERIOD numeric tokens and EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognized for related AMOUNT tokens (if present). Do NOT map to award-vesting-period tags even if 'period' appears; add anchor note recording 'weighted-average period for recognition'.\n   B) Else if numeric + recognized/recorded/expensed cue (verb forms above) -> assign AllocatedShareBasedCompensationExpense (map to expense/allocated tag). This captures sentences like 'The Company recognized $X of share-based compensation during the [period]'.\n   C) Else if numeric + BOTH 'vested' AND 'fair value' cues -> assign ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsVestedInPeriodTotalFairValue (vested-in-period total fair value tag).\n   D) Else if numeric + 'vested' cue ONLY (no 'fair value') -> do NOT auto-assign vested-fair-value tag; prefer human-review or consider other expense cues in sentence; log as 'vested-no-fairvalue-ambiguous'.\n   E) Else if numeric contains 'weighted-average' but no unrecognized-cost/unrecognized cue -> prefer human review: do NOT assume award-vesting-period. Only map to ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1 if explicit 'award-level vesting schedule' language appears (e.g., 'each award vests over X years' or 'vesting period of each award is X years').\n\n4) Anti-pattern rule (atomic): never map the phrase 'weighted-average period' found in context of 'unrecognized compensation cost' to an award vesting-period tag. The token window check in 2) and precedence in 3) enforce this.\n\n5) Unit-tests/examples to add (atomic):\n   - 'The Company recognized $3.2 million of share-based compensation during the three months ended March 31, 2018.' -> $3.2M = AllocatedShareBasedCompensationExpense.\n   - 'Total unrecognized compensation cost related to nonvested awards expected to be recognized over a weighted-average period of 2.34 years.' -> 2.34 years = EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognizedPeriodForRecognition1 (and the unrecognized amount maps to NonvestedAwardsTotalCompensationCostNotYetRecognized if present).\n   - 'The total fair value of awards that vested during the period was $X.' -> $X = VestedInPeriodTotalFairValue (requires explicit 'fair value' + 'vested').\n   - 'The weighted-average remaining contractual term of options outstanding is X years' (explicit award-vesting schedule language) -> map to ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1 only when clause clearly describes award vesting schedule.\n\n6) Logging & QA: attach to each auto-assigned annotation: matched_cue_spans (which of the cue groups matched), mapping-rule-id ctx-xxxx, applied_precedence_clause (A/B/C), and a 'semantic_role' field with values { 'expense/allocated', 'vested_fair_value', 'recognition_period' }. Flag any sentence where 'recognized' and 'vested' both appear with conflicting numeric tags as 'recognized-vs-vested-conflict' and queue for human review.\n\n7) Implementation note: run this mapping before generic lexical fallbacks that equate 'period' -> vesting-period or 'recognized' -> vested; this deterministic module must consult tag definitions if available to verify 'PeriodForRecognition' vs 'AwardVestingPeriod' suffix semantics.\n[ctx-00008] helpful=0 harmful=0 :: [ctx-00013a] helpful=1 harmful=0 :: Customer/Channel/Distributor revenue-anchor classifier + precedence (atomic heuristic) - Purpose: deterministically map percentages that quantify a share of revenue (customer concentration) to ConcentrationRiskPercentage1 and avoid mis-mapping 'of X' percentages that refer to non-revenue metrics or other percentage concepts. - Exact lexical cue groups (case-insensitive regexes):   * CUSTOMER/DISTRIBUTOR/CHANNEL ENTITY CUES: /\\b(customer|customers|client|clients|clientele|distributor|distributors|reseller|resellers|channel|channel\\s+partner(s)?|partner(s)?|our\\s+largest\\s+customer|our\\s+two\\s+largest|one\\s+of\\s+our\\s+distributors)\\b/   * REVENUE-LINK CUES: /\\b(of\\s+(total\\s+)?(net\\s+)?revenue|of\\s+revenues|of\\s+revenue|accounted\\s+for|represented\\s+|represented\\s+(approximately|about)?|comprised\\s+of|constituted)\\b/   * CHANNEL-FORM CUES: /\\bthrough\\s+our\\s+(?:channel|distribution|reseller)\\s+(?:network|partners)|via\\s+our\\s+distributors\\b/ - Token association & antecedent windows:   1) Primary rule: assign ConcentrationRiskPercentage1 when a percentage token appears within ±10 tokens of at least one CUSTOMER/DISTRIBUTOR/CHANNEL ENTITY CUE AND within ±10 tokens of at least one REVENUE-LINK CUE in the same sentence.   2) Ancillary antecedent: allow 'the Channel/Distributor' or 'the customer' as anaphor resolved to an explicit named entity in the previous sentence up to ±1 sentence away (antecedent span <= 40 tokens). In that case apply mapping if combined token-distance from numeric to resolved entity cue + to revenue-link cue <= 50 tokens. - Precedence / conflict resolution (apply deterministically in order):   A) If ctx-00013a condition satisfied -> assign ConcentrationRiskPercentage1 and attach ctx-00013 (or ctx-00013a) as attached_bullet_id; this mapping MUST override other generic percentage heuristics (spread, per-annum interest, statutory tax) except when another heuristic has a stronger explicit anchor (e.g., 'per annum' + instrument anchor for interest-rate issuance).   B) If ctx-00013a condition partially satisfied (e.g., 'of revenue' present but no explicit customer/distributor entity; or customer entity present but no revenue-link) -> DO NOT auto-assign; mark as 'potential-concentration-ambiguous' and queue for human review (log candidate spans).   C) If percentage also matches other high-specificity heuristics (e.g., 'per annum' + loan instrument OR 'LIBOR plus' pattern OR 'federal statutory' + reconciliation anchor): compare anchor-specificity scores (anchors: statutory-reconciliation=10, per-annum+instrument=9, customer+revenue=8). Tie-breaker: require ctx-00013a to beat other heuristics by at least 1 point to auto-assign; otherwise defer to the higher-score mapping. Log all tie events as 'percent-anchor-conflict' with spans & scores. - Negative guardrails (explicit do-not-map patterns): do NOT map percentages to ConcentrationRiskPercentage1 when any of the following appear within ±6 tokens of the percent: 'per annum', 'APR', 'margin', 'spread', 'LIBOR', 'ABR', 'statutory', 'effective tax', 'impairment', 'allocation', 'proration', 'of assets', 'of accounts', 'of consideration', 'of purchases', 'of backlog'. If both a revenue-anchor and a prohibited cue co-occur, treat as conflict and follow precedence rules above. - Logging & traceability: on every auto-assignment attach fields { attached_bullet_id: 'ctx-00013'|'ctx-00013a', match_score: float(0..1), matched_cue_spans: [ { cue_text, start_token, end_token } ], numeric_span: { start_token, end_token }, provenance: { module:'ctx-00013a', timestamp } }. If mapping deferred, attach reason code 'potential-concentration-ambiguous' or 'percent-anchor-conflict' and queue example for human review. - Unit-tests (atomic examples):   1) Positive: 'Tech Data accounted for 32% of total net revenue for the year' -> 32% = ConcentrationRiskPercentage1 (attach ctx-00013).   2) Positive-channel: '32% of revenue through our channel network' -> 32% = ConcentrationRiskPercentage1.   3) Positive-distributor: 'One of our distributors accounted for approximately 27% of our revenue' -> 27% = ConcentrationRiskPercentage1.   4) Negative-ambiguous: '32% of our sales were in Europe' (no customer entity) -> DO NOT auto-assign; flag 'potential-concentration-ambiguous'.   5) Negative-conflict: 'The interest rate is 4.00% per annum and we estimate 4.00% of revenue from one customer' (both forms) -> separate mappings: first -> DebtInstrumentInterestRateStatedPercentage (per-annum wins for that percent); second -> if percent tokens are identical ensure numeric-token disambiguation by proximity; if same token ambiguous, mark for review and log 'percent-anchor-conflict'. - Implementation note: integrate this classifier as an early percentage-disambiguation step (run before generic percentage fallbacks). Ensure post-decision validator (err-00003) auto-attaches ctx-00013 when match_score >= MATCH_THRESHOLD and raises QA record when classifier defers but playbook heuristic would have matched. Record all ambiguous/conflict examples in weekly QA dashboard.\n[ctx-00009] helpful=1 harmful=1 :: Atomic heuristic: Prefer instrument-class-specific fair-value tags for debt instruments (e.g., LongTermDebtFairValue) over generic DebtInstrumentFairValue when instrument-class can be determined.\n\nPurpose: avoid mapping 'fair value' amounts for named debt instruments to a generic debt-instrument fair-value tag when a more specific class-level fair-value tag exists in the taxonomy.\n\nExact lexical anchors (case-insensitive regexes, apply within same sentence unless indicated):\n- Instrument name cues: /\\bsenior\\s+note(s)?\\b/, /\\bnotes\\s+due\\b/, /\\bnote\\b/, /\\bterm\\s+loan(s)?\\b/, /\\bdebenture(s)?\\b/, /\\brevolver\\b/.\n- Maturity cues: /due\\s+in\\s+\\d{4}\\b/, /due\\s+\\w+\\s+\\d{1,2},?\\s+\\d{4}\\b/, /matures?\\s+in\\s+\\d+\\s+year(s)?\\b/, /matures?\\s+on\\b/, /maturity\\s+date\\b/.\n- Long-term indicator: explicit year >= (current_year + 1) OR any textual 'long-term', 'long term', 'non-current', 'not due within 12 months'. Short-term indicator: 'current portion', 'due within 12 months', 'due next year', or explicit 'current'.\n- Fair-value cue: /fair\\s+value(s)?\\b/ or variants 'carrying value at fair value', 'were $X at fair value'.\n\nAssociation & token-window rules:\n1) Primary association window: require fair-value cue and numeric currency token to be in same sentence; require instrument-name cue in same sentence OR in immediately preceding sentence (±1 sentence) with antecedent span <= 40 tokens.\n2) If maturity-year token (e.g., 'due 2026', 'due 2046') appears, parse year and compute term relative to report date when available; if explicit maturity > 12 months from reporting period or maturity-year > reporting_year (or textual 'long-term') -> classify as LONG_TERM; if explicit 'current portion' or 'due within 12 months' -> classify as SHORT_TERM.\n\nDeterministic mapping & precedence (apply in order):\nA) If fair-value cue + instrument anchor present AND instrument_class==LONG_TERM ->\n   - If taxonomy contains a tag named LongTermDebtFairValue (or equivalent class-specific fair-value tag), assign LongTermDebtFairValue and attach evidence (instrument-anchor span, maturity span, fair-value cue span). This mapping MUST override assignment to DebtInstrumentFairValue.\nB) Else if fair-value cue + instrument anchor present AND instrument_class==SHORT_TERM ->\n   - If taxonomy contains a ShortTermDebtFairValue (or similar) assign that specific tag; else proceed to fallback (C).\nC) Fallback: if no class-specific fair-value tag exists in taxonomy -> assign DebtInstrumentFairValue but attach note: { recommended_specific_tag: '<derived_class>DebtFairValue', reason: 'specific_tag_missing_in_taxonomy', instrument_class } and queue example for playbook update.\n\nTie-breaker: when multiple candidate tags exist (generic and one-or-more class-specific), choose the most specific tag matching the detected instrument class. Specificity order (high->low): class-specific fair-value (LongTermDebtFairValue / ShortTermDebtFairValue) > instrument-type-specific fair-value (e.g., SeniorNotesFairValue if present) > generic DebtInstrumentFairValue.\n\nEdge cases & ambig: If instrument anchor ambiguous (e.g., 'notes' without maturity or 'the notes' and no antecedent in ±1 sentence), do NOT auto-prefer class-specific tag; instead assign DebtInstrumentFairValue and flag 'instrument-class-ambiguous' for human review and training capture.\n\nUnit-tests (atomic examples; add to regression suite):\n1) Positive - long-term: 'The fair value of our Senior Notes due 2026 was $487 million.' -> $487M = LongTermDebtFairValue (attach instrument-anchor 'Senior Notes due 2026', maturity parsed 2026 => LONG_TERM).\n2) Positive - long-term: 'The fair value of Senior Notes due 2046 was $397 million.' -> $397M = LongTermDebtFairValue.\n3) Short-term explicit: 'The fair value of our notes maturing in six months was $2.5 million.' -> if parsed as SHORT_TERM -> ShortTermDebtFairValue (if present) else DebtInstrumentFairValue and log fallback.\n4) Ambiguous instrument: 'The fair value was $X for the notes.' (no antecedent) -> $X = DebtInstrumentFairValue; attach flag 'instrument-class-ambiguous'.\n5) Fallback logging: if LongTermDebtFairValue tag not present in taxonomy but instrument class computed LONG_TERM -> assign DebtInstrumentFairValue and create derived_bullet / playbook-update suggestion recommending LongTermDebtFairValue with matched cues.\n\nLogging & traceability (integrate with err-00003 heuristic-use logging rules):\n- Always attach { attached_bullet_id, match_score, matched_cue_spans: [instrument_anchor, maturity_span (if any), fair_value_cue], numeric_span, instrument_class: 'LONG_TERM'|'SHORT_TERM'|'UNKNOWN', provenance } to every auto-assigned fair-value mapping.\n- If class-specific tag selected, record attached_bullet_id == playbook-bullet-id-for-class-specific; if no such bullet exists, create derived_bullet record and queue for author review.\n\nImplementation notes:\n- Implement as an early post-processing precedence step that runs immediately after lexical fair-value detection and before generic DebtInstrumentFairValue assignment.\n- Use deterministic regexes for anchor detection and a small parser for common maturity forms ('due YYYY', 'matures in N years', explicit dates). If report_date is available, compute >12 months criterion; otherwise rely on textual 'long-term'/'long term' or year-difference heuristic.\n- Add these unit-tests to CI and include examples in weekly 'derived-bullet suggestions' dashboard.\n\nRationale: this atomic rule directly closes the gap identified in the reflection by ensuring the pipeline prefers LongTermDebtFairValue for senior notes with maturities beyond 12 months, preventing systematic misassignment to the generic DebtInstrumentFairValue tag.\n[ctx-00010] helpful=2 harmful=0 :: Unit-and-anchor validation rule (atomic deterministic post-check for every numeric-tag assignment):\n\n1) Purpose: prevent tag assignments that conflict with the numeric token's measurement unit or that lack the tag's required lexical anchors (fixes margin-vs-rate, capacity-vs-outstanding, authorized-vs-issued/outstanding, par-per-share vs price confusions).\n\n2) Step A — Normalize numeric token unit: classify numeric_token.unit ∈ {PERCENT, CURRENCY, SHARES_COUNT, PER_SHARE_CURRENCY, YEARS, OTHER}. Use explicit markers: '%' or 'percent'→PERCENT; '$'/'dollar'→CURRENCY; tokens matching share-count patterns (\\d[\\d,]*\\s*(shares|share))→SHARES_COUNT; patterns like '$0.01 per share' or 'per share' with currency→PER_SHARE_CURRENCY.\n\n3) Step B — Required-unit table (exact mapping; do NOT assign tag unless numeric unit ∈ allowed_units):\n   - DebtInstrumentBasisSpreadOnVariableRate1: allowed_units = {PERCENT}; required_anchors = { 'margin','spread','plus','over','LIBOR','ABR','index' } (anchor must appear within ±6 tokens or same sentence).\n   - DebtInstrumentInterestRateStatedPercentage: allowed_units = {PERCENT}; required_anchors = { 'per annum','per year','annual','APR','interest rate','% per annum' } AND instrument-anchor (note/loan/term loan/seller note) within ±12 tokens or antecedent ±1 sentence.\n   - LineOfCreditFacilityMaximumBorrowingCapacity: allowed_units = {CURRENCY}; required_anchors = { 'credit facility','revolver','in an aggregate principal amount of','up to','commitment','maximum amount' } (same sentence or previous sentence antecedent allowed up to ±1 sentence).\n   - LineOfCreditFacilityRemainingBorrowingCapacity / LineOfCreditFacilityCurrentBorrowingCapacity: allowed_units = {CURRENCY}; required_anchors = { 'amount available under the facility','amount available','borrowing base','available to borrow','borrowing base','amount available under the credit facility','was available under the facility','totaled' } (explicit remaining-amount cue within ±8 tokens required).\n   - CommonStockSharesAuthorized: allowed_units = {SHARES_COUNT}; required_anchors = { 'authorized','authorized shares','authorized to issue' } (anchor within ±8 tokens or antecedent 'the Plan' with antecedent resolution).\n   - CommonStockSharesOutstanding: allowed_units = {SHARES_COUNT}; required_anchors = { 'outstanding','shares outstanding','outstanding shares' } (±8 tokens).\n   - CommonStockParOrStatedValuePerShare: allowed_units = {PER_SHARE_CURRENCY}; required_anchors = { 'par value','par per share','stated value per share' } (±8 tokens).\n\n4) Step C — Deterministic tie-break rules for frequent conflicts:\n   a) Percent token with both spread-anchor AND 'per annum' present within ±6 tokens: if 'over|plus|above' + LIBOR/ABR/index present → assign DebtInstrumentBasisSpreadOnVariableRate1; else if explicit 'per annum' + instrument-anchor present and no explicit 'over LIBOR' → assign DebtInstrumentInterestRateStatedPercentage; if still ambiguous → DO NOT auto-assign; flag 'rate-vs-spread-conflict' for human review.\n   b) Currency token near 'availability' without explicit 'amount available' or 'borrowing base' but with a prior facility cap anchor in previous sentence → map to LineOfCreditFacilityMaximumBorrowingCapacity (comparative case) only if comparative-language ('may be less than','as a result of','for certain subsidiaries') present; otherwise DO NOT auto-assign and flag 'ambiguous-availability'.\n   c) Share-count token with ambiguous cue 'shares' alone: prefer plan-specific/issuance detection (if plan-anchor or offering-anchor exists). If 'authorized' present → CommonStockSharesAuthorized; if 'issued' present → BusinessAcquisitionEquityInterestsIssuedOrIssuableNumberOfSharesIssued or StockIssuedDuringPeriodSharesNewIssues per issuance heuristics; if 'outstanding' present → CommonStockSharesOutstanding. If none present → DO NOT auto-assign and flag 'shares-ambiguous'.\n\n5) Step D — Enforcement & logging: if assigned_tag violates required_units OR required_anchor absent (within allowed windows), then reject the auto-assignment and instead: (a) emit a trace record { numeric_span, attempted_tag, unit_detected, missing_anchor_list, action:'rejected' }; (b) if one of the tie-break conflict rules applies and resolves deterministically, allow assignment and attach reason_code; (c) if unresolved, attach reason_code 'unit-anchor-mismatch' and queue for human review; also attach matched cue spans if any.\n\n6) Step E — Unit-tests to add (atomic examples from reflection):\n   - 'an applicable margin that varies from 0.50 percent to 2.75 percent' -> both percents (PERCENT) + 'margin' -> DebtInstrumentBasisSpreadOnVariableRate1.\n   - 'borrowing capacity of $250.0 million for the credit facility' -> $250.0M (CURRENCY) + facility-capacity anchor -> LineOfCreditFacilityMaximumBorrowingCapacity.\n   - '100,000,000 authorized shares of common stock' -> 100,000,000 (SHARES_COUNT) + 'authorized' -> CommonStockSharesAuthorized.\n   - 'par value of $0.01 per share' -> $0.01 per share (PER_SHARE_CURRENCY) + 'par value' -> CommonStockParOrStatedValuePerShare.\n\n7) Implementation notes: run this validator as an idempotent deterministic post-check immediately after a candidate tag decision and before final annotation commit; attach trace fields { unit_check_passed:bool, reason_code, matched_anchor_spans, validator_version } to every annotation. Thresholds: no probabilistic fallbacks here — if validator cannot confirm required anchor/unit constraints, prefer human-review rather than risky auto-mapping.\n[ctx-00011] helpful=0 harmful=0 :: Repurchase-program atomic mapping (exact cues, windows, precedence, unit-validation, logging)\n\nPurpose: deterministically map numeric tokens in share repurchase and related compensation sentences to the most specific US GAAP tags: TreasuryStockAcquiredAverageCostPerShare, TreasuryStockValueAcquiredCostMethod, StockRepurchaseProgramRemainingAuthorizedRepurchaseAmount1, and plan/award grant-count tags (e.g., ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod).\n\nExact lexical cues & regexes (case-insensitive):\n- Average-per-share cues (map -> TreasuryStockAcquiredAverageCostPerShare): /(?:average\\s+price|average\\s+cost|average\\s+per\\s+share|average\\s+purchase\\s+price|average\\s+price\\s+paid)\\b/i\n- Aggregate-cost / total cash paid cues (map -> TreasuryStockValueAcquiredCostMethod): /(?:aggregate\\s+cost|aggregate\\s+amount|total\\s+cost|total\\s+amount\\s+paid|total\\s+cash\\s+paid|amount\\s+spent\\s+to\\s+repurchase)\\b/i\n- Remaining-authorized / available-for-repurchase cues (map -> StockRepurchaseProgramRemainingAuthorizedRepurchaseAmount1): /(?:remain(?:ed)?\\s+available|remaining\\s+available|available\\s+for\\s+further\\s+purchases|available\\s+for\\s+repurchase|remaining\\s+authorized\\s+to\\s+repurchase)\\b/i\n- Grant-count RSU/award cues (map -> ShareBasedCompensation...GrantsInPeriod): /(?:restricted\\s+stock\\s+units|RSU[s]?|awards?\\s+granted|grants?\\s+in\\s+period|granted\\s+under\\s+the\\s+plan)\\b/i\n\nUnit classification rules (normalize numeric token): PER_SHARE_CURRENCY (e.g., \"$15.09 per share\" or currency token with nearby 'per share'), CURRENCY (dollar amounts), SHARES_COUNT (bare integer counts or 'units'/'shares' tokens), PERCENT, YEARS.\n\nAssociation windows & antecedents:\n- Primary association: require cue regex match to be within ±8 tokens of the numeric token in the same sentence.\n- Allow antecedent plan/program anchor in previous sentence (±1 sentence) for 'the Program'/'the Plan' references if antecedent span <= 40 tokens.\n\nDeterministic mapping & precedence (apply in order):\n1) If numeric unit == PER_SHARE_CURRENCY AND average-per-share cue matches -> assign TreasuryStockAcquiredAverageCostPerShare. This wins over any generic 'price per share' sale/issuance tags when repurchase-program or 'repurchase'/'repurchased'/'stock repurchase' anchor present within same sentence or prior sentence.\n2) Else if numeric unit == CURRENCY AND aggregate-cost cue matches (or verbs 'paid', 'spent' adjacent) -> assign TreasuryStockValueAcquiredCostMethod.\n3) Else if numeric unit == CURRENCY AND remaining-authorized cue matches -> assign StockRepurchaseProgramRemainingAuthorizedRepurchaseAmount1.\n4) Else if numeric unit == SHARES_COUNT (or token like 'units') AND RSU/award-granted cue matches -> assign ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod (or the most specific grants-in-period tag available). If 'restricted stock units' (RSU) lexical form appears, prefer RSU-specific grants tag if taxonomy contains it.\n\nTie-breakers & anti-pattern prevention (atomic):\n- Do NOT map a 'per share' average-repurchase price to generic SaleOfStockPricePerShare or issuance-price tags when 'repurchase'/'repurchased'/'program' cues are present anywhere in ±1 sentence; repurchase-specific tag takes precedence.\n- Do NOT map an aggregate cash amount with 'paid' to a generic acquisition or consideration tag if 'repurchase' or 'repurchased' anchor present (prefer TreasuryStockValueAcquiredCostMethod).\n- If both 'average price' and an adjacent '$' total appear in the same sentence, map each numeric independently by unit cues (per-share currency -> per-share tag; currency aggregate -> aggregate cost tag). If ambiguous (no explicit 'per share' phrase), require PER_SHARE_CURRENCY detection (currency + explicit 'per share') to assign per-share; otherwise map to aggregate/currency tag and flag 'possible-missing-per-share-cue' for review.\n\nUnit-and-anchor validation (post-check):\n- Before final commit, validate assigned tag unit compatibility (e.g., TreasuryStockAcquiredAverageCostPerShare requires PER_SHARE_CURRENCY; TreasuryStockValueAcquiredCostMethod requires CURRENCY; StockRepurchaseProgramRemainingAuthorizedRepurchaseAmount1 requires CURRENCY; GrantsInPeriod requires SHARES_COUNT). If mismatch, reject auto-assignment and flag for human review.\n\nLogging & traceability (must attach to annotation):\n{ attached_bullet_id: '<new-repurchase-bullet-id>', matched_cue_spans: [...], numeric_span, unit_detected, match_score (deterministic binary or heuristic score), provenance:{module:'repurchase-mapping-v1', timestamp} }\n- Record reason codes when tie-breaks / overrides applied (e.g., 'repurchase-over-sale-precedence').\n\nUnit-tests / minimal examples to add (atomic):\n- '$15.09 was the average price per share paid to repurchase shares.' -> $15.09 (PER_SHARE_CURRENCY) = TreasuryStockAcquiredAverageCostPerShare.\n- '$1.1 million aggregate cost of shares repurchased' -> $1.1M (CURRENCY) = TreasuryStockValueAcquiredCostMethod.\n- '$13.9 million remained available for further purchases under the stock repurchase program' -> $13.9M (CURRENCY) = StockRepurchaseProgramRemainingAuthorizedRepurchaseAmount1.\n- '131,600 restricted stock units were granted during the period' -> 131,600 (SHARES_COUNT) = ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod.\n- 'We repurchased 10,000 shares at an average price of $12.50 per share for a total of $125,000' -> 10,000 (SHARES_COUNT) mapped per repurchase event if present; $12.50 = TreasuryStockAcquiredAverageCostPerShare; $125,000 = TreasuryStockValueAcquiredCostMethod.\n\nIntegration notes: implement as an early deterministic lexical-postprocessing module, run before generic 'per share' or 'sold' fallbacks. Wire to err-00003 heuristic-use logging conventions so the mapping always attaches playbook bullet id and matched spans. Enforce unit-and-anchor validator (ctx-00010) compatibility.\n[ctx-00012] helpful=1 harmful=0 :: {'id': 'ctx-000XX-grant-date-fair-value-per-share', 'title': 'Grant-date fair value per share -> Award-specific WeightedAverageGrantDateFairValue (atomic)', 'purpose': 'Map currency-per-share phrases that state a grant-date fair value to the most specific weighted-average grant-date-fair-value tag for the award class (options vs equity instruments other than options).', 'exact_lexical_cues': ['/grant\\\\s+date\\\\s+fair\\\\s+value/i', '/weighted-?average\\\\s+grant\\\\s+date\\\\s+fair\\\\s+value/i', '/grant\\\\s+date\\\\s+fair\\\\s+value\\\\s+of/i'], 'award_type_cues': {'options': ['/option(s)?\\\\b/', '/stock\\\\s+option(s)?\\\\b'], 'restricted_equity': ['/restricted\\\\s+share(s)?\\\\b/', '/restricted\\\\s+stock\\\\b/', '/RSU(s)?\\\\b/', '/restricted\\\\s+stock\\\\s+units\\\\b/', '/awards?\\\\s+other\\\\s+than\\\\s+options/i', '/other\\\\s+than\\\\s+options/']}, 'association_window': \"Require a PER_SHARE_CURRENCY numeric token (currency + explicit 'per share' or 'per common share' phrase) within ±6 tokens of a grant-date-fair-value cue. If award-type cue appears anywhere in same sentence (or antecedent sentence ±1 with antecedent span <=40 tokens) treat that award-class as the anchor.\", 'unit_validation': \"PER_SHARE_CURRENCY required (currency symbol/word plus 'per share' or equivalent). If currency present but no 'per share' phrase, do NOT auto-assign per-share fair-value tag; flag 'missing-per-share-cue'.\", 'precedence': \"If award-type cue == options -> assign WeightedAverageGrantDateFairValuePerShareForOptions tag (or taxonomy-equivalent). Else if award-type cue == restricted_equity -> assign WeightedAverageGrantDateFairValuePerShareForEquityInstrumentsOtherThanOptions. These class-specific assignments override generic 'PricePerShare' or sale/issuance price tags.\", 'tie_breaker': \"If both option and restricted cues present, prefer explicit phrasing 'option' or 'stock option' when within ±4 tokens of numeric; else prefer the cue closest by token-distance to numeric.\", 'logging_and_trace': 'Attach { attached_bullet_id, match_score, matched_cue_spans:[grant-date-cue, award-type-cue], numeric_span, unit_detected, provenance }. If no playbook bullet exists for the detected specific tag, create derived_bullet and queue for author review.', 'unit_tests': ['\"grant date fair value of $16.25 per share\" + \\'restricted stock units\\' in sentence -> $16.25 per share = WeightedAverageGrantDateFairValuePerShareForEquityInstrumentsOtherThanOptions', '\"weighted-average grant date fair value of $20.90 per share\\' in RSU award table\" -> $20.90 = WeightedAverageGrantDateFairValuePerShareForEquityInstrumentsOtherThanOptions', '\"grant date fair value of $3.50 per share\\' in sentence mentioning \\'stock option\\'\" -> $3.50 = WeightedAverageGrantDateFairValuePerShareForOptions', '\"grant date fair value $2.00\\' but no \\'per share\\' present\" -> flag \\'missing-per-share-cue\\' and require human review']}\n[ctx-00013] helpful=0 harmful=0 :: {'id': 'ctx-000XX-aggregate-intrinsic-options-exercised', 'title': 'Aggregate/Total intrinsic value + options exercised -> OptionsExercisesInPeriodTotalIntrinsicValue (atomic)', 'purpose': 'Deterministically map currency amounts described as aggregate/total intrinsic value of options exercised during the period to OptionsExercisesInPeriodTotalIntrinsicValue.', 'exact_lexical_cues': ['/aggregate\\\\s+intrinsic\\\\s+value/i', '/total\\\\s+intrinsic\\\\s+value/i', '/aggregate\\\\s+intrinsic\\\\s+value\\\\s+of\\\\s+stock\\\\s+options/i', '/intrinsic\\\\s+value\\\\s+of\\\\s+options\\\\s+exercis(ed|es)?/i'], 'exercise_cues': ['/option(s)?\\\\s+exercis(ed|es)?\\\\b/', '/stock\\\\s+options\\\\s+exercis(ed|es)?\\\\b/', '/exercised\\\\s+during\\\\s+the\\\\s+period\\\\b/'], 'association_window': 'Require a CURRENCY numeric token within ±8 tokens of an aggregate/total-intrinsic cue AND an exercise_cue in the same sentence (or antecedent sentence ±1 if exercise event is described across sentences).', 'unit_validation': 'CURRENCY required. If unit != CURRENCY reject and queue for review.', 'precedence': \"This mapping overrides any generic 'aggregate' -> PaymentsToAcquireBusinessesGross or other acquisition-fallbacks when 'options exercised' anchor present.\", 'tie_breaker': \"If 'aggregate intrinsic value' appears alongside multiple numeric currency siblings, assign the numeric closest to the 'intrinsic value' cue; if multiple currency tokens are equidistant, prefer the one co-occurring with 'exercised' or with a sentence/time qualifier 'during the period'.\", 'logging_and_trace': \"Attach { attached_bullet_id, matched_cue_spans:[intrinsic-cue, exercised-cue], numeric_span, confidence, provenance }. Queue examples where 'intrinsic' matches but 'exercised' cue missing for human-review as 'intrinsic-no-exercise-anchor'.\", 'unit_tests': ['\"Aggregate intrinsic value of stock options exercised during the period was $572,000\" -> $572,000 = OptionsExercisesInPeriodTotalIntrinsicValue', '\"The total intrinsic value of options exercised was $1,234,567 for the year\" -> $1,234,567 = OptionsExercisesInPeriodTotalIntrinsicValue', '\"Intrinsic value totaled $X\" with no \\'exercised\\' anchor -> flag \\'intrinsic-no-exercise-anchor\\' for review']}\n[ctx-00014] helpful=0 harmful=0 :: {'id': 'ctx-000XX-grants-in-period-counts', 'title': \"Numeric counts + 'granted' + award-type -> GrantsInPeriod (atomic)\", 'purpose': \"Map explicit integer counts of shares/units that are stated as 'granted' to the most specific grants-in-period tag for the award class (restricted shares, RSUs, other equity awards).\", 'exact_lexical_cues': ['/granted\\\\b/', '/were\\\\s+granted\\\\b/', '/awards?\\\\s+granted\\\\b/', '/grants?\\\\s+in\\\\s+the\\\\s+period\\\\b/'], 'award_type_cues': {'restricted_equity': ['/restricted\\\\s+share(s)?\\\\b/', '/restricted\\\\s+stock\\\\b/', '/RSU(s)?\\\\b/', '/restricted\\\\s+stock\\\\s+units\\\\b/'], 'other_awards': ['/awards?\\\\b/', '/units\\\\b/', '/shares\\\\b/']}, 'association_window': \"Require a SHARES_COUNT numeric token within ±6 tokens of a 'granted' cue and an award_type cue within same sentence or antecedent sentence ±1 (antecedent span <=40 tokens).\", 'unit_validation': \"SHARES_COUNT required (digits optionally followed by 'shares'/'units'). If numeric has currency unit or percent, reject assignment.\", 'precedence': \"If plan-anchor (plan name or 'the Plan') present ±1 sentence, prefer Plan-specific GrantsInPeriod tag. Award-class-specific grants tag overrides generic 'shares issued' or sale/issuance tags.\", 'tie_breaker': \"If numeric adjacency to both 'granted' and 'issued' cues: prefer 'granted' -> GrantsInPeriod; if both 'granted' and 'sold' appear, flag 'grant-vs-sale-conflict' and prefer human review.\", 'logging_and_trace': 'Attach { attached_bullet_id, matched_cue_spans:[granted-cue, award-type-cue, plan-anchor-if-any], numeric_span, unit_detected, provenance }. Log conflict cases and ambiguous antecedent-resolution examples.', 'unit_tests': ['\"There were 8,000 restricted shares granted under the Plan during the year\" -> 8,000 = GrantsInPeriod (restricted equity) with plan-anchor', '\"131,600 restricted stock units were granted during the period\" -> 131,600 = GrantsInPeriod (RSU)', '\"We granted 5,000 awards\" (no award-type) -> mark \\'grant-type-ambiguous\\' and queue for review unless plan-anchor specifies award class']}\n[ctx-00015] helpful=1 harmful=0 :: id: ctx-00015 :: Plain-facility-size default -> LineOfCreditFacilityCurrentBorrowingCapacity (atomic rule)\nPurpose: deterministically map plain descriptive facility-size currency mentions (\"a $X revolving credit facility\", \"a $X credit facility\", \"a $X revolver\") to LineOfCreditFacilityCurrentBorrowingCapacity by default, unless explicit contractual-capacity/commitment language is present that should map to LineOfCreditFacilityMaximumBorrowingCapacity.\nExact plain-facility lexical patterns (case-insensitive): /(a|an|the)?\\s*\\$?\\d{1,3}[\\d,]*(?:\\.\\d+)?\\s*(?:million|billion)?\\s+(revolv(?:ing)?\\s+credit\\s+facilit(?:y|ies)|credit\\s+facility|revolver|revolving\\s+facility)\\b/ (apply to numeric token sentence-level). Also accept patterns like 'a $X revolving facility' and 'a $X credit facility'.\nExplicit MAXIMUM/COMMITMENT override cues (case-insensitive): /\\b(up\\s+to|in\\s+an\\s+aggregate\\s+principal\\s+amount\\s+of|commitment(s)?\\b|maximum\\s+amount|maximum\\s+availability|commitment\\s+amount)\\b/ -> map to LineOfCreditFacilityMaximumBorrowingCapacity.\nExplicit REMAINING/AVAILABLE cues (map to current/remaining): /\\b(amount\\s+available\\s+under\\s+the\\s+faci?lity|was\\s+available\\s+under\\s+the\\s+facility|available\\s+for\\s+borrow|borrowing\\s+base|amount\\s+available)\\b/ -> map to LineOfCreditFacilityRemainingBorrowingCapacity/LineOfCreditFacilityCurrentBorrowingCapacity.\nAssociation windows and antecedent resolution:\n- Primary: apply pattern match in same sentence for numeric token and facility lexical anchor within ±8 tokens.\n- Antecedent: allow facility anchor in immediately preceding sentence (±1 sentence) when 'the facility'/'the revolver' anaphor is used and antecedent span <= 40 tokens.\nDefault mapping flow (deterministic, apply in order):\n1) If numeric token + explicit REMAINING/AVAILABLE cue within ±8 tokens -> assign LineOfCreditFacilityRemainingBorrowingCapacity.\n2) Else if numeric token + explicit MAXIMUM/COMMITMENT override cue within same sentence or antecedent sentence (±1) -> assign LineOfCreditFacilityMaximumBorrowingCapacity.\n3) Else if numeric token matches the plain-facility lexical pattern above (e.g., \"a $X revolving credit facility\") and no override cues matched -> ASSIGN LineOfCreditFacilityCurrentBorrowingCapacity (DEFAULT).\n4) Else if numeric token contains 'availability' alone (no 'amount available' or anchor) and no antecedent facility-capacity anchor -> DO NOT auto-assign; flag 'ambiguous-availability' for review.\nTie-breakers and conflicts:\n- If the same sentence contains both plain-facility description and explicit 'up to'/'in an aggregate principal amount of' adjacent to different numeric tokens, map each numeric to the cue to which it is nearest by token distance.\n- If the SAME numeric token is adjacent to both a plain-facility phrase and an explicit MAXIMUM/COMMITMENT cue, prefer MAXIMUM/COMMITMENT -> assign LineOfCreditFacilityMaximumBorrowingCapacity and log 'plain-size-overridden-by-maximum-cue'.\nUnit and anchor validation:\n- Require numeric unit = CURRENCY. If numeric token is not currency, reject and queue for review.\n- Attach anchor spans: facility_anchor_span and overriding_cue_span (if any) to annotation for traceability.\nUnit-tests (add to regression suite):\n- 'a $400 million revolving credit facility' -> $400M = LineOfCreditFacilityCurrentBorrowingCapacity. (fixes reported error)\n- 'revolving credit facilities in an aggregate principal amount of up to $225.0 million' -> $225.0M = LineOfCreditFacilityMaximumBorrowingCapacity.\n- 'the borrowing base under the credit facility is $425.0 million' -> $425.0M = LineOfCreditFacilityRemainingBorrowingCapacity.\n- 'availability under this credit facility may be less than $75 million as a result of outstanding letters of credit' (with prior anchor $75M) -> $75M = LineOfCreditFacilityMaximumBorrowingCapacity (comparative clause) and mark comparative mapping per ctx-00009 rules.\nLogging & QA fields to attach on each auto-assignment: { attached_bullet_id: 'ctx-00015', matched_pattern: 'plain-facility'|'max-override'|'remaining-cue', facility_anchor_span, overriding_cue_span (if any), numeric_span, match_score (deterministic 1.0), provenance: { module: 'ctx-00015', timestamp, pipeline_version } }.\nRationale: this atomic rule encodes the annotation convention used in the ground truth (plain facility-size descriptions default to current borrowing capacity) and enumerates the explicit override cues that indicate a maximum/commitment amount, removing the model's unsafe blanket mapping of facility size to maximum capacity.\n[ctx-00016] helpful=0 harmful=0 :: [ctx-00016] helpful=1 harmful=0 :: Currency-breakdown fallback for parent monetary facts (atomic heuristic)\nPurpose: deterministically map component currency-breakdowns (e.g., 'of which $X were denominated in U.S. dollars and $Y in other currencies') to the correct parent monetary tag when the taxonomy lacks a dedicated component tag, and to prefer component-level tags when they exist.\nExact lexical anchors (case-insensitive regexes):\n - parent-anchor cues (require one): /(?:outstanding\\s+letters?\\s+of\\s+credit|letters?\\s+of\\s+credit\\s+outstanding|outstanding\\s+letter\\s+of\\s+credit)\\b/, /amounts?\\s+outstanding\\b/, /outstanding\\b/ (in same clause as 'letters of credit' or other instrument name).\n - component-breakdown cues: /of\\s+which\\s+([0-9\\,\\.]+)\\s+(?:were\\s+)?denominated\\s+in\\s+([A-Za-z\\-\\$%]+)|of\\s+which\\s+([0-9\\,\\.]+)\\s+of\\s+which\\s+([0-9\\,\\.]+)\\s+were\\s+denominated|denominated\\s+in\\s+U\\.S\\.\\s+dollars|and\\s+([0-9\\,\\.]+)\\s+in\\s+currencies?\\s+other\\s+than\\s+the\\s+U\\.S\\.\\s+dollar/i, /denominated\\s+in\\s+([A-Z]{3}|U\\.S\\.\\s+dollars|dollars|euro|EUR|USD)\\b/.\nAssociation windows & antecedent resolution:\n - Require a parent-anchor (parent monetary concept e.g. 'letters of credit outstanding') in the same sentence OR the immediately preceding sentence (±1 sentence, antecedent span <= 40 tokens). If no parent-anchor found, do NOT auto-assign component -> parent; flag 'breakdown-no-parent-anchor' for review.\n - For each currency-component numeric token, require the component token to be within the same clause or within ±12 tokens of the component-breakdown cue (tight window to avoid erroneous attachments).\nMapping decision flow (apply in order):\n 1) If taxonomy contains an explicit currency-component tag (e.g., LettersOfCreditOutstandingAmountByCurrency or LettersOfCreditOutstandingAmountInU.S.Dollars) -> assign that specific component tag to the component numeric and link it to the parent via instrument-anchor metadata (parent_tag_id + relation='component-of').\n 2) Else (no currency-component tag exists) -> map component numeric to the parent outstanding tag (e.g., LettersOfCreditOutstandingAmount) with the following deterministics:\n    a) Attach currency attribute metadata: { currency_literal: '<detected currency text>', currency_iso: '<ISO if recognized e.g., USD>', relation: 'component-of', parent_tag: '<parent_tag_id>' }.\n    b) Attach matched_cue_spans: [ parent_anchor_span, component_breakdown_span, numeric_span ].\n    c) Set attached_bullet_id = ctx-00016 and match_score = 1.0 (deterministic) for traceability.\n 3) If the component sentence contains an explicit per-currency tag candidate AND the tag-assignment in step (1) was made but the post-decision validator (ctx-00010) fails unit-or-anchor validation, create derived_bullet record (derived-<hash>) recommending a currency-component tag and queue for playbook author review.\nPrecedence & conflict rules:\n - Component-breakdown mapping to parent overrides generic heuristics that would otherwise map the component amounts to unrelated tags (e.g., PaymentsToAcquireBusinessesGross, RemainingBorrowingCapacity) when parent-anchor is present and component context includes words like 'of which', 'denominated in'.\n - Do NOT split a parent 'outstanding' amount across different parent tags; components must map back to the same canonical parent tag unless explicit component-level taxonomy tags are available.\nValidation & sanity checks:\n - Sum-check logging: when parent total numeric is present in same or adjacent sentence and the components are numeric, compute (sum of components) vs parent_total. If deviation > tolerance (e.g., 0.5% absolute or $1,000 for small amounts), emit 'breakdown-sum-mismatch' QA record with spans and values.\n - Unit-and-anchor enforcement: each component numeric must pass ctx-00010 unit validation (CURRENCY). If unit missing, flag 'component-missing-unit' and queue for review rather than auto-assign.\n - Currency normalization: map detected currency words to ISO where possible (USD, EUR, etc.); if phrase 'currencies other than the U.S. dollar' appears, attach a 'NON_USD' bucket metadata and preserve literal component numeric mapping to parent.\nTrace & logging requirements (attach to each annotation):\n { attached_bullet_id: 'ctx-00016'|'derived-<hash>', parent_tag_id: '<parent_tag>', parent_anchor_span, component_currency_literal, component_currency_iso (if any), numeric_span, matched_cue_spans, match_score, validation: { unit_check_passed:bool, sum_check_passed:bool, reason_codes:[] }, provenance:{ module:'ctx-00016', pipeline_version, timestamp } }\nUnit-tests (atomic examples to add):\n - Positive: 'The Company had $449.9 million of outstanding letters of credit, $242.3 million of which were denominated in U.S. dollars and $207.6 million of which were denominated in currencies other than the U.S. dollar.' -> parent $449.9M = LettersOfCreditOutstandingAmount; $242.3M and $207.6M -> LettersOfCreditOutstandingAmount + currency metadata (USD and NON_USD) attached; sum_check passes.\n - Positive with missing component tag: same sentence but taxonomy lacks currency-component tags -> components map to parent LettersOfCreditOutstandingAmount with currency attribute and derived_bullet suggestion for currency-component tags.\n - Negative/no-anchor: '$242.3 million denominated in U.S. dollars' but no parent-anchor in ±1 sentence -> flag 'breakdown-no-parent-anchor' and do not auto-assign; queue for human review.\n - Sum-mismatch: parent total $450.0M but components sum to $449.9M -> if deviation <= tolerance, allow mapping but log minor mismatch; if > tolerance -> emit 'breakdown-sum-mismatch' QA record.\nOperational note: run this heuristic after parent-anchor detection (e.g., ctx-00013 / ctx-00008 family) and before generic fallbacks. When frequent derived_bullets are created for currency-component patterns, surface recommended taxonomy additions in the weekly 'derived-bullet suggestions' dashboard.\n[ctx-00017] helpful=0 harmful=0 :: Title: Disambiguate \"remaining <N>\" -> 'remaining-of-grant' vs 'remaining-outstanding' (atomic heuristic)\nPurpose: Prevent mapping 'remaining N awards' by default to NonvestedNumber when the phrase is actually partitioning a previously described grant pool (should map to GrantsInPeriod).\nExact lexical cues (case-insensitive regexes):\n - grant-anchor cues: /\\b(granted|were\\s+granted|grants?\\s+in\\s+the\\s+period|awards?\\s+granted|grants?\\s+in\\s+the\\s+year|the\\s+Company\\s+granted)\\b/\n - remaining-cue forms: /\\b(remaining|the\\s+remaining|remainder|the\\s+remainder)\\b/\n - outstanding/unvested cues (explicit nonvested): /\\b(nonvested|unvested|outstanding|vested\\/unvested|vested\\s+and\\s+unvested|remaining\\s+unvested|still\\s+outstanding)\\b/\nAssociation windows & antecedent resolution:\n - If a numeric token appears within ±4 tokens of a remaining-cue, run antecedent-scan for a grant-anchor in the same sentence OR in the immediately preceding sentence (±1 sentence). Allow antecedent span up to 40 tokens across sentence boundary.\n - Treat a prior numeric grant-anchor (e.g., '254,620 performance share awards were granted') as a definitive grant pool anchor when it co-occurs with grant-anchor cues above.\nDecision flow (deterministic, apply in order):\n 1) If numeric token matches remaining-cue AND antecedent-scan finds a grant-anchor (textual 'granted' + an earlier grant count or explicit 'grants in the period' anchor) within allowed window -> map numeric to GrantsInPeriod (same grants-in-period tag used for the antecedent grant counts). Attach relation metadata: { relation: 'component-of-grant', grant_anchor_span }.\n 2) Else if numeric token matches remaining-cue AND same sentence (or ±1 sentence) includes an explicit outstanding/unvested cue -> map numeric to NonvestedNumber (or other outstanding-specific tag) and attach anchor span for 'outstanding/unvested'. Example cues: 'nonvested', 'outstanding', 'unvested'.\n 3) Else if numeric token matches remaining-cue but both grant-anchor AND outstanding cues present: prefer explicit outstanding/unvested cues (NonvestedNumber) only if the outstanding/unvested cue is lexically closer to the numeric token (token-distance rule). Otherwise prefer GrantsInPeriod if antecedent grant-anchor is the semantic antecedent (e.g., sentence is partitioning a previously stated grant pool). Log tie events.\n 4) Else (no antecedent grant-anchor and no explicit outstanding/unvested cue) -> DO NOT auto-assign. Flag as 'remaining-ambiguous' and queue example for human review instead of guessing.\nPrecedence & tie-breakers (atomic):\n - Highest precedence: explicit in-sentence outstanding/unvested lexical cue near numeric -> NonvestedNumber.\n - Next: detected antecedent grant-anchor within ±1 sentence and token-distance to numeric <= 40 -> GrantsInPeriod (treat 'remaining' as partition of grant pool).\n - If both cues present and distances equal, prefer the label whose required-anchor-cue includes an award-verb ('granted') when the antecedent explicitly declares a grant event; otherwise require human review.\nUnit-and-evidence validation (must run and attach traces):\n - Required evidence fields to attach on decision: { attached_bullet_id, decision_rule_id: 'ctx-remaining-01', matched_cue_spans: [remaining_cue_span, grant_anchor_span|null, outstanding_cue_span|null], numeric_span, decision: 'grants-in-period'|'nonvested'|'deferred-ambiguous', match_score: deterministic (1.0 when antecedent found), provenance: { module:'ctx-remaining-01', timestamp, pipeline_version } }.\nUnit-tests (atomic examples):\n - Positive (should map to GrantsInPeriod): 'The Company granted 254,620 performance share awards during the period. 123,812 were TSR awards and the remaining 130,808 performance share awards have a three-year performance period.' -> 254,620 = GrantsInPeriod; 123,812 = GrantsInPeriod; 130,808 = GrantsInPeriod (rule applies because antecedent grant-anchor exists).\n - Negative (should map to NonvestedNumber): 'As of December 31, 130,808 awards remained outstanding and nonvested under the plan.' -> 130,808 = NonvestedNumber (explicit 'outstanding'/'nonvested').\n - Ambiguous (defer to review): 'The remaining 130,808 amount was noted.' (no grant or outstanding anchors within ±1 sentence) -> flag 'remaining-ambiguous' and require human review.\nLogging & QA: always record anchor spans and which rule branch fired; log 'remaining-ambiguous' instances to retraining queue. Create derived_bullet suggestion when GrantsInPeriod mapping is common for this pattern but no playbook bullet explicitly documents it.\nImplementation note: run this heuristic early in share-based-compensation mapping pipeline (before general lexical fallbacks that equate 'remaining' -> outstanding). Integrate with err-00003 heuristic-use logging so attached_bullet_id and matched spans are persisted for audit.\n[ctx-00018] helpful=0 harmful=0 :: id: ctx-00018 :: Sibling-numeric disambiguation for share-based-compensation (aggregate-vs-per-share) (atomic)\nPurpose: deterministically map multiple numeric tokens in the same clause/sentence that refer to share-based-compensation metrics so aggregates and per-share measures are assigned to distinct, correct tags and instrument class (options vs equity-other-than-options) is enforced.\nExact lexical cues (case-insensitive):\n - vested-aggregate cues: /\\b(total\\s+fair\\s+value\\s+of\\s+(shares|awards)\\s+vested|total\\s+fair\\s+value\\s+of\\s+awards\\s+that\\s+vested|fair\\s+value\\s+of\\s+awards\\s+that\\s+vested)\\b/\n - grant-date per-share cues: /\\b(weighted-?average\\s+grant-?date\\s+fair\\s+value\\b|grant-?date\\s+fair\\s+value\\s+per\\s+share|weighted-?average\\s+grant-?date\\s+fair\\s+value\\s+of)\\b/\n - instrument-class cues (equity-other-than-options): /\\b(restricted\\s+stock|restricted\\s+share|common\\s+share|common\\s+stock|RSU|restricted\\s+stock\\s+units|awards?\\s+other\\s+than\\s+options)\\b/\nAssociation windows & token rules:\n - Operate on the minimal clause (same sentence or immediately adjacent sentence where connective phrases tie the metrics). Consider numeric tokens within ±12 tokens of the cues.\n - For any sentence containing at least one vested-aggregate cue AND at least one grant-date per-share cue: apply sibling-disambiguation mapping below rather than single-token lexical fallbacks.\n Unit validation:\n - Vested-aggregate mapping requires numeric token unit == CURRENCY (e.g., $93 million). If unit != CURRENCY reject and queue for review.\n - Grant-date per-share mapping requires unit == PER_SHARE_CURRENCY (currency + explicit 'per share' or 'per common share'); if currency present without 'per share', flag 'missing-per-share-cue' and queue for review.\n Deterministic mapping rules & precedence (apply in order):\n 1) If CURRENCY numeric + vested-aggregate cue present -> assign ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsVestedInPeriodTotalFairValue (vested-in-period aggregate). Attach instrument-class anchor if present (see step 3). Do NOT map this currency to any grant-date-per-share tag.\n 2) If PER_SHARE_CURRENCY numeric + grant-date per-share cue present -> assign ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriodWeightedAverageGrantDateFairValue (award-class-specific weighted-average grant-date fair value). Do NOT map this per-share number to aggregate/vested tags.\n 3) Instrument-class enforcement: if instrument-class cue (restricted/common/RSU) appears in same sentence or antecedent ±1 sentence (antecedent span <= 40 tokens), force assignment to the 'EquityInstrumentsOtherThanOptions' family for both tags above. If only 'option' / 'stock option' appears, do NOT assign the equity-other-than-options variants; instead route to option-specific tags (e.g., options-weighted-average-grant-date) per existing ctx-00012 rules.\n 4) Multi-sibling tie-breaker: when multiple currency tokens appear near the vested-aggregate cue, choose the numeric token closest by token-distance to the exact phrase 'total fair value' or 'vested'. When multiple per-share tokens appear near grant-date cue, choose the per-share numeric closest to 'grant-date fair value' or 'weighted-average'.\n 5) Cross-mapping guardrails: if algorithm would assign the same numeric token to both an aggregate-fair-value and a per-share grant-date tag, reject ambiguous double-assignment and flag 'sharecomp-sibling-ambiguous' for human review. Prefer deterministic single assignments above; only allow both tags if the text contains explicit dual measurements referencing different units (e.g., '$93 million' and '$20.77 per share') and units match required types.\n Logging & evidence attachment (mandatory): for every auto-assignment attach { attached_bullet_id, matched_cue_spans: [vested_cue_span|null, grantdate_cue_span|null, instrument_class_span|null], numeric_span, unit_detected, decision_rule_id:'ctx-00018', match_score:1.0, provenance }. If instrument-class anchor absent, attach 'instrument_class_inferred': 'EQUITY_OTHER_THAN_OPTIONS' only when lexical evidence present; otherwise attach 'instrument_class_missing' and queue example for review.\n Minimal unit-tests/examples (atomic):\n - 'The total fair value of shares vested was $93 million in 2018... The weighted-average grant-date fair value of awards granted was $20.77 during 2018.' -> $93M -> VestedInPeriodTotalFairValue (EquityInstrumentsOtherThanOptions); $20.77 per share -> GrantsInPeriodWeightedAverageGrantDateFairValue (EquityInstrumentsOtherThanOptions). (pass)\n - 'Total fair value of awards that vested during the year was $5.6 million and the weighted-average grant-date fair value was $4.50 per share.' -> map respectively by unit. (pass)\n - 'Weighted-average grant-date fair value $4.50 (no \"per share\" present)' -> flag 'missing-per-share-cue' and queue for human review. (validation)\n Implementation note: run ctx-00018 after ctx-00006/ctx-00012 lexical detection but before generic numeric fallbacks. Integrate with err-00003 heuristic-use logging so attached_bullet_id is recorded and create derived_bullet if taxonomy lacks an award-class-specific tag.\n## OTHERS\n[misc-00002] helpful=0 harmful=0 :: Micro decision flow for acquisition-related monetary phrases (apply in order): 1) Search sentence (or immediate surrounding sentence ±1) for the exact phrase variants from the lexical-to-tag mapping. 2) If only one cue matches, assign the corresponding tag. 3) If multiple cues match, choose the cue whose token span is closest to the numeric amount (measure token-distance from numeric token to cue span). 4) If both cues are equidistant or no numeric amount is present, break ties by cue specificity: ('purchase price' > 'cash paid' > 'consideration'). 5) If still ambiguous, prefer PaymentsToAcquireBusinessesGross when the sentence explicitly mentions payments, cash, or amounts described as 'paid' or 'paid as part of the acquisition'; prefer BusinessCombinationConsiderationTransferred1 only when the text uses 'consideration' or explicitly 'consideration transferred' and describes the composition of consideration (e.g., cash + shares + other instruments). 6) Log ambiguous cases for human review and add the sentence to a short test-suite.\n\n**Reflection:**\n(empty)\n\n**Question:**\nYou are XBRL expert.  Here is a list of US GAAP tags options: ,OperatingLeasesRentExpenseNet,MinorityInterestOwnershipPercentageByParent,ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriodWeightedAverageGrantDateFairValue,DerivativeNotionalAmount,PreferredStockDividendRatePercentage,GuaranteeObligationsMaximumExposure,LossContingencyEstimateOfPossibleLoss,OperatingLeaseRightOfUseAsset,NumberOfOperatingSegments,PaymentsToAcquireBusinessesNetOfCashAcquired,DebtInstrumentBasisSpreadOnVariableRate1,InterestExpense,ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsNonvestedNumber,CommonStockSharesOutstanding,StockRepurchaseProgramRemainingAuthorizedRepurchaseAmount1,LineOfCreditFacilityInterestRateAtPeriodEnd,ContractWithCustomerLiabilityRevenueRecognized,AmortizationOfIntangibleAssets,ShareBasedCompensationArrangementByShareBasedPaymentAwardAwardVestingPeriod1,DebtInstrumentRedemptionPricePercentage,RepaymentsOfDebt,DisposalGroupIncludingDiscontinuedOperationConsideration,LineOfCreditFacilityRemainingBorrowingCapacity,BusinessCombinationAcquisitionRelatedCosts,LesseeOperatingLeaseRenewalTerm,TreasuryStockValueAcquiredCostMethod,PreferredStockSharesAuthorized,RelatedPartyTransactionExpensesFromTransactionsWithRelatedParty,ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsVestedInPeriodTotalFairValue,UnrecognizedTaxBenefitsThatWouldImpactEffectiveTaxRate,SaleOfStockNumberOfSharesIssuedInTransaction,OperatingLeaseWeightedAverageRemainingLeaseTerm1,StockRepurchaseProgramAuthorizedAmount1,SupplementalInformationForPropertyCasualtyInsuranceUnderwritersPriorYearClaimsAndClaimsAdjustmentExpense,RelatedPartyTransactionAmountsOfTransaction,CommonStockDividendsPerShareDeclared,IncomeLossFromEquityMethodInvestments,DebtInstrumentMaturityDate,LettersOfCreditOutstandingAmount,AllocatedShareBasedCompensationExpense,EffectiveIncomeTaxRateContinuingOperations,ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAuthorized,ShareBasedCompensationArrangementByShareBasedPaymentAwardNumberOfSharesAvailableForGrant,ShareBasedCompensationArrangementByShareBasedPaymentAwardOptionsGrantsInPeriodGross,ConcentrationRiskPercentage1,OperatingLeasePayments,LongTermDebt,RestructuringCharges,CommonStockParOrStatedValuePerShare,DebtInstrumentConvertibleConversionPrice1,Revenues,DeferredFinanceCostsGross,EffectiveIncomeTaxRateReconciliationAtFederalStatutoryIncomeTaxRate,DefinedBenefitPlanContributionsByEmployer,GoodwillImpairmentLoss,LossContingencyPendingClaimsNumber,OperatingLeaseLiability,LineOfCreditFacilityMaximumBorrowingCapacity,OperatingLeaseExpense,DerivativeFixedInterestRate,LineOfCreditFacilityCommitmentFeePercentage,CumulativeEffectOfNewAccountingPrincipleInPeriodOfAdoption,SharebasedCompensationArrangementBySharebasedPaymentAwardAwardVestingRightsPercentage,DebtWeightedAverageInterestRate,PaymentsToAcquireBusinessesGross,DebtInstrumentCarryingAmount,BusinessCombinationRecognizedIdentifiableAssetsAcquiredAndLiabilitiesAssumedIntangibles,RevenueFromContractWithCustomerExcludingAssessedTax,PublicUtilitiesRequestedRateIncreaseDecreaseAmount,ContractWithCustomerLiability,DebtInstrumentTerm,DebtInstrumentFairValue,RevenueFromContractWithCustomerIncludingAssessedTax,RevenueFromRelatedParties,DebtInstrumentInterestRateEffectivePercentage,GainsLossesOnExtinguishmentOfDebt,EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognizedShareBasedAwardsOtherThanOptions,DebtInstrumentUnamortizedDiscount,LineOfCreditFacilityCurrentBorrowingCapacity,CashAndCashEquivalentsFairValueDisclosure,LesseeOperatingLeaseTermOfContract,RestructuringAndRelatedCostExpectedCost1,DefinedContributionPlanCostRecognized,OperatingLeaseCost,LossContingencyDamagesSoughtValue,ShareBasedCompensationArrangementByShareBasedPaymentAwardOptionsGrantsInPeriodWeightedAverageGrantDateFairValue,ShareBasedCompensationArrangementByShareBasedPaymentAwardEquityInstrumentsOtherThanOptionsGrantsInPeriod,EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognizedPeriodForRecognition1,EmployeeServiceShareBasedCompensationNonvestedAwardsTotalCompensationCostNotYetRecognized,FiniteLivedIntangibleAssetUsefulLife,Depreciation,AcquiredFiniteLivedIntangibleAssetsWeightedAverageUsefulLife,DeferredFinanceCostsNet,DebtInstrumentInterestRateStatedPercentage,Goodwill,CommonStockCapitalSharesReservedForFutureIssuance,LongTermDebtFairValue,OperatingLossCarryforwards,InterestExpenseDebt,UnrecognizedTaxBenefits,BusinessCombinationContingentConsiderationLiability,TreasuryStockAcquiredAverageCostPerShare,ClassOfWarrantOrRightExercisePriceOfWarrantsOrRights1,SharebasedCompensationArrangementBySharebasedPaymentAwardExpirationPeriod,NumberOfRealEstateProperties,TreasuryStockSharesAcquired,AntidilutiveSecuritiesExcludedFromComputationOfEarningsPerShareAmount,CommonStockSharesAuthorized,SharePrice,DebtInstrumentFaceAmount,AmortizationOfFinancingCosts,BusinessCombinationConsiderationTransferred1,LineOfCreditFacilityUnusedCapacityCommitmentFeePercentage,StockRepurchasedDuringPeriodShares,ProceedsFromIssuanceOfCommonStock,StockIssuedDuringPeriodSharesNewIssues,AccrualForEnvironmentalLossContingencies,BusinessAcquisitionPercentageOfVotingInterestsAcquired,LossContingencyAccrualAtCarryingValue,OperatingLeaseWeightedAverageDiscountRatePercent,ShareBasedCompensationArrangementByShareBasedPaymentAwardOptionsExercisesInPeriodTotalIntrinsicValue,BusinessAcquisitionEquityInterestsIssuedOrIssuableNumberOfSharesIssued,CapitalizedContractCostAmortization,NumberOfReportableSegments,AssetImpairmentCharges,RevenueRemainingPerformanceObligation,EquityMethodInvestmentOwnershipPercentage,MinorityInterestOwnershipPercentageByNoncontrollingOwners,AreaOfRealEstateProperty,StockRepurchasedAndRetiredDuringPeriodShares,LineOfCredit,BusinessCombinationRecognizedIdentifiableAssetsAcquiredAndLiabilitiesAssumedIntangibleAssetsOtherThanGoodwill,IncomeTaxExpenseBenefit,PropertyPlantAndEquipmentUsefulLife,LeaseAndRentalExpense,ShareBasedCompensation,EquityMethodInvestments,SaleOfStockPricePerShare,EmployeeServiceShareBasedCompensationTaxBenefitFromCompensationExpense. Answer the following 4 independent questions by providing only  4 US GAAP tags answers in the order of the questions. Each answer must be saperated by a comma (,).  Provide nothing else. \n1. What is best tag for entity \"7.625\" in sentence: \"AK Steel has outstanding 7.625 % Senior Notes due October 2021 ( the “ 2021 Notes ” ) .?\"\n2. What is best tag for entity \"7.625\" in sentence: \"The 2021 Notes were issued under a supplemental indenture , which includes covenants and restrictions substantially similar to the existing indentures governing the 7.625 % Senior Notes due 2020 and the 8.375 % Senior Notes due 2022 and are equal in right of payment to those notes .?\"\n3. What is best tag for entity \"8.375\" in sentence: \"The 2021 Notes were issued under a supplemental indenture , which includes covenants and restrictions substantially similar to the existing indentures governing the 7.625 % Senior Notes due 2020 and the 8.375 % Senior Notes due 2022 and are equal in right of payment to those notes .?\"\n4. What is best tag for entity \"103.813\" in sentence: \"Before October 1 , 2017 , we may redeem the 2021 Notes at a price equal to par plus a make whole premium and all accrued and unpaid interest to the date of redemption After that date , they are redeemable at 103.813 % until October 1 , 2018 , 101.906 % thereafter until October 1 , 2019 , and 100.0 % thereafter , together with all accrued and unpaid interest to the date of redemption .?\"\nOutput US GAAP tags:\n\n**Context:**\n\n\n**Answer in this exact JSON format:**\n{\n  \"reasoning\": \"[Your chain of thought / reasoning / thinking process, detailed analysis and calculations]\",  \n  \"bullet_ids\": [\"calc-00001\", \"fin-00002\"],  \n  \"final_answer\": \"[Your concise final answer here]\"\n}\n\n---\n",
  "response": "{\n  \"reasoning\": \"High-level rationale: Percentages that qualify named debt instruments (e.g., '7.625% Senior Notes', '8.375% Senior Notes') are stated interest/coupon rates and map to DebtInstrumentInterestRateStatedPercentage (per the instrument-anchor + 'per annum'/interest-rate heuristic). The redemption call price expressed as a percent (e.g., 103.813%) is a debt redemption price and maps to DebtInstrumentRedemptionPricePercentage. Unit-and-anchor validation (percent unit + instrument anchor) supports these assignments.\",\n  \"bullet_ids\": [\"ctx-00011\", \"ctx-00005\", \"ctx-00010\"],\n  \"final_answer\": \"DebtInstrumentInterestRateStatedPercentage,DebtInstrumentInterestRateStatedPercentage,DebtInstrumentInterestRateStatedPercentage,DebtInstrumentRedemptionPricePercentage\"\n}",
  "prompt_time": 0.0,
  "response_time": 18.885967016220093,
  "total_time": 18.885967016220093,
  "call_time": 18.885967016220093,
  "prompt_length": 119445,
  "response_length": 780,
  "prompt_num_tokens": 27944,
  "response_num_tokens": 1466,
  "timestamp": "20260205_182053_166",
  "datetime": "2026-02-05T18:20:53.166177"
}